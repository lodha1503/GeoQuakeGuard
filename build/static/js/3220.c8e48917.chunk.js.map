{"version":3,"file":"static/js/3220.c8e48917.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/features/processors/BaseProcessor.js","../node_modules/@arcgis/core/views/2d/layers/features/processors/HeatmapProcessor.js","../node_modules/@arcgis/core/views/2d/layers/features/support/tileUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import r from\"../../../../../core/Accessor.js\";import{property as t}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";let s=class extends r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.tileStore.tileScheme.spatialReference;return e&&e.toJSON()||null}};e([t({readOnly:!0})],s.prototype,\"supportsTileUpdates\",null),e([t({constructOnly:!0})],s.prototype,\"remoteClient\",void 0),e([t({constructOnly:!0})],s.prototype,\"service\",void 0),e([t()],s.prototype,\"spatialReference\",null),e([t({constructOnly:!0})],s.prototype,\"tileInfo\",void 0),e([t({constructOnly:!0})],s.prototype,\"tileStore\",void 0),s=e([o(\"esri.views.2d.layers.features.processors.BaseProcessor\")],s);const p=s;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/Error.js\";import{subclass as t}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{diff as s}from\"../../../../../core/accessorSupport/diffUtils.js\";import{calculateHeatmapIntensityInfoReaders as r}from\"../../../../../renderers/support/heatmapUtils.js\";import{tileSize as i}from\"../../../engine/webgl/definitions.js\";import o from\"./BaseProcessor.js\";import{getPow2NeighborKey as a}from\"../support/tileUtils.js\";class n{constructor(e,t){this.offset=e,this.extent=t}}function d(e){const t=e.key,s=new Map,r=256,o=i,d=e.tileInfoView.tileInfo.isWrappable;return s.set(a(t,-1,-1,d).id,new n([-o,-o],[o-r,o-r,o,o])),s.set(a(t,0,-1,d).id,new n([0,-o],[0,o-r,o,o])),s.set(a(t,1,-1,d).id,new n([o,-o],[0,o-r,r,o])),s.set(a(t,-1,0,d).id,new n([-o,0],[o-r,0,o,o])),s.set(a(t,1,0,d).id,new n([o,0],[0,0,r,o])),s.set(a(t,-1,1,d).id,new n([-o,o],[o-r,0,o,r])),s.set(a(t,0,1,d).id,new n([0,o],[0,0,o,r])),s.set(a(t,1,1,d).id,new n([o,o],[0,0,r,r])),s}let l=class extends o{constructor(){super(...arguments),this.type=\"heatmap\",this._tileKeyToFeatureSets=new Map}initialize(){this.addHandles([this.tileStore.on(\"update\",this.onTileUpdate.bind(this))])}async update(e,t){const r=t.schema.processors[0];if(\"heatmap\"!==r.type)return;s(this._schema,r)&&(e.mesh=!0,this._schema=r)}onTileUpdate(e){for(const t of e.removed)this._tileKeyToFeatureSets.delete(t.key.id)}onTileClear(e){const t={clear:!0};return this._tileKeyToFeatureSets.delete(e.key.id),this.remoteClient.invoke(\"tileRenderer.onTileData\",{tileKey:e.id,data:t})}async onTileMessage(e,t,s){this._tileKeyToFeatureSets.has(e.key.id)||this._tileKeyToFeatureSets.set(e.key.id,new Map);const i=this._tileKeyToFeatureSets.get(e.key.id);if(i&&null!=t.addOrUpdate&&t.addOrUpdate.hasFeatures&&i.set(t.addOrUpdate.instance,t),t.end){const t=[],i=d(e);this._tileKeyToFeatureSets.forEach(((s,r)=>{if(r===e.key.id)s.forEach((({addOrUpdate:e})=>{e&&t.push(e)}));else if(i.has(r)){const e=i.get(r),[o,a]=e.offset;s.forEach((({addOrUpdate:e})=>{if(e){const s=e.transform(o,a,1,1);t.push(s)}}))}}));const o=r(t,this._schema.mesh,512,512),a={tileKey:e.key.id,intensityInfo:o},n=[o.matrix];return this.remoteClient.invoke(\"tileRenderer.onTileData\",a,{...s,transferList:n})}}onTileError(e,t,s){return this.remoteClient.invoke(\"tileRenderer.onTileError\",{tileKey:e.id,error:t},s)}};l=e([t(\"esri.views.2d.layers.features.processors.HeatmapProcessor\")],l);const p=l;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nfunction o(o,l,c,r){const e=o.clone(),n=1<<e.level,t=e.col+l,w=e.row+c;return r&&t<0?(e.col=t+n,e.world-=1):t>=n?(e.col=t-n,e.world+=1):e.col=t,e.row=w,e}export{o as getPow2NeighborKey};\n"],"names":["s","_r","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","get","e","this","tileStore","tileScheme","spatialReference","toJSON","r","t","readOnly","prototype","constructOnly","p","o","n","offset","extent","d","Map","i","tileInfoView","tileInfo","isWrappable","set","a","id","l","_o","_this","type","_tileKeyToFeatureSets","addHandles","on","onTileUpdate","bind","_update","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","schema","processors","abrupt","_schema","mesh","stop","_x","_x2","_step","_iterator","_createForOfIteratorHelper","removed","done","delete","err","f","remoteClient","invoke","tileKey","data","clear","_onTileMessage","_callee2","_t2","_i","_o3","_a2","_n","_context2","has","addOrUpdate","hasFeatures","instance","end","forEach","_ref","push","_e$offset","_slicedToArray","_ref2","transform","intensityInfo","matrix","_objectSpread","transferList","_x3","_x4","_x5","error","c","clone","level","col","w","row","world"],"sourceRoot":""}