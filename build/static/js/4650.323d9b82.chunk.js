"use strict";(self.webpackChunkamit_kumar_rathi=self.webpackChunkamit_kumar_rathi||[]).push([[4650],{94650:function(e,r,t){t.r(r),t.d(r,{fromUrl:function(){return b}});var n=t(37762),a=t(74165),u=t(1413),s=t(15861),l=t(10064),c=t(35995),i=t(25899),o=t(84076),p=t(74368),f=t(37933),v=t(19610),y=t(41226),d={FeatureLayer:!0,SceneLayer:!0};function b(e){return h.apply(this,arguments)}function h(){return(h=(0,s.Z)((0,a.Z)().mark((function e(r){var n,s,l,c,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=null===(n=r.properties)||void 0===n?void 0:n.customParameters,e.next=3,w(r.url,s);case 3:if(l=e.sent,c=(0,u.Z)((0,u.Z)({},r.properties),{},{url:r.url}),l.layers.length+l.tables.length!==0){e.next=7;break}return e.abrupt("return",(null!=l.layerId&&(c.layerId=l.layerId),null!=l.sourceJSON&&(c.sourceJSON=l.sourceJSON),new l.Constructor(c)));case 7:return e.next=10,t.e(8048).then(t.bind(t,18048));case 10:return e.t0=e.sent.default,e.t1={title:l.parsedUrl.title},i=new e.t0(e.t1),e.next=15,m(i,l,c);case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,r){return e?e.find((function(e){return e.id===r})):null}function m(e,r,t){return k.apply(this,arguments)}function k(){return(k=(0,s.Z)((0,a.Z)().mark((function e(r,t,s){var l,c,i,o,p,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=function(e,r,t,n){var a=(0,u.Z)((0,u.Z)({},s),{},{layerId:r,sublayerTitleMode:"service-name"});return null!=e&&(a.url=e),null!=t&&(a.sourceJSON=t),n(a)},c=t.sublayerConstructorProvider,i=(0,n.Z)(t.layers),e.prev=3,p=(0,a.Z)().mark((function e(){var n,u,s,i,p,f,v;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=o.value,s=u.id,i=u.serverUrl,p=x(t.sublayerInfos,s),f=null!==(n=p&&(null===c||void 0===c?void 0:c(p)))&&void 0!==n?n:t.Constructor,v=l(i,s,p,(function(e){return new f(e)})),r.add(v);case 3:case"end":return e.stop()}}),e)})),i.s();case 6:if((o=i.n()).done){e.next=10;break}return e.delegateYield(p(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),i.e(e.t1);case 15:return e.prev=15,i.f(),e.finish(15);case 18:if(!t.tables.length){e.next=23;break}return e.next=21,P("FeatureLayer");case 21:f=e.sent,t.tables.forEach((function(e){var n=e.id,a=e.serverUrl,u=l(a,n,x(t.tableInfos,n),(function(e){return new f(e)}));r.tables.add(u)}));case 23:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})))).apply(this,arguments)}function w(e,r){return Z.apply(this,arguments)}function Z(){return Z=(0,s.Z)((0,a.Z)().mark((function e(r,t){var n,u,s,c,o,p,v,b,h,x,m,k,w,Z,I,g,T,O,U,F,N,E,V,M,j,D,A;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,i.Qc)(r),e.t0=null==n,!e.t0){e.next=6;break}return e.next=5,S(r,t);case 5:n=e.sent;case 6:if(null!=n){e.next=8;break}throw new l.Z("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:r});case 8:s=(u=n).serverType,c=u.sublayer,p={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"},b="SceneServer"===s,h={parsedUrl:n,Constructor:null,layerId:((v="FeatureServer"===s)||b)&&null!==c&&void 0!==c?c:void 0,layers:[],tables:[]},e.t1=s,e.next="MapServer"===e.t1?13:"ImageServer"===e.t1?26:"SceneServer"===e.t1?33:"FeatureServer"===e.t1?38:44;break;case 13:if(null==c){e.next=17;break}o="FeatureLayer",e.next=25;break;case 17:return e.next=19,C(r,t);case 19:if(!e.sent){e.next=23;break}e.t2="TileLayer",e.next=24;break;case 23:e.t2="MapImageLayer";case 24:o=e.t2;case 25:return e.abrupt("break",45);case 26:return e.next=28,(0,y.T)(r,{customParameters:t});case 28:return m=e.sent,k=m.tileInfo,w=m.cacheType,o=k?"LERC"!==(null===k||void 0===k||null===(x=k.format)||void 0===x?void 0:x.toUpperCase())||w&&"elevation"!==w.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer",e.abrupt("break",45);case 33:return e.next=35,(0,y.T)(n.url.path,{customParameters:t});case 35:return Z=e.sent,o="SceneLayer",Z&&(I=null===Z||void 0===Z?void 0:Z.layers,"Voxel"===(null===Z||void 0===Z?void 0:Z.layerType)?o="VoxelLayer":null!==I&&void 0!==I&&I.length&&null!=(T=null===(g=I[0])||void 0===g?void 0:g.layerType)&&null!=f.fb[T]&&(o=f.fb[T])),e.abrupt("break",45);case 38:if(o="FeatureLayer",null==c){e.next=43;break}return e.next=41,(0,y.T)(r,{customParameters:t});case 41:O=e.sent,h.sourceJSON=O,"Oriented Imagery Layer"===O.type&&(o="OrientedImageryLayer");case 43:return e.abrupt("break",45);case 44:o=p[s];case 45:if(!d[o]||null!=c){e.next=61;break}return e.next=48,L(r,s,t);case 48:if(F=e.sent,v&&(h.sublayerInfos=F.layerInfos,h.tableInfos=F.tableInfos),1===F.layers.length+F.tables.length){e.next=60;break}if(h.layers=F.layers,h.tables=F.tables,e.t3=v&&(null===(U=F.layerInfos)||void 0===U?void 0:U.length),!e.t3){e.next=58;break}return e.next=57,J(F.layerInfos);case 57:h.sublayerConstructorProvider=e.sent;case 58:e.next=61;break;case 60:(v||b)&&(A=null!==(N=null===(E=F.layerInfos)||void 0===E?void 0:E[0])&&void 0!==N?N:null===(V=F.tableInfos)||void 0===V?void 0:V[0],h.layerId=null!==(M=null===(j=F.layers[0])||void 0===j?void 0:j.id)&&void 0!==M?M:null===(D=F.tables[0])||void 0===D?void 0:D.id,h.sourceJSON=A,v&&"Oriented Imagery Layer"===(null===A||void 0===A?void 0:A.type)&&(o="OrientedImageryLayer"));case 61:return e.next=63,P(o);case 63:return h.Constructor=e.sent,e.abrupt("return",h);case 65:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function S(e,r){return I.apply(this,arguments)}function I(){return I=(0,s.Z)((0,a.Z)().mark((function e(r,t){var n,u,s,l,o,p,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.T)(r,{customParameters:t});case 2:if(s=e.sent,l=null,o=null,"Feature Layer"===(p=s.type)||"Table"===p?(l="FeatureServer",o=null!==(n=s.id)&&void 0!==n?n:null):"indexedVector"===p?l="VectorTileServer":s.hasOwnProperty("mapName")?l="MapServer":s.hasOwnProperty("bandCount")&&s.hasOwnProperty("pixelSizeX")?l="ImageServer":s.hasOwnProperty("maxRecordCount")&&s.hasOwnProperty("allowGeometryUpdates")?l="FeatureServer":s.hasOwnProperty("streamUrls")?l="StreamServer":g(s)?(l="SceneServer",o=s.id):s.hasOwnProperty("layers")&&g(null===(u=s.layers)||void 0===u?void 0:u[0])&&(l="SceneServer"),l){e.next=7;break}return e.abrupt("return",null);case 7:return f=null!=o?(0,i.DR)(r):null,e.abrupt("return",{title:null!=f&&s.name||(0,c.vt)(r),serverType:l,sublayer:o,url:{path:null!=f?f.serviceUrl:(0,c.mN)(r).path}});case 9:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function g(e){return null!=e&&e.hasOwnProperty("store")&&e.hasOwnProperty("id")&&"number"==typeof e.id}function L(e,r,t){return T.apply(this,arguments)}function T(){return(T=(0,s.Z)((0,a.Z)().mark((function e(r,t,n){var u,s,l,c,i,o,f,v,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,e.t0=t,e.next="FeatureServer"===e.t0?4:"SceneServer"===e.t0?9:14;break;case 4:return e.next=6,(0,p.V)(r,{customParameters:n});case 6:return o=e.sent,i=!!o.layersJSON,l=o.layersJSON||o.serviceJSON,e.abrupt("break",17);case 9:return e.next=11,O(r,n);case 11:return f=e.sent,l=f.serviceInfo,c=f.tableServerUrl,e.abrupt("break",17);case 14:return e.next=16,(0,y.T)(r,{customParameters:n});case 16:l=e.sent;case 17:return v=null===(u=l)||void 0===u?void 0:u.layers,d=null===(s=l)||void 0===s?void 0:s.tables,e.abrupt("return",{layers:(null===v||void 0===v?void 0:v.map((function(e){return{id:e.id}})).reverse())||[],tables:(null===d||void 0===d?void 0:d.map((function(e){return{serverUrl:c,id:e.id}})).reverse())||[],layerInfos:i?v:[],tableInfos:i?d:[]});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,r){return U.apply(this,arguments)}function U(){return(U=(0,s.Z)((0,a.Z)().mark((function e(r,t){var n,u,s,l,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.T)(r,{customParameters:t});case 2:if(u=e.sent,null===(n=u.layers)||void 0===n?void 0:n[0]){e.next=6;break}return e.abrupt("return",{serviceInfo:u});case 6:return e.prev=6,e.next=9,(0,o.w)(r);case 9:return s=e.sent,l=s.serverUrl,e.next=13,(0,y.T)(l,{customParameters:t}).catch((function(){return null}));case 13:return c=e.sent,e.abrupt("return",(c&&(u.tables=c.tables),{serviceInfo:u,tableServerUrl:l}));case 17:return e.prev=17,e.t0=e.catch(6),e.abrupt("return",{serviceInfo:u});case 20:case"end":return e.stop()}}),e,null,[[6,17]])})))).apply(this,arguments)}function P(e){return F.apply(this,arguments)}function F(){return(F=(0,s.Z)((0,a.Z)().mark((function e(r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,v.T[r])());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,r){return N.apply(this,arguments)}function N(){return(N=(0,s.Z)((0,a.Z)().mark((function e(r,t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.T)(r,{customParameters:t});case 2:return e.abrupt("return",e.sent.tileInfo);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return E.apply(this,arguments)}function E(){return(E=(0,s.Z)((0,a.Z)().mark((function e(r){var t,n,u,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n=[],r.forEach((function(e){var r=e.type;"Oriented Imagery Layer"===r?(t.push(r),n.push(P("OrientedImageryLayer"))):(t.push(r),n.push(P("FeatureLayer")))})),n.length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Promise.all(n);case 5:return u=e.sent,s=new Map,e.abrupt("return",(t.forEach((function(e,r){s.set(e,u[r])})),function(e){return s.get(e.type)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},84076:function(e,r,t){t.d(r,{w:function(){return y}});var n=t(29439),a=t(74165),u=t(1413),s=t(15861),l=t(19545),c=t(76200),i=t(10064),o=t(66978),p=t(25899),f=t(7575),v=t(98995);function y(e,r){return d.apply(this,arguments)}function d(){return d=(0,s.Z)((0,a.Z)().mark((function e(r,t){var n,s,l,c,o,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(0,p.Qc)(r)){e.next=3;break}throw new i.Z("invalid-url","Invalid scene service url");case 3:if(c=(0,u.Z)((0,u.Z)({},t),{},{sceneServerUrl:l.url.path,layerId:null!==(n=l.sublayer)&&void 0!==n?n:void 0}),null===(s=c.sceneLayerItem)||void 0===s){e.next=8;break}e.next=11;break;case 8:return e.next=10,b(c);case 10:c.sceneLayerItem=e.sent;case 11:if(null!=c.sceneLayerItem){e.next=13;break}return e.abrupt("return",Z(c.sceneServerUrl.replace("/SceneServer","/FeatureServer"),c));case 13:return e.next=15,I(c);case 15:if(null!==(o=e.sent)&&void 0!==o&&o.url){e.next=18;break}throw new i.Z("related-service-not-found","Could not find feature service through portal item relationship");case 18:return e.next=20,Z(o.url,c);case 20:return f=e.sent,e.abrupt("return",(f.portalItem=o,f));case 22:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function b(e){return h.apply(this,arguments)}function h(){return(h=(0,s.Z)((0,a.Z)().mark((function e(r){var t,n,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(r);case 2:if(t=e.sent.serviceItemId){e.next=5;break}return e.abrupt("return",null);case 5:return n=new v.default({id:t,apiKey:r.apiKey}),e.next=8,k(r);case 8:return null!=(u=e.sent)&&(n.portal=new f.Z({url:u})),e.prev=10,e.abrupt("return",n.load({signal:r.signal}));case 14:return e.prev=14,e.t0=e.catch(10),e.abrupt("return",((0,o.r9)(e.t0),null));case 17:case"end":return e.stop()}}),e,null,[[10,14]])})))).apply(this,arguments)}function x(e){return m.apply(this,arguments)}function m(){return(m=(0,s.Z)((0,a.Z)().mark((function e(r){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.rootDocument){e.next=2;break}return e.abrupt("return",r.rootDocument);case 2:return t={query:{f:"json",token:r.apiKey},responseType:"json",signal:r.signal},e.prev=3,e.next=6,(0,c.Z)(r.sceneServerUrl,t);case 6:n=e.sent,r.rootDocument=n.data,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),r.rootDocument={};case 13:return e.abrupt("return",r.rootDocument);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function k(e){return w.apply(this,arguments)}function w(){return(w=(0,s.Z)((0,a.Z)().mark((function e(r){var t,n,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=null===l.id||void 0===l.id?void 0:l.id.findServerInfo(r.sceneServerUrl))||void 0===t||!t.owningSystemUrl){e.next=3;break}return e.abrupt("return",t.owningSystemUrl);case 3:return n=r.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info",e.prev=4,e.next=7,(0,c.Z)(n,{query:{f:"json"},responseType:"json",signal:r.signal});case 7:if(!(u=e.sent.data.owningSystemUrl)){e.next=10;break}return e.abrupt("return",u);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),(0,o.r9)(e.t0);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}function Z(e,r){return S.apply(this,arguments)}function S(){return S=(0,s.Z)((0,a.Z)().mark((function e(r,t){var u,s,l,o,f,v,y,d,b,h,m,k,w;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=(0,p.Qc)(r)){e.next=3;break}throw new i.Z("invalid-feature-service-url","Invalid feature service url");case 3:if(s=u.url.path,null!=(l=t.layerId)){e.next=6;break}return e.abrupt("return",{serverUrl:s});case 6:return o=x(t),f=function(e){var r={query:{f:"json"},responseType:"json",authMode:e,signal:t.signal};return(0,c.Z)(s,r)},v=f("anonymous").catch((function(){return f("no-prompt")})),e.next=11,Promise.all([v,o]);case 11:if(y=e.sent,d=(0,n.Z)(y,2),b=d[0],h=d[1],m=null===h||void 0===h?void 0:h.layers,k=b.data&&b.data.layers,Array.isArray(k)){e.next=19;break}throw new Error("expected layers array");case 19:if(!Array.isArray(m)){e.next=29;break}w=0;case 21:if(!(w<Math.min(m.length,k.length))){e.next=27;break}if(m[w].id!==l){e.next=24;break}return e.abrupt("return",{serverUrl:s,layerId:k[w].id});case 24:w++,e.next=21;break;case 27:e.next=31;break;case 29:if(!(null!=l&&l<k.length)){e.next=31;break}return e.abrupt("return",{serverUrl:s,layerId:k[l].id});case 31:throw new Error("could not find matching associated sublayer");case 32:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function I(e){return g.apply(this,arguments)}function g(){return(g=(0,s.Z)((0,a.Z)().mark((function e(r){var t,n,u,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.sceneLayerItem,n=r.signal,t){e.next=3;break}return e.abrupt("return",null);case 3:return e.prev=3,e.next=6,t.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:n});case 6:if(e.t0=e.sent.find((function(e){return"Feature Service"===e.type})),e.t0){e.next=9;break}e.t0=null;case 9:if(u=e.t0){e.next=12;break}return e.abrupt("return",null);case 12:return s=new v.default({portal:u.portal,id:u.id}),e.next=15,s.load();case 15:return e.abrupt("return",s);case 18:return e.prev=18,e.t1=e.catch(3),e.abrupt("return",((0,o.r9)(e.t1),null));case 21:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}},74368:function(e,r,t){t.d(r,{V:function(){return s}});var n=t(74165),a=t(15861),u=t(41226);function s(e,r){return l.apply(this,arguments)}function l(){return l=(0,a.Z)((0,n.Z)().mark((function e(r,t){var a,s,l,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.T)(r,t);case 2:if(v(s=e.sent),o(s),l={serviceJSON:s},!((null!==(a=s.currentVersion)&&void 0!==a?a:0)<10.5)){e.next=7;break}return e.abrupt("return",l);case 7:return e.next=9,(0,u.T)(r+"/layers",t);case 9:return c=e.sent,e.abrupt("return",(v(c),o(c),l.layersJSON={layers:c.layers,tables:c.tables},l));case 11:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function c(e){return"Feature Layer"===e.type||"Oriented Imagery Layer"===e.type}function i(e){return"Table"===e.type}function o(e){var r,t;e.layers=null===(r=e.layers)||void 0===r?void 0:r.filter(c),e.tables=null===(t=e.tables)||void 0===t?void 0:t.filter(i)}function p(e){e.type||(e.type="Feature Layer")}function f(e){e.type||(e.type="Table")}function v(e){var r,t;null!==(r=e.layers)&&void 0!==r&&r.forEach(p),null===(t=e.tables)||void 0===t||t.forEach(f)}}}]);
//# sourceMappingURL=4650.323d9b82.chunk.js.map