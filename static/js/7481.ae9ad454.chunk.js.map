{"version":3,"file":"static/js/7481.ae9ad454.chunk.js","mappings":"+UAI6JA,EAAEC,EAAAA,EAAEC,UAAU,oDAAoDC,EAAE,CAACC,aAAa,SAACC,EAAEJ,GAAC,OAAGI,EAAEC,cAAcL,EAAE,GAAE,SAAeM,EAACC,EAAAC,GAAA,OAAAC,EAAAC,MAAC,KAADC,UAAA,UAAAF,IAAgX,OAAhXA,GAAAG,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAhB,SAAAC,EAAiBf,EAAEM,GAAC,IAAAU,EAAAC,EAAA,OAAAJ,EAAAA,EAAAA,KAAAK,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,GAAoBC,EAAAA,EAAAA,GAAEtB,EAAEM,GAAE,OAA8J,OAA5KU,EAACG,EAAAI,MAAoBC,iBAAsBxB,EAAE,IAAII,EAAAA,EAAE,sBAAsB,qFAAqFY,GAAGjB,EAAE0B,MAAMzB,IAAGmB,EAAAO,OAAA,UAAO,SAAAtB,GAAI,IAAMJ,EAAEI,EAAEuB,oBAAoB,OAAOX,EAAEY,YAAY5B,EAAEE,EAAE,IAAC,cAAAiB,EAAAC,KAAA,EAAAD,EAAAU,GAAAV,EAAA,SAAAA,EAAAO,OAAA,UAAiB3B,EAAE+B,KAAK,2BAA2B,oDAAoD9B,GAAG,SAAAI,GAAC,OAAE,CAAE,6BAAAe,EAAAY,OAAA,GAAAhB,EAAA,kBAAEN,EAAAC,MAAA,KAAAC,UAAA,CCAsB,IAAoBqB,EAAC,WAAC,SAAAA,EAAYV,IAAEW,EAAAA,EAAAA,GAAA,KAAAD,GAACE,KAAKC,iBAAgBC,EAAAA,EAAAA,MAAIF,KAAKG,gBAAgB,IAAIC,IAAIJ,KAAKK,aAAajB,CAAC,CAA8kF,OAA7kFkB,EAAAA,EAAAA,GAAAR,EAAA,EAAAS,IAAA,OAAAC,IAAA,WAAW,OAAOR,KAAKS,KAAK,GAAC,CAAAF,IAAA,QAAAG,MAAA,SAAMtB,GAAG,OAAOY,KAAKW,aAAavB,EAAE,GAAC,CAAAmB,IAAA,QAAAG,MAAA,WAAQ,IAAMtB,EAAEY,KAAKY,qBAAqB,OAAOZ,KAAKa,SAAS,CAACC,KAAK1B,EAAE2B,KAAK,GAAG,GAAC,CAAAR,IAAA,aAAAG,MAAA,WAAY,IAAAM,EAAA,KAAChB,KAAKG,gBAAgBc,SAAS,SAAC7B,EAAElB,GAAK8C,EAAKb,gBAAgBe,IAAIhD,EAAE,EAAE,GAAG,GAAC,CAAAqC,IAAA,cAAAG,MAAA,SAAYtB,GAAE,IAAiB+B,EAAjBC,GAAAC,EAAAA,EAAAA,GAAgBjC,GAAC,IAAhB,IAAAgC,EAAAhD,MAAA+C,EAAAC,EAAAtC,KAAAwC,MAAiB,KAAPpD,EAACiD,EAAAT,MAAMV,KAAKG,gBAAgBe,IAAIhD,EAAtY,EAAyY,CAAC,OAAAqD,GAAAH,EAAAlD,EAAAqD,EAAA,SAAAH,EAAAI,GAAA,IAAC,CAAAjB,IAAA,UAAAG,MAAA,SAAQtB,GAAE,IAAAqC,EAAA,KAAOvD,EAAE,GAAGgC,EAAE,GAAG9B,EAAE,IAAIsD,IAAItC,GAAG,OAAOY,KAAKG,gBAAgBc,SAAS,SAAC7B,EAAEtB,GAAK,IAAME,KAAte,EAA2eyD,EAAKtB,gBAAgBK,IAAI1C,IAAM6D,EAAEvD,EAAEwD,IAAI9D,IAAIE,GAAG2D,EAAEzD,EAAE2D,KAAK/D,GAAGE,IAAI2D,GAAGzB,EAAE2B,KAAK/D,GAAG2D,EAAKtB,gBAAgBe,IAAIpD,EAAE6D,EAAEG,EAAI,EAAE,IAAI,CAAChB,KAAK5C,EAAE6C,KAAKb,EAAE,GAAC,CAAAK,IAAA,cAAAG,MAAA,WAAc,IAAetB,EAAiDY,KAA1D+B,SAAsB7D,EAAoC8B,KAA/CgC,WAAmB9B,EAA4BF,KAAlCiC,MAAmB7D,EAAe4B,KAA1BkC,WAAuBpE,EAAGkC,KAAbmC,UAAkB,OAAOtE,EAAAA,EAAEuE,SAAS,CAACL,SAAS3C,EAAE4C,WAAW9D,EAAE+D,MAAM/B,EAAEgC,WAAW9D,EAAE+D,UAAUrE,GAAG,GAAC,CAAAyC,IAAA,SAAAG,MAAA,eAAA2B,GAAA3D,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAAC,EAAaO,EAAElB,GAAC,IAAAgC,EAAA,OAAAvB,EAAAA,EAAAA,KAAAK,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAA+B,OAA7Ba,KAAKS,MAAM6B,KAAKC,UAAUnD,GAAGH,EAAAE,KAAA,GAAcrB,EAAAA,EAAAA,IAAEsB,EAAE,KAAKlB,GAAE,OAAlB,OAADgC,EAACjB,EAAAI,KAAAJ,EAAAE,KAAA,EAAyBqD,QAAQC,IAAI,CAACzC,KAAK0C,mBAAmBxC,GAAGF,KAAK2C,aAAazC,GAAGF,KAAK4C,oBAAoB1C,GAAGF,KAAK6C,eAAe3C,KAAI,wBAAAjB,EAAAY,OAAA,GAAAhB,EAAA,UAAC,gBAAAR,EAAAC,GAAA,OAAA+D,EAAA7D,MAAA,KAAAC,UAAA,EAAjM,IAAiM,CAAA8B,IAAA,sBAAAG,MAAA,eAAAoC,GAAApE,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAAmE,EAA0B3D,GAAC,OAAAT,EAAAA,EAAAA,KAAAK,MAAA,SAAAgE,GAAA,cAAAA,EAAA9D,KAAA8D,EAAA7D,MAAA,UAAO,OAADC,QAAC,IAADA,GAAAA,EAAG6C,MAAK,CAAAe,EAAA7D,KAAA,eAAA6D,EAAAxD,OAAA,UAAQQ,KAAKiD,QAAQ,UAAUjD,KAAKiC,MAAM,QAAK,cAAAe,EAAA7D,KAAA,EAAoBL,EAAEM,EAAE6C,MAAMjC,KAAKK,aAAa6C,aAAY,OAA3DlD,KAAKiD,QAAOD,EAAA3D,KAAgDW,KAAKiC,MAAM7C,EAAE6C,MAAK,wBAAAe,EAAAnD,OAAA,GAAAkD,EAAA,UAAC,gBAAAI,GAAA,OAAAL,EAAAtE,MAAA,KAAAC,UAAA,EAAxK,IAAwK,CAAA8B,IAAA,eAAAG,MAAA,SAAatB,GAAGY,KAAKoD,YAAY,OAADhE,QAAC,IAADA,OAAC,EAADA,EAAG+C,YAAW,IAAIT,IAAItC,EAAE+C,WAAWnC,KAAKqD,YAAY,OAADjE,QAAC,IAADA,OAAC,EAADA,EAAGkE,YAAW,IAAI5B,IAAItC,EAAEkE,WAAWtD,KAAKmC,UAAW,OAAD/C,QAAC,IAADA,OAAC,EAADA,EAAG+C,SAAS,GAAC,CAAA5B,IAAA,qBAAAG,MAAA,eAAA6C,GAAA7E,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAA4E,EAAyBpE,GAAC,IAAAlB,EAAAgC,EAAApC,EAAA,OAAAa,EAAAA,EAAAA,KAAAK,MAAA,SAAAyE,GAAA,cAAAA,EAAAvE,KAAAuE,EAAAtE,MAAA,UAAO,OAADC,QAAC,IAADA,GAAAA,EAAG2C,SAAQ,CAAA0B,EAAAtE,KAAA,eAAAsE,EAAAjE,OAAA,UAAQQ,KAAK0D,sBAAsB,KAAK1D,KAAK+B,SAAS,UAAU/B,KAAKgC,WAAW,QAAK,OAA8D,OAAvD9D,EAAEkB,EAAE2C,SAAS7B,EAAEd,EAAE4C,YAAY,2BAA0ByB,EAAAtE,KAAA,GAASnB,EAAAA,EAAAA,IAAEkC,EAAEhC,EAAE8B,KAAKK,aAAasD,aAAa3D,KAAKK,aAAauD,KAAK5D,KAAKK,aAAawD,MAAK,OAA3F/F,EAAC2F,EAAApE,MAA2FjB,EAAAA,EAAAA,IAAE4B,KAAKC,gBAAgB/B,GAAG8B,KAAK0D,sBAAsB5F,EAAEkC,KAAK+B,SAAS7D,EAAE8B,KAAKgC,WAAW9B,EAAC,wBAAAuD,EAAA5D,OAAA,GAAA2D,EAAA,UAAC,gBAAAM,GAAA,OAAAP,EAAA/E,MAAA,KAAAC,UAAA,EAApX,IAAoX,CAAA8B,IAAA,iBAAAG,MAAA,SAAeR,GAAG,GAAGF,KAAKkC,WAAWlC,KAAK+D,cAAc,KAAM,OAAD7D,QAAC,IAADA,GAAAA,EAAGgC,WAAW,GAAGlC,KAAKK,aAAa2D,SAAShE,KAAKkC,WAAWhC,EAAEgC,WAAWlC,KAAK+D,eAAcpC,EAAAA,EAAAA,GAAE3B,KAAKK,aAAa2D,SAAS9D,EAAEgC,WAAW+B,EAAAA,OAAO,CAAC,IAAM7F,EAAE,IAAIgB,EAAAA,EAAE,+CAA+C,oEAAoEc,EAAEgC,YAAYhE,EAAAA,EAAEH,UAAU,2DAA2DwB,MAAMnB,EAAE,CAAC,GAAC,CAAAmC,IAAA,eAAAG,MAAA,SAAatB,GAAG,OAAOY,KAAKkE,kBAAkB9E,IAAIY,KAAKmE,YAAY/E,IAAIY,KAAKoE,cAAchF,IAAIY,KAAKqE,oBAAoBjF,EAAE,GAAC,CAAAmB,IAAA,sBAAAG,MAAA,SAAoBtB,GAAG,OAAOY,KAAKiC,OAAOjC,KAAKiD,QAAQ7D,EAAE,GAAC,CAAAmB,IAAA,cAAAG,MAAA,SAAYtB,GAAE,IAAAkF,EAAAC,EAAC,SAAuB,QAAhBD,EAACtE,KAAKqD,kBAAU,IAAAiB,GAAfA,EAAiBE,QAAOxE,KAAKqD,WAAWzB,IAAIxC,EAAEqF,oBAAkC,QAAhBF,EAACvE,KAAKoD,kBAAU,IAAAmB,GAAfA,EAAiBC,OAAMxE,KAAKoD,WAAWxB,IAAIxC,EAAEqF,eAAe,GAAC,CAAAlE,IAAA,oBAAAG,MAAA,SAAkBtB,GAAG,IAAIY,KAAK+B,SAAS,OAAM,EAAG,IAAM7D,EAAEkB,EAAEsF,uBAAuB,QAAQxG,GAAG8B,KAAK0D,sBAAsBxF,EAAE,GAAC,CAAAqC,IAAA,gBAAAG,MAAA,SAActB,GAAG,OAAO,MAAMY,KAAK+D,eAAe/D,KAAK+D,cAAc3E,EAAE,GAAC,CAAAmB,IAAA,qBAAAG,MAAA,WAAoB,IAAAiE,EAAA,KAAOvF,EAAE,GAAG,OAAOY,KAAKG,gBAAgBc,SAAS,SAAC/C,EAAEgC,GAA3nF,EAAgoFhC,IAAMyG,EAAKxE,gBAAgBe,IAAIhB,EAA/pF,GAAoqFd,EAAEyC,KAAK3B,GAAG,IAAId,CAAC,KAACU,CAAA,CAAvqF,E","sources":["../node_modules/@arcgis/core/views/2d/layers/features/support/whereUtils.js","../node_modules/@arcgis/core/views/2d/layers/features/support/FeatureFilter.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import r from\"../../../../../core/Logger.js\";import{parseWhereClause as t}from\"../../../../../core/sql.js\";const a=r.getLogger(\"esri.views.2d.layers.features.support.whereUtils\"),o={getAttribute:(e,r)=>e.readAttribute(r)};async function s(r,s){try{const n=await t(r,s);if(!n.isStandardized){const r=new e(\"mapview - bad input\",\"Unable to apply filter's definition expression, as expression is not standardized.\",n);a.error(r)}return e=>{const r=e.readArcadeFeature();return n.testFeature(r,o)}}catch(n){return a.warn(\"mapview-bad-where-clause\",\"Encountered an error when evaluating where clause\",r),e=>!0}}export{s as createWhereClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Error.js\";import e from\"../../../../../core/Logger.js\";import{create as i}from\"../../../../../geometry/support/aaBoundingRect.js\";import{getBoundsXY as s}from\"../../../../../geometry/support/boundsUtils.js\";import{normalizeQueryLike as r}from\"../../../../../layers/graphics/data/queryUtils.js\";import{getSpatialQueryOperator as o}from\"../../../../../layers/graphics/data/spatialQuerySupport.js\";import{getTimeOperator as h}from\"../../../../../layers/graphics/data/timeSupport.js\";import a from\"../../../../../rest/support/Query.js\";import{featureAdapter as l}from\"../FeatureStore2D.js\";import{createWhereClause as n}from\"./whereUtils.js\";const d=1,m=2;class p{constructor(t){this._geometryBounds=i(),this._idToVisibility=new Map,this._serviceInfo=t}get hash(){return this._hash}check(t){return this._applyFilter(t)}clear(){const t=this._resetAllHiddenIds();return this.update(),{show:t,hide:[]}}invalidate(){this._idToVisibility.forEach(((t,e)=>{this._idToVisibility.set(e,0)}))}setKnownIds(t){for(const e of t)this._idToVisibility.set(e,d)}setTrue(t){const e=[],i=[],s=new Set(t);return this._idToVisibility.forEach(((t,r)=>{const o=!!(this._idToVisibility.get(r)&d),h=s.has(r);!o&&h?e.push(r):o&&!h&&i.push(r),this._idToVisibility.set(r,h?d|m:0)})),{show:e,hide:i}}createQuery(){const{geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r}=this;return a.fromJSON({geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r})}async update(t,e){this._hash=JSON.stringify(t);const i=await r(t,null,e);await Promise.all([this._setGeometryFilter(i),this._setIdFilter(i),this._setAttributeFilter(i),this._setTimeFilter(i)])}async _setAttributeFilter(t){if(!t?.where)return this._clause=null,void(this.where=null);this._clause=await n(t.where,this._serviceInfo.fieldsIndex),this.where=t.where}_setIdFilter(t){this._idsToShow=t?.objectIds&&new Set(t.objectIds),this._idsToHide=t?.hiddenIds&&new Set(t.hiddenIds),this.objectIds=t?.objectIds}async _setGeometryFilter(t){if(!t?.geometry)return this._spatialQueryOperator=null,this.geometry=null,void(this.spatialRel=null);const e=t.geometry,i=t.spatialRel||\"esriSpatialRelIntersects\",r=await o(i,e,this._serviceInfo.geometryType,this._serviceInfo.hasZ,this._serviceInfo.hasM);s(this._geometryBounds,e),this._spatialQueryOperator=r,this.geometry=e,this.spatialRel=i}_setTimeFilter(i){if(this.timeExtent=this._timeOperator=null,i?.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=i.timeExtent,this._timeOperator=h(this._serviceInfo.timeInfo,i.timeExtent,l);else{const s=new t(\"feature-layer-view:time-filter-not-available\",\"Unable to apply time filter, as layer doesn't have time metadata.\",i.timeExtent);e.getLogger(\"esri.views.2d.layers.features.controllers.FeatureFilter\").error(s)}}_applyFilter(t){return this._filterByGeometry(t)&&this._filterById(t)&&this._filterByTime(t)&&this._filterByExpression(t)}_filterByExpression(t){return!this.where||this._clause(t)}_filterById(t){return(!this._idsToHide?.size||!this._idsToHide.has(t.getObjectId()))&&(!this._idsToShow?.size||this._idsToShow.has(t.getObjectId()))}_filterByGeometry(t){if(!this.geometry)return!0;const e=t.readHydratedGeometry();return!!e&&this._spatialQueryOperator(e)}_filterByTime(t){return null==this._timeOperator||this._timeOperator(t)}_resetAllHiddenIds(){const t=[];return this._idToVisibility.forEach(((e,i)=>{e&d||(this._idToVisibility.set(i,d),t.push(i))})),t}}export{p as default};\n"],"names":["a","r","getLogger","o","getAttribute","e","readAttribute","s","_x","_x2","_s","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","n","_r","wrap","_context","prev","next","t","sent","isStandardized","error","abrupt","readArcadeFeature","testFeature","t0","warn","stop","p","_classCallCheck","this","_geometryBounds","i","_idToVisibility","Map","_serviceInfo","_createClass","key","get","_hash","value","_applyFilter","_resetAllHiddenIds","update","show","hide","_this","forEach","set","_step","_iterator","_createForOfIteratorHelper","done","err","f","_this2","Set","h","has","push","d","geometry","spatialRel","where","timeExtent","objectIds","fromJSON","_update","JSON","stringify","Promise","all","_setGeometryFilter","_setIdFilter","_setAttributeFilter","_setTimeFilter","_setAttributeFilter2","_callee2","_context2","_clause","fieldsIndex","_x3","_idsToShow","_idsToHide","hiddenIds","_setGeometryFilter2","_callee3","_context3","_spatialQueryOperator","geometryType","hasZ","hasM","_x4","_timeOperator","timeInfo","l","_filterByGeometry","_filterById","_filterByTime","_filterByExpression","_this$_idsToHide","_this$_idsToShow","size","getObjectId","readHydratedGeometry","_this3"],"sourceRoot":""}