{"version":3,"file":"static/js/2977.821c5148.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/TileLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../request.js\";import t from\"../core/Error.js\";import{loadAll as s}from\"../core/loadAll.js\";import{MultiOriginJSONMixin as i}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as o}from\"../core/promiseUtils.js\";import{urlToObject as a,objectToQuery as l,makeAbsolute as n}from\"../core/urlUtils.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import{cast as c}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import{reader as u}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as m}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as h}from\"../core/accessorSupport/decorators/writer.js\";import d from\"../geometry/SpatialReference.js\";import y from\"./Layer.js\";import{APIKeyMixin as f}from\"./mixins/APIKeyMixin.js\";import{ArcGISCachedService as v}from\"./mixins/ArcGISCachedService.js\";import{ArcGISMapService as g}from\"./mixins/ArcGISMapService.js\";import{ArcGISService as S}from\"./mixins/ArcGISService.js\";import{BlendLayer as _}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as j}from\"./mixins/CustomParametersMixin.js\";import{OperationalLayer as T}from\"./mixins/OperationalLayer.js\";import{PortalLayer as b}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as w}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as O}from\"./mixins/ScaleRangeLayer.js\";import{SublayersOwner as L}from\"./mixins/SublayersOwner.js\";import{parse as R,isHostedAgolService as U,isArcGISUrl as P}from\"./support/arcgisLayerUrl.js\";import{url as x}from\"./support/commonProperties.js\";import{createTileBitmap as A}from\"./support/imageBitmapUtils.js\";import M from\"./support/Sublayer.js\";var W;const I=[\"Canvas/World_Dark_Gray_Base\",\"Canvas/World_Dark_Gray_Reference\",\"Canvas/World_Light_Gray_Base\",\"Canvas/World_Light_Gray_Reference\",\"Elevation/World_Hillshade\",\"Elevation/World_Hillshade_Dark\",\"Ocean/World_Ocean_Base\",\"Ocean/World_Ocean_Reference\",\"Ocean_Basemap\",\"Reference/World_Boundaries_and_Places\",\"Reference/World_Boundaries_and_Places_Alternate\",\"Reference/World_Transportation\",\"World_Imagery\",\"World_Street_Map\",\"World_Topo_Map\"];let B=W=class extends(_(O(L(v(g(T(b(S(i(w(f(j(y))))))))))))){constructor(...e){super(...e),this.listMode=\"show\",this.isReference=null,this.operationalLayerType=\"ArcGISTiledMapServiceLayer\",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type=\"tile\",this.url=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const r=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Map Service\"]},e).catch(o).then((()=>this._fetchService(r)))),Promise.resolve(this)}get attributionDataUrl(){const e=this.parsedUrl?.path.toLowerCase();return e?this._getDefaultAttribution(this._getMapName(e)):null}readSpatialReference(e,r){return(e=e||r.tileInfo?.spatialReference)&&d.fromJSON(e)}writeSublayers(e,r,t,s){if(!this.loaded||!e)return;const i=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray(),o=[],a={writeSublayerStructure:!1,...s};i.forEach((e=>{const r=e.write({},a);o.push(r)}));o.some((e=>Object.keys(e).length>1))&&(r.layers=o)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl?.path)}castTileServers(e){return Array.isArray(e)?e.map((e=>a(e).path)):null}fetchTile(e,t,s,i={}){const{signal:o}=i,a=this.getTileUrl(e,t,s),l={responseType:\"image\",signal:o,query:{...this.refreshParameters}};return r(a,l).then((e=>e.data))}async fetchImageBitmapTile(e,t,s,i={}){const{signal:o}=i;if(this.fetchTile!==W.prototype.fetchTile){const r=await this.fetchTile(e,t,s,i);return A(r,e,t,s,o)}const a=this.getTileUrl(e,t,s),l={responseType:\"blob\",signal:o,query:{...this.refreshParameters}},{data:n}=await r(a,l);return A(n,e,t,s,o)}getTileUrl(e,r,t){const s=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,i=l({...this.parsedUrl?.query,blankTile:!s&&null,...this.customParameters,token:this.apiKey}),o=this.tileServers;return`${o&&o.length?o[r%o.length]:this.parsedUrl?.path}/tile/${e}/${r}/${t}${i?\"?\"+i:\"\"}`}loadAll(){return s(this,(e=>{e(this.allSublayers)}))}_fetchService(e){return new Promise(((s,i)=>{if(this.sourceJSON){if(null!=this.sourceJSON.bandCount&&null!=this.sourceJSON.pixelSizeX)throw new t(\"tile-layer:unsupported-url\",\"use ImageryTileLayer to open a tiled image service\");return void s({data:this.sourceJSON})}if(!this.parsedUrl)throw new t(\"tile-layer:undefined-url\",\"layer's url is not defined\");const o=R(this.parsedUrl.path);if(null!=o&&\"ImageServer\"===o.serverType)throw new t(\"tile-layer:unsupported-url\",\"use ImageryTileLayer to open a tiled image service\");r(this.parsedUrl.path,{query:{f:\"json\",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e}).then(s,i)})).then((r=>{let t=this.url;if(r.ssl&&(t=this.url=t.replace(/^http:/i,\"https:\")),this.sourceJSON=r.data,this.read(r.data,{origin:\"service\",url:this.parsedUrl}),10.1===this.version&&!U(t))return this._fetchServerVersion(t,e).then((e=>{this.read({currentVersion:e})})).catch((()=>{}))}))}_fetchServerVersion(e,s){if(!P(e))return Promise.reject();const i=e.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";return r(i,{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:s}).then((e=>{if(e.data&&e.data.currentVersion)return e.data.currentVersion;throw new t(\"tile-layer:version-not-available\")}))}_getMapName(e){const r=e.match(/^(?:https?:)?\\/\\/(server\\.arcgisonline\\.com|services\\.arcgisonline\\.com|ibasemaps-api\\.arcgis\\.com)\\/arcgis\\/rest\\/services\\/([^\\/]+(\\/[^\\/]+)*)\\/mapserver/i);return r?r[2]:void 0}_getDefaultAttribution(e){if(null==e)return null;let r;e=e.toLowerCase();for(let t=0,s=I.length;t<s;t++)if(r=I[t],r.toLowerCase().includes(e))return n(\"//static.arcgis.com/attribution/\"+r);return null}_getDefaultTileServers(e){if(null==e)return[];const r=-1!==e.search(/^(?:https?:)?\\/\\/server\\.arcgisonline\\.com/i),t=-1!==e.search(/^(?:https?:)?\\/\\/services\\.arcgisonline\\.com/i);return r||t?[e,e.replace(r?/server\\.arcgisonline/i:/services\\.arcgisonline/i,r?\"services.arcgisonline\":\"server.arcgisonline\")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile[C]}};e([p({readOnly:!0})],B.prototype,\"attributionDataUrl\",null),e([p({type:[\"show\",\"hide\",\"hide-children\"]})],B.prototype,\"listMode\",void 0),e([p({json:{read:!0,write:!0}})],B.prototype,\"blendMode\",void 0),e([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],B.prototype,\"isReference\",void 0),e([p({readOnly:!0,type:[\"ArcGISTiledMapServiceLayer\"]})],B.prototype,\"operationalLayerType\",void 0),e([p({type:Boolean})],B.prototype,\"resampling\",void 0),e([p()],B.prototype,\"sourceJSON\",void 0),e([p({type:d})],B.prototype,\"spatialReference\",void 0),e([u(\"spatialReference\",[\"spatialReference\",\"tileInfo\"])],B.prototype,\"readSpatialReference\",null),e([p({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],B.prototype,\"path\",void 0),e([p({readOnly:!0})],B.prototype,\"sublayers\",void 0),e([h(\"sublayers\",{layers:{type:[M]}})],B.prototype,\"writeSublayers\",null),e([p({json:{read:!1,write:!1}})],B.prototype,\"popupEnabled\",void 0),e([p()],B.prototype,\"tileServers\",null),e([c(\"tileServers\")],B.prototype,\"castTileServers\",null),e([p({readOnly:!0,json:{read:!1}})],B.prototype,\"type\",void 0),e([p(x)],B.prototype,\"url\",void 0),B=W=e([m(\"esri.layers.TileLayer\")],B);const C=Symbol(\"default-fetch-tile\");B.prototype.fetchTile[C]=!0;const N=B;export{N as default};\n"],"names":["W","I","B","_ref","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","e","Array","_key","call","apply","concat","listMode","isReference","operationalLayerType","resampling","sourceJSON","spatialReference","path","sublayers","type","url","_createClass","key","value","r","_objectSpread","_this2","signal","this","addResolvingPromise","loadFromPortal","supportedTypes","catch","o","then","_fetchService","Promise","resolve","get","_this$parsedUrl","parsedUrl","toLowerCase","_getDefaultAttribution","_getMapName","_r$tileInfo","tileInfo","d","fromJSON","t","s","loaded","i","slice","reverse","flatten","_ref2","toArray","a","writeSublayerStructure","forEach","write","push","some","Object","keys","layers","_this$parsedUrl2","_getDefaultTileServers","isArray","map","undefined","getTileUrl","l","responseType","query","refreshParameters","data","_fetchImageBitmapTile","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_r","_yield$r","n","_args","wrap","_context","prev","next","fetchTile","prototype","sent","abrupt","A","stop","_x","_x2","_x3","_this$parsedUrl3","_this$parsedUrl4","capabilities","operations","supportsTileMap","supportsBlankTile","blankTile","customParameters","token","apiKey","tileServers","_this3","allSublayers","_this4","bandCount","pixelSizeX","R","serverType","f","ssl","replace","read","origin","version","U","_fetchServerVersion","currentVersion","P","reject","match","includes","search","C","_","O","L","v","g","T","b","S","w","j","y","p","readOnly","json","Boolean","enabled","overridePolicy","u","String","origins","h","M","c","x","m","Symbol","N"],"sourceRoot":""}