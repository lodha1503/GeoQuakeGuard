"use strict";(self.webpackChunkamit_kumar_rathi=self.webpackChunkamit_kumar_rathi||[]).push([[8991],{75746:function(e,t,i){i.d(t,{E:function(){return n}});var r=new(i(8961).Z);function n(e){return null==e?["",!1]:r.hasBidiChar(e)?(t="rtl"===r.checkContextual(e)?"IDNNN":"ICNNN",[r.bidiTransform(e,t,"VLYSN"),!0]):[e,!1];var t}},46228:function(e,t,i){i.d(t,{I:function(){return n},v:function(){return a}});var r=i(16889);function n(e,t){for(var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=(0,r.uZ)(e,0,l),o=0;o<4;o++)t[n+o]=Math.floor(256*((i=a*s[o])-Math.floor(i)))}function a(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0,r=0;r<4;r++)i+=e[t+r]*o[r];return i}var s=[1,256,65536,16777216],o=[1/256,1/65536,1/16777216,1/4294967296],l=a(new Uint8ClampedArray([255,255,255,255]))},82272:function(e,t,i){i.d(t,{BN:function(){return d},Yc:function(){return y},em:function(){return l},mx:function(){return v}});var r=i(74165),n=i(15861),a=i(43144),s=i(15671),o=i(42265),l="arial-unicode-ms",h="woff2",u=new Map,c=new Set,f=(0,a.Z)((function e(t,i){(0,s.Z)(this,e),this.fontFace=t,this.promise=i}));function v(e){return m.apply(this,arguments)}function m(){return m=(0,n.Z)((0,r.Z)().mark((function e(t){var i,n,a,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=y(t),!(n=u.get(i))){e.next=3;break}return e.abrupt("return",n.promise);case 3:if(a=new FontFace(t.family,"url('".concat(o.Z.fontsUrl,"/woff2/").concat(i,".").concat(h,"') format('").concat(h,"')"),{style:t.style,weight:t.weight}),!(s=document.fonts).has(a)||"loading"!==a.status){e.next=6;break}return e.abrupt("return",a.loaded);case 6:return l=a.load().then((function(){return s.add(a),a})),e.abrupt("return",(u.set(i,new f(a,l)),c.add(a),l));case 8:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function d(e){if(!e)return l;var t=e.toLowerCase().split(" ").join("-");switch(t){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return t}}function y(e){var t=function(e){if(!e.weight)return"";switch(e.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}(e)+function(e){if(!e.style)return"";switch(e.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}(e);return d(e.family)+(t.length>0?t:"-regular")}},35747:function(e,t,i){i.d(t,{L:function(){return c},z:function(){return u}});var r,n=i(37762),a=i(15671),s=i(43144),o=i(23895),l=i(40316),h=512,u=function(){function e(t){(0,a.Z)(this,e),this._geometry=t}return(0,s.Z)(e,[{key:"next",value:function(){var e=this._geometry;return this._geometry=null,e}}]),e}();function c(e,t){r||(r=new l.bN(0,0,0,1));var i,a,s="esriGeometryPolygon"===e.geometryType,u=s?l.Vl.Polygon:l.Vl.LineString,c=s?3:2;for(r.reset(u),r.setPixelMargin(t+1),r.setExtent(h);e.nextPath();)if(!(e.pathSize<c)){for(e.nextPoint(),i=e.x,a=-e.y,r.moveTo(i,a);e.nextPoint();)i=e.x,a=-e.y,r.lineTo(i,a);s&&r.close()}var f=r.result(!1);if(f){var v,m=o.z.createEmptyOptimizedCIM(e.geometryType),d=(0,n.Z)(f);try{for(d.s();!(v=d.n()).done;){var y=v.value;m.startPath();var p,_=(0,n.Z)(y);try{for(_.s();!(p=_.n()).done;){var g=p.value;m.pushXY(g.x,-g.y)}}catch(P){_.e(P)}finally{_.f()}}}catch(P){d.e(P)}finally{d.f()}return m.reset(),m}return null}},63695:function(e,t,i){i.d(t,{h:function(){return Ce},W:function(){return we}});var r=i(15671),n=i(43144),a=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new s(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();a.instance=null;var s=function(){function e(t,i,n){(0,r.Z)(this,e),this._inputGeometries=t,this._angleTolerance=void 0!==i.angleTolerance?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}return(0,n.Z)(e,[{key:"next",value:function(){for(var e=this._inputGeometries.next();e;){if("esriGeometryPolygon"===e.geometryType)this._isClosed=!0;else if("esriGeometryPolyline"===e.geometryType)this._isClosed=!1;else{if("esriGeometryEnvelope"!==e.geometryType){e=this._inputGeometries.next();continue}if(this._maxCosAngle)return e;this._isClosed=!0}for(;e.nextPath();)this._processPath(e);return e.reset(),e}return null}},{key:"_processPath",value:function(e){if(e.nextPoint()){var t=e.x,i=e.y,r=t,n=i,a=e.pathSize,s=0,o=0,l=0,h=0,u=0,c=0;this._isClosed&&++a;for(var f=1;e.nextPoint()||f<a;++f){var v=void 0,m=void 0;this._isClosed&&f===a-1?(v=t,m=i):(v=e.x,m=e.y);var d=v-r,y=m-n,p=Math.sqrt(d*d+y*y);f>1&&p>0&&l>0&&(s*d+o*y)/p/l<=this._maxCosAngle&&e.setControlPointAt(f-1),1===f&&(h=d,u=y,c=p),p>0&&(r=v,n=m,s=d,o=y,l=p)}this._isClosed&&l>0&&c>0&&(s*h+o*u)/c/l<=this._maxCosAngle&&e.setControlPointAt(0)}}}]),e}(),o=i(60136),l=i(29388),h=i(23895),u=i(41116),c=i(84284);function f(e,t){e[4]=t}var v=function(){function e(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,r.Z)(this,e),this.isClosed=!1,this.geometryCursor=null,this.geometryCursor=!i&&"esriGeometryPolygon"===t.geometryType||!n&&"esriGeometryPolyline"===t.geometryType?null:t,this.geomUnitsPerPoint=a,this.iteratePath=!1,this.internalPlacement=new c.u}return(0,n.Z)(e,[{key:"next",value:function(){if(!this.geometryCursor)return null;for(;this.iteratePath||this.geometryCursor.nextPath();){this.geometryCursor.seekPathStart();var e=this.processPath(this.geometryCursor);if(e)return e}return this.geometryCursor=null,null}}]),e}(),m=function(){function e(t,i,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,r.Z)(this,e),this.isClosed=!1,this.inputGeometries=t,this.acceptPolygon=i,this.acceptPolyline=n,this.geomUnitsPerPoint=a,this.iteratePath=!1,this.multiPathCursor=null}return(0,n.Z)(e,[{key:"next",value:function(){for(;;){if(!this.multiPathCursor){for(var e=this.inputGeometries.next();e&&(this.isClosed=this.acceptPolygon&&"esriGeometryPolygon"===e.geometryType||"esriGeometryEnvelope"===e.geometryType,this.multiPathCursor=e,!this.multiPathCursor);)e=this.inputGeometries.next();if(!this.multiPathCursor)return null}for(;this.iteratePath||this.multiPathCursor.nextPath();){this.multiPathCursor.seekPathStart();var t=this.processPath(this.multiPathCursor);if(t)return t}this.multiPathCursor=null}}}]),e}(),d=i(29439),y=i(48202),p=.03,_=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"isEmpty",value:function(e){if(!e.nextPoint())return!0;var t,i,r,n;for(t=e.x,i=e.y;e.nextPoint();t=i,i=n)if(r=e.x,n=e.y,r!==t||n!==i)return e.seekPathStart(),!1;return e.seekPathStart(),!0}},{key:"normalize",value:function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);0!==t&&(e[0]/=t,e[1]/=t)}},{key:"getLength",value:function(e,t,i,r){var n=i-e,a=r-t;return Math.sqrt(n*n+a*a)}},{key:"getSegLength",value:function(e){var t=(0,d.Z)(e,2),i=(0,d.Z)(t[0],2),r=i[0],n=i[1],a=(0,d.Z)(t[1],2),s=a[0],o=a[1];return this.getLength(r,n,s,o)}},{key:"getCoord2D",value:function(e,t,i,r,n){return[e+(i-e)*n,t+(r-t)*n]}},{key:"getSegCoord2D",value:function(e,t){var i=(0,d.Z)(e,2),r=(0,d.Z)(i[0],2),n=r[0],a=r[1],s=(0,d.Z)(i[1],2),o=s[0],l=s[1];return this.getCoord2D(n,a,o,l,t)}},{key:"getAngle",value:function(e,t,i,r,n){var a=i-e,s=r-t;return Math.atan2(s,a)}},{key:"getAngleCS",value:function(e,t,i,r,n){var a=i-e,s=r-t,o=Math.sqrt(a*a+s*s);return o>0?[a/o,s/o]:[1,0]}},{key:"getSegAngleCS",value:function(e,t){var i=(0,d.Z)(e,2),r=(0,d.Z)(i[0],2),n=r[0],a=r[1],s=(0,d.Z)(i[1],2),o=s[0],l=s[1];return this.getAngleCS(n,a,o,l,t)}},{key:"cut",value:function(e,t,i,r,n,a){return[n<=0?[e,t]:this.getCoord2D(e,t,i,r,n),a>=1?[i,r]:this.getCoord2D(e,t,i,r,a)]}},{key:"getSubCurve",value:function(e,t,i){var r=h.z.createEmptyOptimizedCIM("esriGeometryPolyline");return this.appendSubCurve(r,e,t,i)?r:null}},{key:"appendSubCurve",value:function(e,t,i,r){e.startPath(),t.seekPathStart();var n=0,a=!0;if(!t.nextPoint())return!1;for(var s=t.x,o=t.y;t.nextPoint();){var l=this.getLength(s,o,t.x,t.y);if(0!==l){if(a){if(n+l>i){var h=(i-n)/l,u=1,c=!1;n+l>=r&&(u=(r-n)/l,c=!0);var f=this.cut(s,o,t.x,t.y,h,u);if(f&&e.pushPoints(f),c)break;a=!1}}else{if(n+l>r){var v=this.cut(s,o,t.x,t.y,0,(r-n)/l);v&&e.pushPoint(v[1]);break}e.pushXY(t.x,t.y)}n+=l,s=t.x,o=t.y}else s=t.x,o=t.y}return!0}},{key:"getCIMPointAlong",value:function(e,t){if(!e.nextPoint())return null;var i,r,n,a,s=0;for(i=e.x,r=e.y;e.nextPoint();i=n,r=a){n=e.x,a=e.y;var o=this.getLength(i,r,n,a);if(0!==o){if(s+o>t){var l=(t-s)/o;return this.getCoord2D(i,r,n,a,l)}s+=o}}return null}},{key:"offset",value:function(e,t,i,r,n){if(!e||e.length<2)return null;for(var a=0,s=e[a++],o=a;a<e.length;){var l=e[a];l[0]===s[0]&&l[1]===s[1]||(a!==o&&(e[o]=e[a]),s=e[o++]),a++}var h=e[0][0]===e[o-1][0]&&e[0][1]===e[o-1][1];if(h&&--o,o<(h?3:2))return null;var u=[];s=h?e[o-1]:null;for(var c=e[0],f=0;f<o;f++){var v=f===o-1?h?e[0]:null:e[f+1];if(s)if(v){var m=[v[0]-c[0],v[1]-c[1]];this.normalize(m);var d=[c[0]-s[0],c[1]-s[1]];this.normalize(d);var p=d[0]*m[1]-d[1]*m[0],_=d[0]*m[0]+d[1]*m[1];if(0===p&&1===_){c=v;continue}if(p>=0==t<=0){if(_<1){var g=[m[0]-d[0],m[1]-d[1]];this.normalize(g);var P=Math.sqrt((1+_)/2);if(P>1/r){var k=-Math.abs(t)/P;u.push([c[0]-g[0]*k,c[1]-g[1]*k])}}}else switch(i){case y.id.Mitered:var M=Math.sqrt((1+_)/2);if(M>0&&1/M<r){var x=[m[0]-d[0],m[1]-d[1]];this.normalize(x);var b=Math.abs(t)/M;u.push([c[0]-x[0]*b,c[1]-x[1]*b]);break}case y.id.Bevelled:u.push([c[0]+d[1]*t,c[1]-d[0]*t]),u.push([c[0]+m[1]*t,c[1]-m[0]*t]);break;case y.id.Rounded:if(_<1){u.push([c[0]+d[1]*t,c[1]-d[0]*t]);var S=Math.floor(2.5*(1-_));if(S>0)for(var C=1/S,w=C,I=1;I<S;I++,w+=C){var L=[d[1]*(1-w)+m[1]*w,-d[0]*(1-w)-m[0]*w];this.normalize(L),u.push([c[0]+L[0]*t,c[1]+L[1]*t])}u.push([c[0]+m[1]*t,c[1]-m[0]*t])}break;case y.id.Square:default:if(p<0)u.push([c[0]+(d[1]+d[0])*t,c[1]+(d[1]-d[0])*t]),u.push([c[0]+(m[1]-m[0])*t,c[1]-(m[0]+m[1])*t]);else{var z=Math.sqrt((1+Math.abs(_))/2),O=[m[0]-d[0],m[1]-d[1]];this.normalize(O);var A=t/z;u.push([c[0]-O[0]*A,c[1]-O[1]*A])}}}else{var Z=[c[0]-s[0],c[1]-s[1]];this.normalize(Z),u.push([c[0]+Z[1]*t,c[1]-Z[0]*t])}else{var N=[v[0]-c[0],v[1]-c[1]];this.normalize(N),u.push([c[0]+N[1]*t,c[1]-N[0]*t])}s=c,c=v}return u.length<(h?3:2)?null:(h&&u.push([u[0][0],u[0][1]]),u)}}]),e}(),g=1.7320508075688772,P=y.TF.OpenEnded,k=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new M(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();k.instance=null;var M=function(e){(0,o.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,a){var s;return(0,r.Z)(this,i),(s=t.call(this,e,!1,!0))._curveHelper=new _,s._width=(void 0!==n.width?n.width:5)*a,s._arrowType=void 0!==n.geometricEffectArrowType?n.geometricEffectArrowType:void 0!==n.arrowType?n.arrowType:P,s._offsetFlattenError=p*a,s}return(0,n.Z)(i,[{key:"processPath",value:function(e){var t=h.z.createEmptyOptimizedCIM(e.geometryType);switch(this._arrowType){case y.TF.OpenEnded:default:this._constructSimpleArrow(t,e,!0);break;case y.TF.Block:this._constructSimpleArrow(t,e,!1);break;case y.TF.Crossed:this._constructCrossedArrow(t,e)}return t}},{key:"_constructSimpleArrow",value:function(e,t,i){var r=t.pathLength(),n=this._width;r<2*n&&(n=r/2);var a=this._curveHelper.getSubCurve(t,0,r-n);if(a&&a.nextPath()){a.seekPathStart();var s=n/2;if(!this._curveHelper.isEmpty(a)){var o=(0,u.l)(a),l=this._constructOffset(o,-s);if(l){var h=this._constructOffset(o,s);if(h){var c=this._constructArrowBasePoint(l,-s/2);if(c){var f=this._constructArrowBasePoint(h,s/2);if(f){t.seekInPath(t.pathSize-1);var v=[t.x,t.y];e.pushPath(h),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(f),e.nextPoint(),e.setControlPoint(),e.pushPoint(v),e.nextPoint(),e.setControlPoint(),e.pushPoint(c),e.nextPoint(),e.setControlPoint(),e.pushPoints(l.reverse()),e.setControlPoint(),i||(e.setControlPointAt(0),e.setControlPointAt(e.pathSize-1),e.pushPoint(h[0])),e.reset()}}}}}}}},{key:"_constructCrossedArrow",value:function(e,t){var i=t.pathLength(),r=this._width;i<r*(1+g+1)&&(r=i/(1+g+1)),t.seekPathStart();var n=this._curveHelper.getSubCurve(t,0,i-r*(1+g));if(n){n.nextPath();var a=r/2;if(!this._curveHelper.isEmpty(n)){var s=(0,u.l)(n),o=this._constructOffset(s,a);if(o){var l=this._constructOffset(s,-a);if(l){var h=this._curveHelper.getSubCurve(t,0,i-r);if(h&&(h.nextPath(),!this._curveHelper.isEmpty(h))){var c=(0,u.l)(h),f=this._constructOffset(c,a);if(f){var v=this._constructOffset(c,-a);if(v){var m=f[f.length-1],d=this._constructArrowBasePoint(f,a/2);if(d){var y=v[v.length-1],p=this._constructArrowBasePoint(v,-a/2);if(p){t.seekInPath(t.pathSize-1);var _=[t.x,t.y];e.pushPath(o),e.nextPath(),e.nextPoint(),e.setControlPoint(),e.pushPoint(y),e.nextPoint(),e.setControlPoint(),e.pushPoint(p),e.nextPoint(),e.setControlPoint(),e.pushPoint(_),e.nextPoint(),e.setControlPoint(),e.pushPoint(d),e.nextPoint(),e.setControlPoint(),e.pushPoint(m),e.nextPoint(),e.setControlPoint(),e.pushPoints(l.reverse()),e.nextPoint(),e.setControlPoint(),e.reset()}}}}}}}}}}},{key:"_constructOffset",value:function(e,t){return this._curveHelper.offset(e,t,y.id.Rounded,4,this._offsetFlattenError)}},{key:"_constructArrowBasePoint",value:function(e,t){if(!e||e.length<2)return null;var i=e[e.length-2],r=e[e.length-1],n=[r[0]-i[0],r[1]-i[1]];return this._curveHelper.normalize(n),[r[0]+n[1]*t,r[1]-n[0]*t]}}]),i}(m),x=(i(59486),i(35747)),b=i(78952),S=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n,a){return new C(e,t,i,r,n,a)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();S.instance=null;var C=function(){function e(t,i,n,a,s,o){(0,r.Z)(this,e),this._inputGeometries=t,this._tileKey=a,this._geometryEngine=s,this._curveHelper=new _,this._size=(void 0!==i.size?i.size:1)*n,this._maxInflateSize=o*n,this._offsetFlattenError=p*n}return(0,n.Z)(e,[{key:"next",value:function(){for(var e;e=this._inputGeometries.next();){if(0===this._size)return e;if("esriGeometryEnvelope"===e.geometryType)if(this._size>0){var t=h.z.createEmptyOptimizedCIM(e.geometryType),i=(0,u.M)(e)[0],r=this._curveHelper.offset(i,this._size,y.id.Rounded,4,this._offsetFlattenError);if(r)return t.pushPath(r),t}else if(this._size<0){var n=e.asJSON();if(Math.min(n.xmax-n.xmin,n.ymax-n.ymin)+2*this._size>0)return h.z.fromJSONCIM({xmin:n.xmin-this._size,xmax:n.xmax+this._size,ymin:n.ymin-this._size,ymax:n.ymax+this._size})}var a=this._geometryEngine;if(null==a)return null;var s=this._tileKey?(0,x.L)(e,this._maxInflateSize):e;if(s){var o=a.buffer(b.Z.WebMercator,s.asJSON(),this._size,1);return o?h.z.fromJSONCIM(o):null}}return null}}]),e}(),w=i(37762),I=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new L(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();I.instance=null;var L=function(){function e(t,i,n){var a;(0,r.Z)(this,e),this._defaultPointSize=20,this._inputGeometries=t,this._geomUnitsPerPoint=n,this._rule=null!==(a=i.rule)&&void 0!==a?a:y.Em.FullGeometry,this._defaultSize=this._defaultPointSize*n}return(0,n.Z)(e,[{key:"next",value:function(){for(var e;e=this._inputGeometries.next();){var t=this._processGeom((0,u.M)(e));if(t&&t.length)return h.z.fromJSONCIM({paths:t})}return null}},{key:"_clone",value:function(e){return[e[0],e[1]]}},{key:"_mid",value:function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}},{key:"_mix",value:function(e,t,i,r){return[e[0]*t+i[0]*r,e[1]*t+i[1]*r]}},{key:"_add",value:function(e,t){return[e[0]+t[0],e[1]+t[1]]}},{key:"_add2",value:function(e,t,i){return[e[0]+t,e[1]+i]}},{key:"_sub",value:function(e,t){return[e[0]-t[0],e[1]-t[1]]}},{key:"_dist",value:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}},{key:"_norm",value:function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}},{key:"_normalize",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)/this._norm(e);e[0]*=t,e[1]*=t}},{key:"_leftPerpendicular",value:function(e){var t=-e[1],i=e[0];e[0]=t,e[1]=i}},{key:"_leftPerp",value:function(e){return[-e[1],e[0]]}},{key:"_rightPerpendicular",value:function(e){var t=e[1],i=-e[0];e[0]=t,e[1]=i}},{key:"_rightPerp",value:function(e){return[e[1],-e[0]]}},{key:"_dotProduct",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"_crossProduct",value:function(e,t){return e[0]*t[1]-e[1]*t[0]}},{key:"_rotateDirect",value:function(e,t,i){var r=e[0]*t-e[1]*i,n=e[0]*i+e[1]*t;e[0]=r,e[1]=n}},{key:"_makeCtrlPt",value:function(e){var t=[e[0],e[1]];return f(t,1),t}},{key:"_addAngledTicks",value:function(e,t,i,r){var n=this._sub(i,t);this._normalize(n);var a,s=this._crossProduct(n,this._sub(r,t));a=s>0?this._rightPerp(n):this._leftPerp(n);var o=Math.abs(s)/2,l=[];l.push([t[0]+(a[0]-n[0])*o,t[1]+(a[1]-n[1])*o]),l.push(t),l.push(i),l.push([i[0]+(a[0]+n[0])*o,i[1]+(a[1]+n[1])*o]),e.push(l)}},{key:"_addBezier2",value:function(e,t,i,r,n){if(0!=n--){var a=this._mid(t,i),s=this._mid(i,r),o=this._mid(a,s);this._addBezier2(e,t,a,o,n),this._addBezier2(e,o,s,r,n)}else e.push(r)}},{key:"_addBezier3",value:function(e,t,i,r,n,a){if(0!=a--){var s=this._mid(t,i),o=this._mid(i,r),l=this._mid(r,n),h=this._mid(s,o),u=this._mid(o,l),c=this._mid(h,u);this._addBezier3(e,t,s,h,c,a),this._addBezier3(e,c,u,l,n,a)}else e.push(n)}},{key:"_add90DegArc",value:function(e,t,i,r,n){var a=null!==n&&void 0!==n?n:this._crossProduct(this._sub(i,t),this._sub(r,t))>0,s=this._mid(t,i),o=this._sub(s,t);a?this._leftPerpendicular(o):this._rightPerpendicular(o),s[0]+=o[0],s[1]+=o[1],this._addBezier3(e,t,this._mix(t,.33333,s,.66667),this._mix(i,.33333,s,.66667),i,4)}},{key:"_addArrow",value:function(e,t,i){var r=t[0],n=t[1],a=t[t.length-1],s=this._sub(r,n);this._normalize(s);var o=this._crossProduct(s,this._sub(a,n)),l=.5*o,h=this._leftPerp(s),u=[a[0]-h[0]*o,a[1]-h[1]*o],c=t.length-1,f=[];f.push(i?[-h[0],-h[1]]:h);for(var v=[-s[0],-s[1]],m=1;m<c-1;m++){var d=this._sub(t[m+1],t[m]);this._normalize(d);var y=this._dotProduct(d,v),p=this._crossProduct(d,v),_=Math.sqrt((1+y)/2),g=this._sub(d,v);this._normalize(g),g[0]/=_,g[1]/=_,f.push(p<0?[-g[0],-g[1]]:g),v=d}f.push(this._rightPerp(v));for(var P=f.length-1;P>0;P--)e.push([t[P][0]+f[P][0]*l,t[P][1]+f[P][1]*l]);e.push([u[0]+f[0][0]*l,u[1]+f[0][1]*l]),e.push([u[0]+f[0][0]*o,u[1]+f[0][1]*o]),e.push(r),e.push([u[0]-f[0][0]*o,u[1]-f[0][1]*o]),e.push([u[0]-f[0][0]*l,u[1]-f[0][1]*l]);for(var k=1;k<f.length;k++)e.push([t[k][0]-f[k][0]*l,t[k][1]-f[k][1]*l])}},{key:"_cp2",value:function(e,t,i){return e.length>=2?e[1]:this._add2(e[0],t*this._defaultSize,i*this._defaultSize)}},{key:"_cp3",value:function(e,t,i,r){if(e.length>=3)return e[2];var n=this._mix(e[0],1-i,t,i),a=this._sub(t,e[0]);return this._normalize(a),this._rightPerpendicular(a),[n[0]+a[0]*r*this._defaultSize,n[1]+a[1]*r*this._defaultSize]}},{key:"_arrowPath",value:function(e){if(e.length>2)return e;var t=e[0],i=this._cp2(e,-4,0),r=this._sub(t,i);this._normalize(r);var n=this._rightPerp(r);return[t,i,[t[0]+(n[0]-r[0])*this._defaultSize,t[1]+(n[1]-r[1])*this._defaultSize]]}},{key:"_arrowLastSeg",value:function(e){var t,i=e[0],r=this._cp2(e,-4,0);if(e.length>=3)t=e[e.length-1];else{var n=this._sub(i,r);this._normalize(n);var a=this._rightPerp(n);t=[i[0]+(a[0]-n[0])*this._defaultSize,i[1]+(a[1]-n[1])*this._defaultSize]}return[r,t]}},{key:"_processGeom",value:function(e){if(!e)return null;var t,i=[],r=(0,w.Z)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n&&0!==n.length){var a=n.length,s=n[0];switch(this._rule){case y.Em.PerpendicularFromFirstSegment:var o=this._cp2(n,0,-1),l=this._cp3(n,o,.5,4),h=[];h.push(l),h.push(this._mid(s,o)),i.push(h);break;case y.Em.ReversedFirstSegment:var u=this._cp2(n,0,-1);i.push([u,s]);break;case y.Em.PerpendicularToSecondSegment:var c=this._cp2(n,-4,1),v=this._cp3(n,c,.882353,-1.94),m=[];m.push(this._mid(c,v)),m.push(s),i.push(m);break;case y.Em.SecondSegmentWithTicks:var p=this._cp2(n,-4,1),_=this._cp3(n,p,.882353,-1.94),g=this._sub(_,p),P=void 0;P=this._crossProduct(g,this._sub(s,p))>0?this._rightPerp(P):this._leftPerp(g);var k=[];k.push([p[0]+(P[0]-g[0])/3,p[1]+(P[1]-g[1])/3]),k.push(p),k.push(_),k.push([_[0]+(P[0]+g[0])/3,_[1]+(P[1]+g[1])/3]),i.push(k);break;case y.Em.DoublePerpendicular:var M=this._cp2(n,0,-1),x=this._cp3(n,M,.5,3),b=this._mid(s,M),S=this._sub(b,x);this._normalize(S);var C=this._crossProduct(S,this._sub(s,x));this._leftPerpendicular(S);var I=[];I.push(s),I.push([x[0]+S[0]*C,x[1]+S[1]*C]),i.push(I);var L=[];L.push([x[0]-S[0]*C,x[1]-S[1]*C]),L.push(M),i.push(L);break;case y.Em.OppositeToFirstSegment:var z=this._cp2(n,0,-1),O=this._cp3(n,z,.5,3),A=this._mid(s,z),Z=this._sub(A,O);this._normalize(Z);var N=this._crossProduct(Z,this._sub(s,O));this._leftPerpendicular(Z);var T=[];T.push([O[0]+Z[0]*N,O[1]+Z[1]*N]),T.push([O[0]-Z[0]*N,O[1]-Z[1]*N]),i.push(T);break;case y.Em.TriplePerpendicular:var F=this._cp2(n,0,-1),E=this._cp3(n,F,.5,4),R=this._mid(s,F),G=this._sub(R,E);this._normalize(G);var X=this._crossProduct(G,this._sub(s,E));this._leftPerpendicular(G);var H=[];H.push([E[0]+G[0]*X*.8,E[1]+G[1]*X*.8]),H.push([R[0]+.8*(s[0]-R[0]),R[1]+.8*(s[1]-R[1])]),i.push(H),i.push([E,R]);var D=[];D.push([E[0]-G[0]*X*.8,E[1]-G[1]*X*.8]),D.push([R[0]+.8*(F[0]-R[0]),R[1]+.8*(F[1]-R[1])]),i.push(D);break;case y.Em.HalfCircleFirstSegment:var Y=this._cp2(n,0,-1),V=this._cp3(n,Y,.5,4),U=this._mid(s,Y),B=this._sub(Y,s),W=Math.cos(Math.PI/18),J=Math.sin(Math.PI/18),j=Math.sqrt((1+W)/2),q=Math.sqrt((1-W)/2),$=[],K=void 0;this._crossProduct(B,this._sub(V,s))>0?($.push(s),B=this._sub(s,U),K=Y):($.push(Y),B=this._sub(Y,U),K=s),this._rotateDirect(B,j,q),B[0]/=j,B[1]/=j;for(var Q=1;Q<=18;Q++)$.push(this._add(U,B)),this._rotateDirect(B,W,J);$.push(K),i.push($);break;case y.Em.HalfCircleSecondSegment:var ee=this._cp2(n,0,-1),te=this._cp3(n,ee,1,-1),ie=this._sub(s,ee);this._normalize(ie);var re=this._crossProduct(ie,this._sub(te,ee))/2;this._leftPerpendicular(ie);var ne=[ee[0]+ie[0]*re,ee[1]+ie[1]*re];ie=this._sub(ee,ne);var ae=Math.cos(Math.PI/18),se=Math.sin(Math.PI/18);re>0&&(se=-se);for(var oe=[ee],le=1;le<=18;le++)this._rotateDirect(ie,ae,se),oe.push(this._add(ne,ie));i.push(oe);break;case y.Em.HalfCircleExtended:var he=this._cp2(n,0,-2),ue=this._cp3(n,he,1,-1),ce=void 0;if(a>=4)ce=n[3];else{var fe=this._sub(s,he);ce=this._add(ue,fe)}var ve=this._dist(he,ue)/2/.75,me=this._sub(he,s);this._normalize(me,ve);var de=this._sub(ue,ce);this._normalize(de,ve);var ye=[ce,ue];i.push(ye);var pe=[this._clone(ue)];this._addBezier3(pe,ue,this._add(ue,de),this._add(he,me),he,4),pe.push(s),i.push(pe);break;case y.Em.OpenCircle:for(var _e=this._cp2(n,-2,0),ge=this._sub(_e,s),Pe=Math.cos(Math.PI/18),ke=-Math.sin(Math.PI/18),Me=[_e],xe=1;xe<=33;xe++)this._rotateDirect(ge,Pe,ke),Me.push(this._add(s,ge));i.push(Me);break;case y.Em.CoverageEdgesWithTicks:var be=this._cp2(n,0,-1),Se=void 0,Ce=void 0;if(a>=3)Se=n[2];else{var we=this._sub(be,s),Ie=this._leftPerp(we);Se=[s[0]+Ie[0]-.25*we[0],s[1]+Ie[1]-.25*we[1]]}if(a>=4)Ce=n[3];else{var Le=this._mid(s,be),ze=this._sub(s,be);this._normalize(ze),this._leftPerpendicular(ze);var Oe=this._crossProduct(ze,this._sub(Se,Le));this._rightPerpendicular(ze),Ce=[Se[0]+ze[0]*Oe*2,Se[1]+ze[1]*Oe*2]}var Ae=this._sub(be,s),Ze=void 0,Ne=void 0;Ze=this._crossProduct(Ae,this._sub(Se,s))>0?this._rightPerp(Ae):this._leftPerp(Ae),(Ne=[]).push(Se),Ne.push(s),Ne.push([s[0]+(Ze[0]-Ae[0])/3,s[1]+(Ze[1]-Ae[1])/3]),i.push(Ne),Ze=this._crossProduct(Ae,this._sub(Ce,be))>0?this._rightPerp(Ze):this._leftPerp(Ae),(Ne=[]).push([be[0]+(Ze[0]+Ae[0])/3,be[1]+(Ze[1]+Ae[1])/3]),Ne.push(be),Ne.push(Ce),i.push(Ne);break;case y.Em.GapExtentWithDoubleTicks:var Te=this._cp2(n,0,2),Fe=this._cp3(n,Te,0,1),Ee=void 0;if(a>=4)Ee=n[3];else{var Re=this._sub(Te,s);Ee=this._add(Fe,Re)}this._addAngledTicks(i,s,Te,this._mid(Fe,Ee)),this._addAngledTicks(i,Fe,Ee,this._mid(s,Te));break;case y.Em.GapExtentMidline:var Ge=this._cp2(n,2,0),Xe=this._cp3(n,Ge,0,1),He=void 0;if(a>=4)He=n[3];else{var De=this._sub(Ge,s);He=this._add(Xe,De)}var Ye=[];Ye.push(this._mid(s,Xe)),Ye.push(this._mid(Ge,He)),i.push(Ye);break;case y.Em.Chevron:var Ve=this._cp2(n,-1,-1),Ue=void 0;if(a>=3)Ue=n[2];else{var Be=this._sub(Ve,s);this._leftPerpendicular(Be),Ue=this._add(s,Be)}i.push([Ve,this._makeCtrlPt(s),Ue]);break;case y.Em.PerpendicularWithArc:var We=this._cp2(n,0,-2),Je=this._cp3(n,We,.5,-1),je=this._sub(We,s),qe=this._norm(je);je[0]/=qe,je[1]/=qe;var $e=this._crossProduct(je,this._sub(Je,s)),Ke=this._dotProduct(je,this._sub(Je,s));Ke<.05*qe?Ke=.05*qe:Ke>.95*qe&&(Ke=.95*qe);var Qe=[s[0]+je[0]*Ke,s[1]+je[1]*Ke];this._leftPerpendicular(je);var et=[];et.push([Qe[0]-je[0]*$e,Qe[1]-je[1]*$e]),et.push([Qe[0]+je[0]*$e,Qe[1]+je[1]*$e]),i.push(et);var tt=[We[0]+je[0]*$e,We[1]+je[1]*$e];je=this._sub(We,tt);var it=Math.cos(Math.PI/18),rt=Math.sin(Math.PI/18);$e<0&&(rt=-rt),et=[s,We];for(var nt=1;nt<=9;nt++)this._rotateDirect(je,it,rt),et.push(this._add(tt,je));i.push(et);break;case y.Em.ClosedHalfCircle:for(var at=this._cp2(n,2,0),st=this._mid(s,at),ot=this._sub(at,st),lt=Math.cos(Math.PI/18),ht=Math.sin(Math.PI/18),ut=[s,at],ct=1;ct<=18;ct++)this._rotateDirect(ot,lt,ht),ut.push(this._add(st,ot));i.push(ut);break;case y.Em.TripleParallelExtended:var ft=this._cp2(n,0,-2),vt=this._cp3(n,ft,1,-2),mt=this._mid(s,ft),dt=this._sub(vt,ft);this._normalize(dt);var yt=Math.abs(this._crossProduct(dt,this._sub(mt,ft)))/2,pt=this._dist(ft,vt),_t=[ft,s];_t.push([s[0]+dt[0]*pt*.5,s[1]+dt[1]*pt*.5]),i.push(_t);var gt=[];gt.push([mt[0]-dt[0]*yt,mt[1]-dt[1]*yt]),gt.push([mt[0]+dt[0]*pt*.375,mt[1]+dt[1]*pt*.375]),f(gt[gt.length-1],1),gt.push([mt[0]+dt[0]*pt*.75,mt[1]+dt[1]*pt*.75]),i.push(gt);var Pt=[ft,vt];i.push(Pt);break;case y.Em.ParallelWithTicks:var kt=this._cp2(n,3,0),Mt=this._cp3(n,kt,.5,-1),xt=this._sub(Mt,kt);this._normalize(xt);var bt=this._crossProduct(xt,this._sub(Mt,s));this._leftPerpendicular(xt),this._addAngledTicks(i,s,kt,Mt),this._addAngledTicks(i,this._mix(s,1,xt,bt),this._mix(kt,1,xt,bt),this._mid(s,kt));break;case y.Em.Parallel:var St=this._cp2(n,3,0),Ct=this._cp3(n,St,.5,-1),wt=this._sub(St,s);this._normalize(wt);var It=this._leftPerp(wt),Lt=this._crossProduct(wt,this._sub(Ct,s)),zt=[s,St];i.push(zt),(zt=[]).push([s[0]+It[0]*Lt,s[1]+It[1]*Lt]),zt.push([St[0]+It[0]*Lt,St[1]+It[1]*Lt]),i.push(zt);break;case y.Em.PerpendicularToFirstSegment:var Ot=this._cp2(n,3,0),At=this._cp3(n,Ot,.5,-1),Zt=this._mid(s,Ot),Nt=this._sub(Ot,s);this._normalize(Nt);var Tt=this._crossProduct(Nt,this._sub(At,s));this._leftPerpendicular(Nt);var Ft=[];Ft.push([Zt[0]-Nt[0]*Tt*.25,Zt[1]-Nt[1]*Tt*.25]),Ft.push([Zt[0]+Nt[0]*Tt*1.25,Zt[1]+Nt[1]*Tt*1.25]),i.push(Ft);break;case y.Em.ParallelOffset:var Et=this._cp2(n,3,0),Rt=this._cp3(n,Et,.5,-1),Gt=this._sub(Et,s);this._normalize(Gt);var Xt=this._crossProduct(Gt,this._sub(Rt,s));this._leftPerpendicular(Gt);var Ht=[];Ht.push([s[0]-Gt[0]*Xt,s[1]-Gt[1]*Xt]),Ht.push([Et[0]-Gt[0]*Xt,Et[1]-Gt[1]*Xt]),i.push(Ht);var Dt=[];Dt.push([s[0]+Gt[0]*Xt,s[1]+Gt[1]*Xt]),Dt.push([Et[0]+Gt[0]*Xt,Et[1]+Gt[1]*Xt]),i.push(Dt);break;case y.Em.OffsetOpposite:var Yt=this._cp2(n,3,0),Vt=this._cp3(n,Yt,.5,-1),Ut=this._sub(Yt,s);this._normalize(Ut);var Bt=this._crossProduct(Ut,this._sub(Vt,s));this._leftPerpendicular(Ut);var Wt=[];Wt.push([s[0]-Ut[0]*Bt,s[1]-Ut[1]*Bt]),Wt.push([Yt[0]-Ut[0]*Bt,Yt[1]-Ut[1]*Bt]),i.push(Wt);break;case y.Em.OffsetSame:var Jt=this._cp2(n,3,0),jt=this._cp3(n,Jt,.5,-1),qt=this._sub(Jt,s);this._normalize(qt);var $t=this._crossProduct(qt,this._sub(jt,s));this._leftPerpendicular(qt);var Kt=[];Kt.push([s[0]+qt[0]*$t,s[1]+qt[1]*$t]),Kt.push([Jt[0]+qt[0]*$t,Jt[1]+qt[1]*$t]),i.push(Kt);break;case y.Em.CircleWithArc:var Qt=this._cp2(n,3,0),ei=this._cp3(n,Qt,.5,-1),ti=void 0,ii=void 0;if(a>=4)ti=n[3],ii=this._crossProduct(this._sub(ti,Qt),this._sub(ei,Qt))>0;else{ti=Qt,ii=this._crossProduct(this._sub(ti,s),this._sub(ei,s))>0;var ri=24*this._geomUnitsPerPoint,ni=this._sub(ti,s);this._normalize(ni,ri);var ai=Math.sqrt(2)/2;this._rotateDirect(ni,ai,ii?ai:-ai),Qt=this._add(s,ni)}for(var si=this._sub(Qt,s),oi=Math.cos(Math.PI/18),li=Math.sin(Math.PI/18),hi=[Qt],ui=1;ui<=36;ui++)this._rotateDirect(si,oi,li),hi.push(this._add(s,si));this._add90DegArc(hi,Qt,ti,ei,ii),f(hi[hi.length-8],1),i.push(hi);break;case y.Em.DoubleJog:var ci=void 0,fi=void 0,vi=this._cp2(n,-3,1);if(ci=a>=3?n[2]:this._add(s,this._sub(s,vi)),a>=4)fi=n[3];else{var mi=s;s=vi,fi=ci;var di=this._dist(s,mi),yi=this._dist(fi,mi),pi=30*this._geomUnitsPerPoint;.5*di<pi&&(pi=.5*di),.5*yi<pi&&(pi=.5*yi),vi=this._mix(s,pi/di,mi,(di-pi)/di),ci=this._mix(fi,pi/yi,mi,(yi-pi)/yi)}var _i=this._mid(s,vi),gi=this._mid(fi,ci),Pi=this._dist(s,vi),ki=this._dist(ci,fi),Mi=Math.min(Pi,ki)/8;Mi=Math.min(Mi,24*this._geomUnitsPerPoint);var xi=Math.cos(Math.PI/4),bi=this._sub(s,vi);this._normalize(bi,Mi),this._crossProduct(bi,this._sub(fi,vi))>0?this._rotateDirect(bi,xi,-xi):this._rotateDirect(bi,xi,xi);var Si=[];Si.push(vi),Si.push(this._add(_i,bi)),Si.push(this._sub(_i,bi)),Si.push(s),i.push(Si),bi=this._sub(fi,ci),this._normalize(bi,Mi),this._crossProduct(bi,this._sub(s,ci))<0?this._rotateDirect(bi,xi,xi):this._rotateDirect(bi,xi,-xi),(Si=[]).push(ci),Si.push(this._add(gi,bi)),Si.push(this._sub(gi,bi)),Si.push(fi),i.push(Si);break;case y.Em.PerpendicularOffset:var Ci=this._cp2(n,-4,1),wi=this._cp3(n,Ci,.882353,-1.94),Ii=this._sub(wi,Ci);this._crossProduct(Ii,this._sub(s,Ci))>0?this._rightPerpendicular(Ii):this._leftPerpendicular(Ii);var Li=[Ii[0]/8,Ii[1]/8],zi=this._sub(this._mid(Ci,wi),Li);i.push([zi,s]);break;case y.Em.LineExcludingLastSegment:for(var Oi=this._arrowPath(n),Ai=[],Zi=Oi.length-2;Zi--;)Ai.push(Oi[Zi]);i.push(Ai);break;case y.Em.MultivertexArrow:var Ni=this._arrowPath(n),Ti=[];this._addArrow(Ti,Ni,!1),i.push(Ti);break;case y.Em.CrossedArrow:var Fi=this._arrowPath(n),Ei=[];this._addArrow(Ei,Fi,!0),i.push(Ei);break;case y.Em.ChevronArrow:var Ri=this._arrowLastSeg(n),Gi=(0,d.Z)(Ri,2),Xi=Gi[0],Hi=Gi[1],Di=10*this._geomUnitsPerPoint,Yi=this._sub(s,Xi);this._normalize(Yi);var Vi=this._crossProduct(Yi,this._sub(Hi,Xi)),Ui=this._leftPerp(Yi),Bi=[Hi[0]-Ui[0]*Vi*2,Hi[1]-Ui[1]*Vi*2],Wi=[];Wi.push([Hi[0]+Yi[0]*Di,Hi[1]+Yi[1]*Di]),Wi.push(s),Wi.push([Bi[0]+Yi[0]*Di,Bi[1]+Yi[1]*Di]),i.push(Wi);break;case y.Em.ChevronArrowOffset:var Ji=this._arrowLastSeg(n),ji=(0,d.Z)(Ji,2),qi=ji[0],$i=ji[1],Ki=this._sub(s,qi);this._normalize(Ki);var Qi=this._crossProduct(Ki,this._sub($i,qi));this._leftPerpendicular(Ki);var er=[$i[0]-Ki[0]*Qi,$i[1]-Ki[1]*Qi],tr=[];tr.push([er[0]+Ki[0]*Qi*.5,er[1]+Ki[1]*Qi*.5]),tr.push(this._mid(er,s)),tr.push([er[0]-Ki[0]*Qi*.5,er[1]-Ki[1]*Qi*.5]),i.push(tr);break;case y.Em.PartialFirstSegment:var ir=this._arrowLastSeg(n),rr=(0,d.Z)(ir,2),nr=rr[0],ar=rr[1],sr=this._sub(s,nr);this._normalize(sr);var or=this._crossProduct(sr,this._sub(ar,nr));this._leftPerpendicular(sr);var lr=[ar[0]-sr[0]*or,ar[1]-sr[1]*or];i.push([nr,lr]);break;case y.Em.Arch:var hr=this._cp2(n,0,-1),ur=this._cp3(n,hr,.5,1),cr=this._sub(s,hr),fr=this._mix(ur,1,cr,.55),vr=this._mix(ur,1,cr,-.55),mr=[s];this._addBezier2(mr,s,fr,ur,4),this._addBezier2(mr,ur,vr,hr,4),i.push(mr);break;case y.Em.CurvedParallelTicks:var dr=this._cp2(n,-4,1),yr=this._cp3(n,dr,.882353,-1.94),pr=this._sub(yr,dr);this._crossProduct(pr,this._sub(s,dr))>0?this._rightPerpendicular(pr):this._leftPerpendicular(pr);var _r=[pr[0]/8,pr[1]/8],gr=this._sub(this._mid(dr,yr),_r),Pr=this._sub(this._mix(dr,.75,yr,.25),_r),kr=this._sub(this._mix(dr,.25,yr,.75),_r),Mr=[dr];this._addBezier2(Mr,dr,Pr,gr,3),this._addBezier2(Mr,gr,kr,yr,3),i.push(Mr);for(var xr=0;xr<8;xr++){var br=Mr[2*xr+1],Sr=[this._clone(br)];Sr.push(this._add(br,[pr[0]/4,pr[1]/4])),i.push(Sr)}break;case y.Em.Arc90Degrees:var Cr=this._cp2(n,0,-1),wr=this._cp3(n,Cr,.5,1),Ir=[Cr];this._add90DegArc(Ir,Cr,s,wr),i.push(Ir);break;case y.Em.FullGeometry:default:i.push(n)}}}}catch(Lr){r.e(Lr)}finally{r.f()}return i}}]),e}(),z=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new A(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();z.instance=null;var O,A=function(e){(0,o.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,a){var s;return(0,r.Z)(this,i),(s=t.call(this,e,!0,!0))._curveHelper=new _,s._beginCut=(void 0!==n.beginCut?n.beginCut:1)*a,s._endCut=(void 0!==n.endCut?n.endCut:1)*a,s._middleCut=(void 0!==n.middleCut?n.middleCut:0)*a,s._invert=void 0!==n.invert&&n.invert,s._beginCut<0&&(s._beginCut=0),s._endCut<0&&(s._endCut=0),s._middleCut<0&&(s._middleCut=0),s}return(0,n.Z)(i,[{key:"processPath",value:function(e){var t=this._beginCut,i=this._endCut,r=this._middleCut,n=e.pathLength(),a=h.z.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._invert){if(0!==t||0!==i||0!==r)if(t+i+r>=n)for(a.startPath();e.nextPoint();)a.pushXY(e.x,e.y);else this._curveHelper.appendSubCurve(a,e,0,t),this._curveHelper.appendSubCurve(a,e,.5*(n-r),.5*(n+r)),this._curveHelper.appendSubCurve(a,e,n-i,i)}else if(0===t&&0===i&&0===r)for(a.startPath();e.nextPoint();)a.pushXY(e.x,e.y);else t+i+r<n&&(0===r?this._curveHelper.appendSubCurve(a,e,t,n-i):(this._curveHelper.appendSubCurve(a,e,t,.5*(n-r)),this._curveHelper.appendSubCurve(a,e,.5*(n+r),n-i)));return 0===a.totalSize?null:a}}]),i}(m),Z=function(){function e(){(0,r.Z)(this,e),this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}return(0,n.Z)(e,[{key:"isEmpty",value:function(){return 0===this._values.length}},{key:"size",value:function(){return this._values.length}},{key:"init",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._setEmpty(),!e||0===e.length)return!1;for(var r=0;r<e.length;r++){var n=Math.abs(e[r]);i&&n<1e-7&&(n=1e-7),this._values.push(n),this._length+=n}return t&&1&e.length&&(this._length*=2),0!==this._length&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}},{key:"scale",value:function(e){for(var t=this._values?this._values.length:0,i=0;i<t;++i)this._values[i]*=e;this._length*=e,this.extPtGap*=e,this.ctrlPtGap*=e}},{key:"addValue",value:function(e){this._length+=e,this._values.push(e)}},{key:"firstValue",value:function(){return this._values[0]}},{key:"lastValue",value:function(){return this._values[this._values.length-1]}},{key:"nextValue",value:function(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}},{key:"reset",value:function(){this._currentValue=-1}},{key:"length",value:function(){return this._length}},{key:"_setEmpty",value:function(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}}]),e}(),N=(0,n.Z)((function e(){(0,r.Z)(this,e),this.pt=null,this.ca=0,this.sa=0}));!function(e){e[e.FAIL=0]="FAIL",e[e.END=1]="END",e[e.CONTINUE=2]="CONTINUE"}(O||(O={}));var T=function(){function e(){(0,r.Z)(this,e),this.reset()}return(0,n.Z)(e,[{key:"reset",value:function(){this.segment=null,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}},{key:"isValid",value:function(){return null!==this.segment}},{key:"copyTo",value:function(e){e.segment=this.segment,e.segmentLength=this.segmentLength,e.abscissa=this.abscissa,e.isPathEnd=this.isPathEnd,e.isPartEnd=this.isPartEnd}}]),e}(),F=function(e){(0,o.Z)(i,e);var t=(0,l.Z)(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,r.Z)(this,i),(e=t.call(this,n,a))._tolerance=p,e._currentPosition=new T,e}return(0,n.Z)(i,[{key:"updateTolerance",value:function(e){this._tolerance=p*e}},{key:"init",value:function(e,t){return!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?(this._patternLength=t.length(),this._partExtPtGap=t.extPtGap,this._partCtrlPtGap=t.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._pathCursor=e,this._seg=-1,this._setPosAtNextPart()}},{key:"curPositionIsValid",value:function(){return this._currentPosition.isValid()}},{key:"nextPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.FAIL,i=new T;return!!this._nextPosition(e,i,null,t)&&(i.copyTo(this._currentPosition),!0)}},{key:"curPointAndAngle",value:function(e){e.pt=this._getPoint(this._currentPosition);var t=this._getAngleCS(this._currentPosition),i=(0,d.Z)(t,2),r=i[0],n=i[1];e.ca=r,e.sa=n}},{key:"nextPointAndAngle",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O.FAIL,r=new T;if(!this._nextPosition(e,r,null,i))return!1;r.copyTo(this._currentPosition),t.pt=this._getPoint(r);var n=this._getAngleCS(r),a=(0,d.Z)(n,2),s=a[0],o=a[1];return t.ca=s,t.sa=o,!0}},{key:"nextCurve",value:function(e){if(0===e)return null;var t=h.z.createEmptyOptimizedCIM("esriGeometryPolyline");t.startPath(),t.nextPath();var i=new T;return this._nextPosition(e,i,t,O.END)?(i.copyTo(this._currentPosition),t):null}},{key:"isPathEnd",value:function(){return this._currentPosition.isPathEnd}},{key:"getPathEnd",value:function(){return this._currentPosition.segment[1]}},{key:"getPt",value:function(e){return this._pathCursor.seekInPath(e),[this._pathCursor.x,this._pathCursor.y]}},{key:"getSeg",value:function(e){return[this.getPt(e),this.getPt(e+1)]}},{key:"_nextPosition",value:function(e,t,i,r){if(this._currentPosition.isPathEnd)return!1;var n=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(n/=this._currentPosition.segmentLength),this._currentPosition.copyTo(t);t.abscissa+e*this._partLengthRatio>t.segmentLength+this._tolerance;){if(i){if(0===i.pathSize)if(0===n){var a=t.segment[0];i.pushXY(a[0],a[1])}else i.pushPoint(this.getSegCoord2D(t.segment,n));var s=t.segment[1];i.pushXY(s[0],s[1])}if(n=0,e-=(t.segmentLength-t.abscissa)/this._partLengthRatio,this._partSegCount)t.segment=this._nextSegment(),t.segmentLength=this.getSegLength(t.segment),t.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return r!==O.FAIL&&(t.segmentLength=this.getSegLength(t.segment),t.isPartEnd=!0,r===O.END?(t.abscissa=t.segmentLength,t.isPathEnd=!0):t.abscissa=t.segmentLength+e,!0);this._currentPosition.copyTo(t)}}if(t.abscissa+=e*this._partLengthRatio,i){0===i.pathSize&&(0===n?i.pushPoint(t.segment[0]):i.pushPoint(this.getSegCoord2D(t.segment,n)));var o=t.abscissa/t.segmentLength;1===o?i.pushPoint(t.segment[1]):i.pushPoint(this.getSegCoord2D(t.segment,o))}return this._partSegCount||Math.abs(t.abscissa-t.segmentLength)<this._tolerance&&(t.isPathEnd=this._partIsLast,t.isPartEnd=!0),!0}},{key:"_getPoint",value:function(e){var t=e.segmentLength<=0?0:e.abscissa/e.segmentLength;return this.getSegCoord2D(this._currentPosition.segment,t)}},{key:"_getAngleCS",value:function(e){var t=e.segmentLength<=0?0:e.abscissa/e.segmentLength;return this.getSegAngleCS(this._currentPosition.segment,t)}},{key:"_setPosAtNextPart",value:function(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.getSegLength(this._nextSegment()),this._partSegCount++,this._pathCursor.getControlPointAt(this._getEndPointIndex())){this._partIsLast=!this._hasNextSegment();break}for(var e=this._partSegCount;e;)this._previousSegment(),--e;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.getSegLength(this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;var t=this._getStartPointIndex();this._ctrlPtBegin=this._pathCursor.getControlPointAt(t);var i=t+this._partSegCount+1;if(i>=this._pathCursor.pathSize&&(i=0),this._ctrlPtEnd=this._pathCursor.getControlPointAt(i),this._patternLength>0){var r=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,n=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap,a=Math.round((this._partLength-(r+n))/this._patternLength);a<=0&&(a=r+n>0?0:1),this._partLengthRatio=this._partLength/(r+n+a*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}},{key:"_hasNextSegment",value:function(){return this._seg<this._pathCursor.pathSize-2}},{key:"_previousSegment",value:function(){return this.getSeg(--this._seg)}},{key:"_nextSegment",value:function(){return this.getSeg(++this._seg)}},{key:"_getStartPointIndex",value:function(){return this._seg}},{key:"_getEndPointIndex",value:function(){return this._seg+1}}]),i}(_),E=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new R(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();E.instance=null;var R=function(e){(0,o.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,a){var s,o,l;return(0,r.Z)(this,i),(l=t.call(this,e,!0,!0))._firstCurve=null,l._walker=new F,l._walker.updateTolerance(a),l._endings=n.lineDashEnding,l._customDashPos=-(null!==(s=n.offsetAlongLine)&&void 0!==s?s:0)*a,l._offsetAtEnd=(null!==(o=n.customEndingOffset)&&void 0!==o?o:0)*a,l._pattern=new Z,l._pattern.init(n.dashTemplate,!0),l._pattern.scale(a),l}return(0,n.Z)(i,[{key:"processPath",value:function(e){var t,i;if(0===this._pattern.length()){this.iteratePath=!1;var r=(0,u.l)(e);return h.z.fromJSONCIM({paths:[r]})}if(!this.iteratePath){var n=!0;switch(this._endings){case y.sj.HalfPattern:case y.sj.HalfGap:default:this._pattern.extPtGap=0;break;case y.sj.FullPattern:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case y.sj.FullGap:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case y.sj.NoConstraint:this.isClosed||(n=!1);break;case y.sj.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var a=e.pathLength();if(this._pattern.isEmpty()||a<.1*this._pattern.length()){var s=(0,u.l)(e);return h.z.fromJSONCIM({paths:[s]})}if(!this._walker.init(e,this._pattern,n)){var o=(0,u.l)(e);return h.z.fromJSONCIM({paths:[o]})}}if(this.iteratePath)i=this._pattern.nextValue();else{var l;switch(this._endings){case y.sj.HalfPattern:default:l=.5*this._pattern.firstValue();break;case y.sj.HalfGap:l=.5*-this._pattern.lastValue();break;case y.sj.FullGap:l=-this._pattern.lastValue();break;case y.sj.FullPattern:l=0;break;case y.sj.NoConstraint:case y.sj.Custom:l=-this._customDashPos}var c=l/this._pattern.length();l=(c-=Math.floor(c))*this._pattern.length(),this._pattern.reset(),i=this._pattern.nextValue();for(var f=!1;l>=i;)l-=i,i=this._pattern.nextValue(),f=!f;i-=l,f?(this._walker.nextPosition(i),i=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(i),i=this._pattern.nextValue(),this._walker.nextPosition(i),i=this._pattern.nextValue())}var v=this._walker.nextCurve(i);if(v)if(this._walker.isPathEnd()){if(this.iteratePath=!1,this._firstCurve){for(this._firstCurve.nextPath();this._firstCurve.nextPoint();)v.pushXY(this._firstCurve.x,this._firstCurve.y);this._firstCurve=null}}else i=this._pattern.nextValue(),!this._walker.nextPosition(i)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(v.pushCursor(this._firstCurve),this._firstCurve=null)):this.iteratePath=!0;else this.iteratePath=!1,v=this._firstCurve,this._firstCurve=null;return null!==(t=v)&&void 0!==t&&t.reset(),v}}]),i}(m),G=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n,a){return new X(e,t,i,r,n,a)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();G.instance=null;var X=function(){function e(t,i,n,a,s,o){switch((0,r.Z)(this,e),this._inputGeometries=t,this._tileKey=a,this._geometryEngine=s,this._maxInflateSize=o*n,this._width=(void 0!==i.width?i.width:2)*n,i.method){case y.$y.Mitered:case y.$y.Bevelled:case y.$y.Rounded:case y.$y.TrueBuffer:case y.$y.Square:}this._option=i.option}return(0,n.Z)(e,[{key:"next",value:function(){for(var e;e=this._inputGeometries.next();){if("esriGeometryEnvelope"===e.geometryType&&this._width>0){var t=e.asJSON();return Math.min(t.xmax-t.xmin,t.ymax-t.ymin)-2*this._width<0?e:h.z.fromJSONCIM({paths:[[[t.xmin+this._width,t.ymin+this._width],[t.xmax-this._width,t.ymin+this._width],[t.xmax-this._width,t.ymax-this._width],[t.xmin+this._width,t.ymax-this._width],[t.xmin+this._width,t.ymin+this._width]],[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})}if("esriGeometryPolygon"===e.geometryType){if(0===this._width)return e.clone();var i=this._geometryEngine;if(null==i)return null;var r=this._tileKey?(0,x.L)(e,this._maxInflateSize):e.clone();if(!r)continue;var n=i.buffer(b.Z.WebMercator,r.asJSON(),-this._width,1);if(n){var a,s=(0,w.Z)(n.rings);try{for(s.s();!(a=s.n()).done;){var o=a.value;o&&r.pushPath(o.reverse())}}catch(l){s.e(l)}finally{s.f()}}return r}}return null}}]),e}(),H=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new D(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();H.instance=null;var D=function(e){(0,o.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,a){var s;return(0,r.Z)(this,i),(s=t.call(this,e,!1,!0))._curveHelper=new _,s._length=(void 0!==n.length?n.length:20)*a,s._angle=void 0!==n.angle?n.angle:225,s._position=void 0!==n.position?n.position:50,s._length<0&&(s._length=-s._length),s._position<20&&(s._position=20),s._position>80&&(s._position=80),s._mirror=!1,s}return(0,n.Z)(i,[{key:"processPath",value:function(e){var t=h.z.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._curveHelper.isEmpty(e))return null;e.seekInPath(0);var i=e.x,r=e.y;e.seekInPath(e.pathSize-1);var n=e.x,a=e.y,s=[n-i,a-r];this._curveHelper.normalize(s);var o=i+(n-i)*this._position/100,l=r+(a-r)*this._position/100,u=Math.cos((90-this._angle)/180*Math.PI),c=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(c=-c),this._mirror=!this._mirror;var f=[o-this._length/2*u,l-this._length/2*c],v=[o+this._length/2*u,l+this._length/2*c];return t.pushPath([[i,r],f,v,[n,a]]),t}}]),i}(m),Y=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new V(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();Y.instance=null;var V=function(){function e(t,i,n){(0,r.Z)(this,e),this._inputGeometries=t,this._offsetX=void 0!==i.offsetX?i.offsetX*n:0,this._offsetY=void 0!==i.offsetY?i.offsetY*n:0}return(0,n.Z)(e,[{key:"next",value:function(){for(var e=this._inputGeometries.next();e;){if(e.totalSize>0)return this._move(e.clone(),this._offsetX,this._offsetY);e=this._inputGeometries.next()}return null}},{key:"_move",value:function(e,t,i){for(;e.nextPath();)for(;e.nextPoint();)e.x=e.x+t,e.y=e.y+i;return e.reset(),e}}]),e}(),U=i(77981),B=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n,a){return new W(e,t,i,r,n,a)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();B.instance=null;var W=function(){function e(t,i,n,a,s,o){var l;(0,r.Z)(this,e),this._inputGeometries=t,this._tileKey=a,this._geometryEngine=s,this._curveHelper=new _,this._offset=(null!==(l=i.offset)&&void 0!==l?l:1)*n,this._method=i.method,this._maxInflateSize=o*n,this._option=i.option,this._offsetFlattenError=p*n}return(0,n.Z)(e,[{key:"next",value:function(){for(var e;e=this._inputGeometries.next();){if(0===this._offset)return e.clone();if("esriGeometryEnvelope"===e.geometryType){if(this._method===y.id.Rounded&&this._offset>0){var t=(0,u.l)(e),i=this._curveHelper.offset(t,-this._offset,this._method,4,this._offsetFlattenError);if(i){var r=h.z.createEmptyOptimizedCIM(e.geometryType);return r.pushPath(i),r}return null}var n=e.asJSON();if((0,U.YX)(n)&&Math.min(n.xmax-n.xmin,n.ymax-n.ymin)+2*this._offset>0)return h.z.fromJSONCIM({xmin:n.xmin-this._offset,xmax:n.xmax+this._offset,ymin:n.ymin-this._offset,ymax:n.ymax+this._offset})}var a=this._geometryEngine;if(null!=a){var s=this._tileKey?(0,x.L)(e,this._maxInflateSize):e.clone();if(s){var o=a.offset(b.Z.WebMercator,s.asJSON(),-this._offset,1,this._method,4,this._offsetFlattenError);return o?h.z.fromJSONCIM(o):null}}}return null}}]),e}(),J=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new j(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();J.instance=null;var j=function(){function e(t,i,n){(0,r.Z)(this,e),this._inputGeometries=t,this._reverse=void 0===i.reverse||i.reverse}return(0,n.Z)(e,[{key:"next",value:function(){for(var e=this._inputGeometries.next();e;){if(!this._reverse)return e;if("esriGeometryPolyline"===e.geometryType)return q(e.clone());e=this._inputGeometries.next()}return null}}]),e}();function q(e){for(;e.nextPath();)for(var t=0;t<e.pathSize/2;t++){e.seekInPath(t);var i=e.x,r=e.y;e.seekInPath(e.pathSize-t-1);var n=e.x,a=e.y;e.x=i,e.y=r,e.seekInPath(t),e.x=n,e.y=a}return e.reset(),e}var $=i(376),K=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new Q(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();K.instance=null;var Q=function(){function e(t,i,n){(0,r.Z)(this,e),this._inputGeometries=t,this._rotateAngle=void 0!==i.angle?i.angle*Math.PI/180:0}return(0,n.Z)(e,[{key:"next",value:function(){for(var e=this._inputGeometries.next();e;){if(0===this._rotateAngle||"esriGeometryPoint"===e.geometryType)return e;if(e.totalSize>0){var t=(0,$.Cs)(e),i=(t[2]+t[0])/2,r=(t[3]+t[1])/2;return e.reset(),this._rotate(e.clone(),i,r)}e=this._inputGeometries.next()}return null}},{key:"_rotate",value:function(e,t,i){for(var r=Math.cos(this._rotateAngle),n=Math.sin(this._rotateAngle);e.nextPath();)for(;e.nextPoint();){var a=e.x-t,s=e.y-i;e.x=t+a*r-s*n,e.y=i+a*n+s*r}return e.reset(),e}}]),e}(),ee=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new te(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();ee.instance=null;var te=function(){function e(t,i,n){(0,r.Z)(this,e),this._inputGeometries=t,this._xFactor=void 0!==i.XScaleFactor?i.XScaleFactor:1.15,this._yFactor=void 0!==i.YScaleFactor?i.YScaleFactor:1.15}return(0,n.Z)(e,[{key:"next",value:function(){var e=this._inputGeometries.next();if(e){if(1===this._xFactor&&1===this._yFactor)return e;if("esriGeometryPoint"===e.geometryType)return e;if(e.totalSize>0){var t=(0,$.Cs)(e),i=(t[2]+t[0])/2,r=(t[3]+t[1])/2;return e.reset(),this._scaleCursor(e.clone(),i,r)}}return null}},{key:"_scaleCursor",value:function(e,t,i){for(;e.nextPath();)for(;e.nextPoint();)e.x=t+(e.x-t)*this._xFactor,e.y=i+(e.y-i)*this._yFactor;return e.reset(),e}}]),e}(),ie=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new re(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();ie.instance=null;var re=function(){function e(t,i,n){(0,r.Z)(this,e),this._inputGeometries=t,this._height=(void 0!==i.amplitude?i.amplitude:2)*n,this._period=(void 0!==i.period?i.period:3)*n,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new Z,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new F,this._walker.updateTolerance(n)}return(0,n.Z)(e,[{key:"next",value:function(){for(var e=this._inputGeometries.next();e;){if(0===this._height||0===this._period)return e;var t=this._processGeom(e);if(t)return t;e=this._inputGeometries.next()}return null}},{key:"_processGeom",value:function(e){for(var t=h.z.createEmptyOptimizedCIM(e.geometryType);e.nextPath();){t.startPath();var i=e.pathLength();if(this._walker.init(e,this._pattern))switch(this._style){case y.zQ.Sinus:default:this._constructCurve(t,i,!1);break;case y.zQ.Square:this._constructSquare(t,i);break;case y.zQ.Triangle:this._constructTriangle(t,i);break;case y.zQ.Random:this._constructCurve(t,i,!0)}else for(;e.nextPoint();)t.pushXY(e.x,e.y)}return t}},{key:"_constructCurve",value:function(e,t,i){var r=Math.round(t/this._period);0===r&&(r=1);var n=16*r+1,a=t/r,s=this._period/16,o=1/n,l=2*Math.PI*t/a,h=2*Math.PI*Math.random(),u=2*Math.PI*Math.random(),c=2*Math.PI*Math.random(),f=.75-Math.random()/2,v=.75-Math.random()/2,m=new N;this._walker.curPointAndAngle(m),e.pushPoint(m.pt);for(var d=0;;){if(!this._walker.nextPointAndAngle(s,m)){e.pushPoint(this._walker.getPathEnd());break}var y=d,p=void 0;if(d+=o,i){var _=this._height/2*(1+.3*Math.sin(f*l*y+h));p=_*Math.sin(l*y+u),p+=_*Math.sin(v*l*y+c),p/=2}else p=.5*this._height*Math.sin(.5*l*y);e.pushXY(m.pt[0]-p*m.sa,m.pt[1]+p*m.ca)}}},{key:"_constructSquare",value:function(e,t){Math.round(t/this._period);for(var i=!0;;){var r=!1;if(this._walker.curPositionIsValid()){var n=new N;this._walker.curPointAndAngle(n);var a=new N;if(this._walker.nextPointAndAngle(this._period,a)){var s=new N;this._walker.nextPointAndAngle(this._period,s)&&(i?(e.pushPoint(n.pt),i=!1):e.pushPoint(n.pt),e.pushXY(n.pt[0]-this._height/2*n.sa,n.pt[1]+this._height/2*n.ca),e.pushXY(a.pt[0]-this._height/2*a.sa,a.pt[1]+this._height/2*a.ca),e.pushXY(a.pt[0]+this._height/2*a.sa,a.pt[1]-this._height/2*a.ca),e.pushXY(s.pt[0]+this._height/2*s.sa,s.pt[1]-this._height/2*s.ca),r=!0)}}if(!r){e.pushPoint(this._walker.getPathEnd());break}}}},{key:"_constructTriangle",value:function(e,t){Math.round(t/this._period);for(var i=!0;;){var r=!1;if(this._walker.curPositionIsValid()){var n=new N;this._walker.curPointAndAngle(n);var a=new N;if(this._walker.nextPointAndAngle(this._period/2,a)){var s=new N;this._walker.nextPointAndAngle(this._period,s)&&(this._walker.nextPosition(this._period/2)&&(i?(e.pushPoint(n.pt),i=!1):e.pushPoint(n.pt),e.pushXY(a.pt[0]-this._height/2*a.sa,a.pt[1]+this._height/2*a.ca),e.pushXY(s.pt[0]+this._height/2*s.sa,s.pt[1]-this._height/2*s.ca)),r=!0)}}if(!r){e.pushPoint(this._walker.getPathEnd());break}}}}]),e}(),ne=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new ae(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();ne.instance=null;var ae=function(e){(0,o.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,a){var s,o;return(0,r.Z)(this,i),(o=t.call(this,e))._geometryWalker=new F,o._geometryWalker.updateTolerance(a),o._angleToLine=null===(s=n.angleToLine)||void 0===s||s,o._offset=(n.offset?n.offset:0)*a,o._originalEndings=n.endings,o._offsetAtEnd=(n.customEndingOffset?n.customEndingOffset:0)*a,o._position=-(n.offsetAlongLine?n.offsetAlongLine:0)*a,o._pattern=new Z,o._pattern.init(n.placementTemplate,!1),o._pattern.scale(a),o._endings=o._originalEndings,o}return(0,n.Z)(i,[{key:"processPath",value:function(e){if(this._pattern.isEmpty())return null;var t;if(this.iteratePath)t=this._pattern.nextValue();else{this._originalEndings===y.JS.WithFullGap&&this.isClosed?this._endings=y.JS.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;var i,r=!0;switch(this._endings){case y.JS.NoConstraint:i=-this._position,i=this._adjustPosition(i),r=!1;break;case y.JS.WithHalfGap:default:i=-this._pattern.lastValue()/2;break;case y.JS.WithFullGap:i=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case y.JS.WithMarkers:i=0;break;case y.JS.Custom:i=-this._position,i=this._adjustPosition(i),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(e,this._pattern,r))return null;this._pattern.reset();for(var n=0;i>n;)i-=n,n=this._pattern.nextValue();t=n-=i,this.iteratePath=!0}var a=new N;return this._geometryWalker.nextPointAndAngle(t,a)?this._endings===y.JS.WithFullGap&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===y.JS.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(a.pt[0]-this._offset*a.sa,a.pt[1]+this._offset*a.ca),this._angleToLine&&this.internalPlacement.setRotateCS(a.ca,a.sa),this.internalPlacement):(this.iteratePath=!1,null)}},{key:"_adjustPosition",value:function(e){var t=e/this._pattern.length();return(t-=Math.floor(t))*this._pattern.length()}}]),i}(v),se=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new oe(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();se.instance=null;var oe=function(e){(0,o.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,a){var s;return(0,r.Z)(this,i),(s=t.call(this,e,!1,!0))._curveHelper=new _,s._angleToLine=void 0===n.angleToLine||n.angleToLine,s._offset=void 0!==n.offset?n.offset*a:0,s._type=n.extremityPlacement,s._position=void 0!==n.offsetAlongLine?n.offsetAlongLine*a:0,s._beginProcessed=!1,s}return(0,n.Z)(i,[{key:"processPath",value:function(e){var t;switch(this._type){case y.Tx.Both:default:this._beginProcessed?(t=this._atExtremities(e,this._position,!1),this._beginProcessed=!1,this.iteratePath=!1):(t=this._atExtremities(e,this._position,!0),this._beginProcessed=!0,this.iteratePath=!0);break;case y.Tx.JustBegin:t=this._atExtremities(e,this._position,!0);break;case y.Tx.JustEnd:t=this._atExtremities(e,this._position,!1);case y.Tx.None:}return t}},{key:"_atExtremities",value:function(e,t,i){if(i||e.seekPathEnd(),i?e.nextPoint():e.prevPoint())for(var r=0,n=0,a=0,s=[e.x,e.y],o=s[0],l=s[1];i?e.nextPoint():e.prevPoint();){n=o,a=l,o=e.x,l=e.y;var h=this._curveHelper.getLength(n,a,o,l);if(r+h>t){var u=(t-r)/h,c=this._curveHelper.getAngleCS(n,a,o,l,u),f=(0,d.Z)(c,2),v=f[0],m=f[1],y=this._curveHelper.getCoord2D(n,a,o,l,u);return this.internalPlacement.setTranslate(y[0]-this._offset*m,y[1]+this._offset*v),this._angleToLine&&this.internalPlacement.setRotateCS(-v,-m),this.internalPlacement}r+=h}return null}}]),i}(v),le=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new he(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();le.instance=null;var he=function(e){(0,o.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,a){var s;return(0,r.Z)(this,i),(s=t.call(this,e))._walker=new F,s._walker.updateTolerance(a),s._angleToLine=void 0===n.angleToLine||n.angleToLine,s._offset=void 0!==n.offset?n.offset*a:0,s._beginGap=void 0!==n.beginPosition?n.beginPosition*a:0,s._endGap=void 0!==n.endPosition?n.endPosition*a:0,s._flipFirst=void 0===n.flipFirst||n.flipFirst,s._pattern=new Z,s._pattern.init(n.positionArray,!1,!1),s._subPathLen=0,s._posCount=s._pattern.size(),s._isFirst=!0,s._prevPos=0,s}return(0,n.Z)(i,[{key:"processPath",value:function(e){if(this._pattern.isEmpty())return null;var t;if(this.iteratePath){var i=this._pattern.nextValue()*this._subPathLen,r=this._beginGap+i;t=r-this._prevPos,this._prevPos=r}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=e.pathLength()-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(e,this._pattern,!1))return null;this._pattern.reset();var n=this._pattern.nextValue()*this._subPathLen,a=this._beginGap+n;t=a-this._prevPos,this._prevPos=a,this.iteratePath=!0}var s=new N;if(!this._walker.nextPointAndAngle(t,s,O.END))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(s.pt[0]-this._offset*s.sa,s.pt[1]+this._offset*s.ca);var o,l,h=this._isFirst&&this._flipFirst;return this._angleToLine?(o=s.ca,l=s.sa):(o=1,l=0),h&&(o=-o,l=-l),this.internalPlacement.setRotateCS(o,l),this._isFirst=!1,this._posCount--,0===this._posCount&&(this.iteratePath=!1),this.internalPlacement}}]),i}(v),ue=i(84936),ce=512,fe=24,ve=1e-6,me=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new de(e,t,i,r,n)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();me.instance=null;var de=function(){function e(t,i,n,a,s){var o,l;if((0,r.Z)(this,e),this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._accelerationMap=null,this._testInsidePolygon=!1,this._verticalSubdivision=!0,this._stepX=Math.abs(null!==(o=i.stepX)&&void 0!==o?o:16)*n,this._stepY=Math.abs(null!==(l=i.stepY)&&void 0!==l?l:16)*n,this._stepX=Math.round(128*this._stepX)/128,this._stepY=Math.round(128*this._stepY)/128,0!==this._stepX&&0!==this._stepY){var h;if(this._gridType=null!==(h=i.gridType)&&void 0!==h?h:y.bj.Fixed,this._gridType===y.bj.Random){var u,f,v=null!==(u=i.seed)&&void 0!==u?u:13;this._randomLCG=new ue.Z(1*v),this._randomness=(null!==(f=i.randomness)&&void 0!==f?f:100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0,this._buildRandomValues()}else{var m,p,_,g;if(this._randomness=0,this._gridAngle=null!==(m=i.gridAngle)&&void 0!==m?m:0,this._shiftOddRows=null!==(p=i.shiftOddRows)&&void 0!==p&&p,this._offsetX=(null!==(_=i.offsetX)&&void 0!==_?_:0)*n,this._offsetY=(null!==(g=i.offsetY)&&void 0!==g?g:0)*n,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}if(this._graphicOriginX=0,this._graphicOriginY=0,null!=a){var P=a.split("/"),k=(0,d.Z)(P,4),M=k[0],x=k[1],b=k[2],S=k[3],C=parseFloat(M),w=parseFloat(x),I=parseFloat(b),L=parseFloat(S);this._graphicOriginX=-(L*Math.pow(2,C)+I)*ce,this._graphicOriginY=w*ce,this._testInsidePolygon=!0}this._internalPlacement=new c.u,this._calculateMinMax(t),this._geometryCursor=t}}return(0,n.Z)(e,[{key:"next",value:function(){return this._geometryCursor?this._nextInside():null}},{key:"_buildRandomValues",value:function(){if(!e._randValues){e._randValues=[];for(var t=0;t<fe;t++)for(var i=0;i<fe;i++)e._randValues.push(this._randomLCG.getFloat()),e._randValues.push(this._randomLCG.getFloat())}}},{key:"_calculateMinMax",value:function(e){var t,i,r,n,a,s,o,l,h,u,c,f,v,m;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,o=l=v=c=Number.MAX_VALUE,h=u=m=f=-Number.MAX_VALUE;var d=1!==this._cosAngle;for(e.reset();e.nextPath();)for(;e.nextPoint();)s=e.x,a=e.y,t=s-this._graphicOriginX-this._offsetX,i=a-this._graphicOriginY-this._offsetY,d?(r=this._cosAngle*t-this._sinAngle*i,n=this._sinAngle*t+this._cosAngle*i):(r=t,n=i),o=Math.min(o,r),h=Math.max(h,r),l=Math.min(l,n),u=Math.max(u,n),c=Math.min(c,a),f=Math.max(f,a),v=Math.min(v,s),m=Math.max(m,s);c=c!==Number.MAX_VALUE?c:-512-this._stepY,f=f!==-Number.MAX_VALUE?f:this._stepY,v=v!==Number.MAX_VALUE?v:-this._stepX;var y=f-c,p=(m=m!==-Number.MAX_VALUE?m:ce+this._stepX)-v;if(this._verticalSubdivision=y>=p,this._polygonMin=this._verticalSubdivision?c:v,this._testInsidePolygon){var _=0-this._graphicOriginX-this._offsetX-this._stepX,g=ce-this._graphicOriginX-this._offsetX+this._stepX,P=-512-this._graphicOriginY-this._offsetY-this._stepY,k=0-this._graphicOriginY-this._offsetY+this._stepY;if(d){var M=[[_,P],[_,k],[g,P],[g,k]];_=P=Number.MAX_VALUE,g=k=-Number.MAX_VALUE;for(var x=0,b=M;x<b.length;x++){var S=b[x],C=this._cosAngle*S[0]-this._sinAngle*S[1],w=this._sinAngle*S[0]+this._cosAngle*S[1];_=Math.min(_,C),g=Math.max(g,C),P=Math.min(P,w),k=Math.max(k,w)}}o=o!==Number.MAX_VALUE?Math.max(o,_):_,l=l!==Number.MAX_VALUE?Math.max(l,P):P,h=h!==-Number.MAX_VALUE?Math.min(h,g):g,u=u!==-Number.MAX_VALUE?Math.min(u,k):k}this._xMin=Math.round(o/this._stepX),this._xMax=Math.round(h/this._stepX),this._yMin=Math.round(l/this._stepY),this._yMax=Math.round(u/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1,this._buildAccelerationMap(e,v,m,c,f)}},{key:"_buildAccelerationMap",value:function(e,t,i,r,n){e.reset();var a=new Map,s=this._verticalSubdivision,o=s?n-r:i-t,l=Math.ceil(o/10);if(!(l<=1)){var h,u,c,f,v,m,d,y,p,_,g,P=Math.floor(o/l);for(l++,this._delta=P,s?(p=-512-this._stepY,_=this._stepY,g=r):(p=-this._stepX,_=ce+this._stepX,g=t);e.nextPath();)if(!(e.pathSize<2)&&e.nextPoint())for(h=e.x,u=e.y;e.nextPoint();h=c,u=f){if(c=e.x,f=e.y,s){if(u===f||u<p&&f<p||u>_&&f>_)continue;v=Math.min(u,f),m=Math.max(u,f)}else{if(h===c||h<p&&c<p||h>_&&c>_)continue;v=Math.min(h,c),m=Math.max(h,c)}for(;v<m;)ye(d=Math.floor((v-g)/P),h,u,c,f,a),v+=P;(y=Math.floor((m-g)/P))>d&&ye(y,h,u,c,f,a)}this._accelerationMap=a}}},{key:"_nextInside",value:function(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}var t=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(t+=.5*this._stepX);var i=this._currentY*this._stepY+this._offsetY,r=void 0,n=void 0;if(this._currentX++,this._gridType===y.bj.Random){var a=(this._currentX%fe+fe)%fe,s=(this._currentY%fe+fe)%fe;r=this._graphicOriginX+t+this._stepX*this._randomness*(.5-e._randValues[s*fe+a])*2/3,n=this._graphicOriginY+i+this._stepY*this._randomness*(.5-e._randValues[s*fe+a+1])*2/3}else r=this._graphicOriginX+this._cosAngle*t+this._sinAngle*i,n=this._graphicOriginY-this._sinAngle*t+this._cosAngle*i;if(!this._testInsidePolygon||this._isInsidePolygon(r,n,this._geometryCursor))return this._internalPlacement.setTranslate(r,n),this._internalPlacement}}},{key:"_isInsidePolygon",value:function(e,t,i){if(null==this._accelerationMap)return function(e,t,i){var r,n,a,s,o=0;for(e+=ve,t+=ve,i.reset();i.nextPath();)if(i.nextPoint())for(r=i.x,n=i.y;i.nextPoint();r=a,n=s)a=i.x,n>t!=(s=i.y)>t&&((a-r)*(t-n)-(s-n)*(e-r)>0?o++:o--);return 0!==o}(e,t,i);e+=ve,t+=ve;var r=this._verticalSubdivision,n=r?t:e,a=Math.floor((n-this._polygonMin)/this._delta),s=this._accelerationMap.get(a);if(!s)return!1;var o,l,h,u,c=0,f=(0,w.Z)(s);try{for(f.s();!(u=f.n()).done;){var v=u.value;if(o=v[0],l=v[1],r){if(o[1]>t==l[1]>t)continue;h=(l[0]-o[0])*(t-o[1])-(l[1]-o[1])*(e-o[0])}else{if(o[0]>e==l[0]>e)continue;h=(l[1]-o[1])*(e-o[0])-(l[0]-o[0])*(t-o[1])}h>0?c++:c--}}catch(m){f.e(m)}finally{f.f()}return 0!==c}}]),e}();function ye(e,t,i,r,n,a){var s=a.get(e);s||(s=[],a.set(e,s)),s.push([[t,i],[r,n]])}var pe=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new _e(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();pe.instance=null;var _e=function(e){(0,o.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,a){var s;return(0,r.Z)(this,i),(s=t.call(this,e))._curveHelper=new _,s._angleToLine=void 0===n.angleToLine||n.angleToLine,s._offset=void 0!==n.offset?n.offset*a:0,s._relativeTo=n.relativeTo,s._position=void 0!==n.startPointOffset?n.startPointOffset*a:0,s._epsilon=.001*a,s}return(0,n.Z)(i,[{key:"processPath",value:function(e){var t=this._position;if(this._relativeTo===y.CS.SegmentMidpoint){if(this.iteratePath||(this.iteratePath=!0),e.nextPoint())for(var i=[e.x,e.y],r=i[0],n=i[1],a=0,s=0;e.nextPoint();){a=e.x,s=e.y;var o=this._curveHelper.getLength(r,n,a,s);if(!(o<this._epsilon)){var l=.5+this._position/o,h=this._curveHelper.getAngleCS(r,n,a,s,l),u=(0,d.Z)(h,2),c=u[0],f=u[1],v=this._curveHelper.getCoord2D(r,n,a,s,l);return this.internalPlacement.setTranslate(v[0]-this._offset*f,v[1]+this._offset*c),this._angleToLine&&this.internalPlacement.setRotateCS(c,f),this.internalPlacement}r=a,n=s}return this.iteratePath=!1,null}var m=this._relativeTo===y.CS.LineEnd;return this.onLine(e,t,m)}},{key:"onLine",value:function(e,t,i){var r,n=!1;switch(this._relativeTo){case y.CS.LineMiddle:default:e.seekPathStart(),r=e.pathLength()/2+t;break;case y.CS.LineBeginning:r=t;break;case y.CS.LineEnd:r=t,n=!0}i?e.seekPathEnd():e.seekPathStart();var a=0;if(i?e.prevPoint():e.nextPoint())for(var s=[e.x,e.y],o=s[0],l=s[1],h=0,u=0;i?e.prevPoint():e.nextPoint();){h=e.x,u=e.y;var c=this._curveHelper.getLength(o,l,h,u);if(a+c>r){var f=(r-a)/c,v=this._curveHelper.getAngleCS(o,l,h,u,f),m=(0,d.Z)(v,2),p=m[0],_=m[1],g=this._curveHelper.getCoord2D(o,l,h,u,f),P=n?-this._offset:this._offset;return this.internalPlacement.setTranslate(g[0]-P*_,g[1]+P*p),this._angleToLine&&(n?this.internalPlacement.setRotateCS(-p,-_):this.internalPlacement.setRotateCS(p,_)),this.internalPlacement}o=h,l=u,a+=c}return null}}]),i}(v),ge=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new Pe(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();ge.instance=null;var Pe=function(e){(0,o.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,a){var s;return(0,r.Z)(this,i),(s=t.call(this,e))._curveHelper=new _,s._angleToLine=void 0===n.angleToLine||n.angleToLine,s._offset=void 0!==n.offset?n.offset*a:0,s._endPoints=void 0===n.placeOnEndPoints||n.placeOnEndPoints,s._controlPoints=void 0===n.placeOnControlPoints||n.placeOnControlPoints,s._regularVertices=void 0===n.placeOnRegularVertices||n.placeOnRegularVertices,s._tags=[],s._tagIterator=0,s}return(0,n.Z)(i,[{key:"processPath",value:function(e){if(this.iteratePath||(this._preparePath(e),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;var t=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(t[2]);var i=t[0],r=t[1];if(0!==this._offset){var n=Math.cos(t[2]),a=Math.sin(t[2]);i-=this._offset*a,r+=this._offset*n}return this.internalPlacement.setTranslate(i,r),this._tagIterator++,this.internalPlacement}},{key:"_preparePath",value:function(e){this._tags.length=0,this._tagIterator=0,e.seekPathStart();var t=e.isClosed(),i=0,r=!1,n=0,a=0;if(e.seekPathStart(),e.nextPoint())for(var s=e.x,o=e.y,l=e.getControlPoint(),h=!0,u=e.nextPoint();u;){var c=e.x,f=e.y,v=e.getControlPoint();(this._angleToLine||0!==this._offset)&&(n=this._curveHelper.getAngle(s,o,c,f,0)),h?(h=!1,t?(i=n,r=l):(this._endPoints||this._controlPoints&&l)&&this._tags.push([s,o,n])):l?this._controlPoints&&this._tags.push([s,o,ke(a,n)]):this._regularVertices&&this._tags.push([s,o,ke(a,n)]),(this._angleToLine||0!==this._offset)&&(a=this._curveHelper.getAngle(s,o,c,f,1)),(u=e.nextPoint())||(t?v||r?this._controlPoints&&this._tags.push([c,f,ke(a,i)]):this._regularVertices&&this._tags.push([c,f,ke(a,i)]):(this._endPoints||this._controlPoints&&v)&&this._tags.push([c,f,a])),s=c,o=f,l=v}this._tagIterator=0}}]),i}(v);function ke(e,t){for(var i=Math.PI;Math.abs(t-e)>i+2e-15;)t-e>i?t-=2*i:t+=2*i;return(e+t)/2}var Me=i(4954),xe=i(36372),be=function(){function e(){(0,r.Z)(this,e)}return(0,n.Z)(e,[{key:"execute",value:function(e,t,i,r,n){return new Se(e,t,i)}}],[{key:"local",value:function(){return null===e.instance&&(e.instance=new e),e.instance}}]),e}();be.instance=null;var Se=function(){function e(t,i,n){(0,r.Z)(this,e),this._geometryCursor=t,this._offsetX=void 0!==i.offsetX?i.offsetX*n:0,this._offsetY=void 0!==i.offsetY?i.offsetY*n:0,this._method=void 0!==i.method?i.method:y.Lh.OnPolygon,this._internalPlacement=new c.u}return(0,n.Z)(e,[{key:"next",value:function(){var e=this._geometryCursor;return this._geometryCursor=null,e?this._polygonCenter(e):null}},{key:"_polygonCenter",value:function(e){var t=!1;switch(this._method){case y.Lh.CenterOfMass:var i=(0,Me.NA)(e);i&&(this._internalPlacement.setTranslate(i[0]+this._offsetX,i[1]+this._offsetY),t=!0);break;case y.Lh.BoundingBoxCenter:var r=(0,$.Cs)(e);r&&(this._internalPlacement.setTranslate((r[2]+r[0])/2+this._offsetX,(r[3]+r[1])/2+this._offsetY),t=!0);break;case y.Lh.OnPolygon:default:var n=(0,xe.r)(e);null!==n&&(this._internalPlacement.setTranslate(n[0]+this._offsetX,n[1]+this._offsetY),t=!0)}return t?this._internalPlacement:null}}]),e}();function Ce(e){if(!e)return null;switch(e.type){case"CIMGeometricEffectAddControlPoints":return a.local();case"CIMGeometricEffectArrow":return k.local();case"CIMGeometricEffectBuffer":return S.local();case"CIMGeometricEffectControlMeasureLine":return I.local();case"CIMGeometricEffectCut":return z.local();case"CIMGeometricEffectDashes":return E.local();case"CIMGeometricEffectDonut":return G.local();case"CIMGeometricEffectJog":return H.local();case"CIMGeometricEffectMove":return Y.local();case"CIMGeometricEffectOffset":return B.local();case"CIMGeometricEffectReverse":return J.local();case"CIMGeometricEffectRotate":return K.local();case"CIMGeometricEffectScale":return ee.local();case"CIMGeometricEffectWave":return ie.local()}return null}function we(e){if(!e)return null;switch(e.type){case"CIMMarkerPlacementAlongLineSameSize":return ne.local();case"CIMMarkerPlacementAtExtremities":return se.local();case"CIMMarkerPlacementAtRatioPositions":return le.local();case"CIMMarkerPlacementInsidePolygon":return me.local();case"CIMMarkerPlacementOnLine":return pe.local();case"CIMMarkerPlacementOnVertices":return ge.local();case"CIMMarkerPlacementPolygonCenter":return be.local()}return null}},84284:function(e,t,i){i.d(t,{u:function(){return a}});var r=i(15671),n=i(43144),a=function(){function e(){(0,r.Z)(this,e),this.setIdentity()}return(0,n.Z)(e,[{key:"getAngle",value:function(){return(null==this.rz||0===this.rz&&1!==this.rzCos&&0!==this.rzSin)&&(this.rz=Math.atan2(this.rzSin,this.rzCos)),this.rz}},{key:"setIdentity",value:function(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rzCos=1,this.rzSin=0}},{key:"setTranslate",value:function(e,t){this.tx=e,this.ty=t}},{key:"setTranslateZ",value:function(e){this.tz=e}},{key:"setRotateCS",value:function(e,t){this.rz=void 0,this.rzCos=e,this.rzSin=t}},{key:"setRotate",value:function(e){this.rz=e,this.rzCos=void 0,this.rzSin=void 0}},{key:"setRotateY",value:function(e){this.ry=e}},{key:"setScale",value:function(e){this.s=e}},{key:"setMeasure",value:function(e){this.m=e}}]),e}()},66726:function(e,t,i){i.d(t,{cD:function(){return U},uQ:function(){return Y},Tu:function(){return V},zA:function(){return H},rC:function(){return G},w7:function(){return E},v$:function(){return R},KM:function(){return F},zV:function(){return X},x1:function(){return J},et:function(){return q},g:function(){return j}});var r=i(88301),n=i(61120),a=i(60136),s=i(29388),o=i(29439),l=i(37762),h=i(15671),u=i(43144),c=i(75746),f=i(82272),v=i(84652),m=i(32718),d=i(13005),y=i(17842),p=i(23895),_=i(65156),g=i(376),P=i(4954),k=i(77981),M=i(35747),x=function(){function e(){(0,h.Z)(this,e)}return(0,u.Z)(e,[{key:"applyColorSubstituition",value:function(e,t){if(!t)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));var i=e.width,r=e.height,n=this._rasterizationCanvas,a=n.getContext("2d",{willReadFrequently:!0});e!==n&&(n.width=i,n.height=r,a.drawImage(e,0,0,i,r));var s=a.getImageData(0,0,i,r).data;if(t){var h,u=(0,l.Z)(t);try{for(u.s();!(h=u.n()).done;){var c=h.value;if(c&&c.oldColor&&4===c.oldColor.length&&c.newColor&&4===c.newColor.length){var f=(0,o.Z)(c.oldColor,4),v=f[0],m=f[1],d=f[2],y=f[3],p=(0,o.Z)(c.newColor,4),_=p[0],g=p[1],P=p[2],k=p[3];if(v===_&&m===g&&d===P&&y===k)continue;for(var M=0;M<s.length;M+=4)v===s[M]&&m===s[M+1]&&d===s[M+2]&&y===s[M+3]&&(s[M]=_,s[M+1]=g,s[M+2]=P,s[M+3]=k)}}}catch(b){u.e(b)}finally{u.f()}}var x=new ImageData(s,i,r);return a.putImageData(x,0,0),n}},{key:"tintImageData",value:function(e,t){if(!t||t.length<4)return e;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));var i=e.width,r=e.height,n=this._rasterizationCanvas,a=n.getContext("2d",{willReadFrequently:!0});e!==n&&(n.width=i,n.height=r,a.drawImage(e,0,0,i,r));for(var s=a.getImageData(0,0,i,r),o=new Uint8Array(s.data),l=[t[0]/255,t[1]/255,t[2]/255,t[3]/255],h=0;h<o.length;h+=4)o[h]*=l[0],o[h+1]*=l[1],o[h+2]*=l[2],o[h+3]*=l[3];var u=new ImageData(new Uint8ClampedArray(o.buffer),i,r);return a.putImageData(u,0,0),n}}]),e}(),b=i(63695),S=i(84284),C=i(48202);function w(e){var t=e.getFrame(0);if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement)return t;var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var r=i.getContext("2d");return t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0),i}var I=i(691),L=i(22532),z=i(31027),O=i(38999),A=i(94109),Z=i(47975),N=Math.PI/180,T=m.Z.getLogger("esri.symbols.cim.CIMSymbolDrawHelper"),F=4,E=10,R=10,G=4,X=10,H=function(){function e(t){(0,h.Z)(this,e),this._t=t}return(0,u.Z)(e,[{key:"clone",value:function(){return new e(this._t.slice())}},{key:"transform",value:function(e){var t=this._t;return[t[0]*e[0]+t[1]*e[1]+t[2],t[3]*e[0]+t[4]*e[1]+t[5]]}},{key:"scale",value:function(e,t){var i=this._t;return i[0]*=e,i[1]*=e,i[2]*=e,i[3]*=t,i[4]*=t,i[5]*=t,this}},{key:"scaleRatio",value:function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}},{key:"translate",value:function(e,t){var i=this._t;return i[2]+=e,i[5]+=t,this}},{key:"rotate",value:function(t){return e.multiply(this,e.createRotate(t),this)}},{key:"angle",value:function(){var e=this._t[0],t=this._t[3],i=Math.sqrt(e*e+t*t);return[e/i,t/i]}},{key:"invert",value:function(){var t=this._t,i=t[0]*t[4]-t[1]*t[3];if(0===i)return new e([0,0,0,0,0,0]);i=1/i;var r=(t[1]*t[5]-t[2]*t[4])*i,n=(t[2]*t[3]-t[0]*t[5])*i;return new e([t[4]*i,-t[1]*i,r,-t[3]*i,t[0]*i,n])}}],[{key:"createIdentity",value:function(){return new e([1,0,0,0,1,0])}},{key:"createScale",value:function(t,i){return new e([t,0,0,0,i,0])}},{key:"createTranslate",value:function(t,i){return new e([0,0,t,0,0,i])}},{key:"createRotate",value:function(t){var i=Math.cos(t),r=Math.sin(t);return new e([i,-r,0,r,i,0])}},{key:"multiply",value:function(e,t,i){var r=e._t,n=t._t,a=r[0]*n[0]+r[3]*n[1],s=r[1]*n[0]+r[4]*n[1],o=r[2]*n[0]+r[5]*n[1]+n[2],l=r[0]*n[3]+r[3]*n[4],h=r[1]*n[3]+r[4]*n[4],u=r[2]*n[3]+r[5]*n[4]+n[5],c=i._t;return c[0]=a,c[1]=s,c[2]=o,c[3]=l,c[4]=h,c[5]=u,i}}]),e}(),D=function(){function e(t,i){(0,h.Z)(this,e),this._resourceManager=t,this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._placementPool=new d.Z(S.u,void 0,void 0,100),this._earlyReturn=!1,this._mapRotation=0,this._transfos.push(i||H.createIdentity()),this._sizeTransfos.push(i?i.scaleRatio():1)}return(0,u.Z)(e,[{key:"setTransform",value:function(e,t){this._transfos=[e||H.createIdentity()],this._sizeTransfos=[t||(e?e.scaleRatio():1)]}},{key:"setGeomUnitsPerPoint",value:function(e){this._geomUnitsPerPoint=e}},{key:"transformPt",value:function(e){return this._transfos[this._transfos.length-1].transform(e)}},{key:"transformSize",value:function(e){return e*this._sizeTransfos[this._sizeTransfos.length-1]}},{key:"reverseTransformPt",value:function(e){return this._transfos[this._transfos.length-1].invert().transform(e)}},{key:"reverseTransformSize",value:function(e){return e/this._sizeTransfos[this._sizeTransfos.length-1]}},{key:"getTransformAngle",value:function(){return this._transfos[this._transfos.length-1].angle()}},{key:"geomUnitsPerPoint",value:function(){return this.isEmbedded()?1:this._geomUnitsPerPoint}},{key:"isEmbedded",value:function(){return this._transfos.length>1}},{key:"back",value:function(){return this._transfos[this._transfos.length-1]}},{key:"push",value:function(e,t){var i=t?e.scaleRatio():1;H.multiply(e,this.back(),e),this._transfos.push(e),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*i)}},{key:"pop",value:function(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}},{key:"drawSymbol",value:function(e,t,i){if(e)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(e,t);break;case"CIMTextSymbol":this.drawTextSymbol(e,t,i)}}},{key:"drawMultiLayerSymbol",value:function(e,t){if(e&&t){var i=e.symbolLayers;if(i){var r=e.effects;if(r&&r.length>0){var n=this.executeEffects(r,t);if(n)for(var a=n.next();a;)this.drawSymbolLayers(i,a.asJSON()),a=n.next()}else this.drawSymbolLayers(i,t)}}}},{key:"executeEffects",value:function(e,t){var i,r=this._resourceManager.geometryEngine,n=new M.z(p.z.fromJSONCIM(t)),a=(0,l.Z)(e);try{for(a.s();!(i=a.n()).done;){var s=i.value,o=(0,b.h)(s);o&&(n=o.execute(n,s,this.geomUnitsPerPoint(),null,r))}}catch(h){a.e(h)}finally{a.f()}return n}},{key:"drawSymbolLayers",value:function(e,t){for(var i=e.length;i--;){var r=e[i];if(r&&!1!==r.enable){var n=r.effects;if(n&&n.length>0){var a=this.executeEffects(n,t);if(a)for(var s=null;(s=a.next())&&(this.drawSymbolLayer(r,s.asJSON()),!this._earlyReturn););}else this.drawSymbolLayer(r,t);if(this._earlyReturn)return}}}},{key:"drawSymbolLayer",value:function(e,t){switch(e.type){case"CIMSolidFill":this.drawSolidFill(t,e.color);break;case"CIMHatchFill":this.drawHatchFill(t,e);break;case"CIMPictureFill":this.drawPictureFill(t,e);break;case"CIMGradientFill":this.drawGradientFill(t,e);break;case"CIMSolidStroke":this.drawSolidStroke(t,e.color,e.width,e.capStyle,e.joinStyle,e.miterLimit);break;case"CIMPictureStroke":this.drawPictureStroke(t,e);break;case"CIMGradientStroke":this.drawGradientStroke(t,e);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(e,t)}}},{key:"drawHatchFill",value:function(e,t){var i=this._buildHatchPolyline(t,e,this.geomUnitsPerPoint());i&&(this.pushClipPath(e),this.drawMultiLayerSymbol(t.lineSymbol,i),this.popClipPath())}},{key:"drawPictureFill",value:function(e,t){}},{key:"drawGradientFill",value:function(e,t){}},{key:"drawPictureStroke",value:function(e,t){}},{key:"drawGradientStroke",value:function(e,t){}},{key:"drawMarkerLayer",value:function(e,t){var i=e.markerPlacement;if(i){var r=(0,b.W)(i);if(r){var n="CIMMarkerPlacementInsidePolygon"===i.type||"CIMMarkerPlacementPolygonCenter"===i.type&&i.clipAtBoundary;n&&this.pushClipPath(t);var a=r.execute(p.z.fromJSONCIM(t),i,this.geomUnitsPerPoint(),null,this._resourceManager.geometryEngine);if(a)for(var s=null;(s=a.next())&&(this.drawMarker(e,s),!this._earlyReturn););n&&this.popClipPath()}}else{var h=this._placementPool.acquire();if((0,k.wp)(t))h.tx=t.x,h.ty=t.y,this.drawMarker(e,h);else if((0,k.oU)(t)){var u,c=(0,P.tO)(t);c&&(u=(0,o.Z)(c,2),h.tx=u[0],h.ty=u[1],this.drawMarker(e,h))}else{var f,v=(0,l.Z)(t.points);try{for(v.s();!(f=v.n()).done;){var m=f.value;if(h.tx=m[0],h.ty=m[1],this.drawMarker(e,h),this._earlyReturn)break}}catch(d){v.e(d)}finally{v.f()}}this._placementPool.release(h)}}},{key:"drawMarker",value:function(e,t){switch(e.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(e,t);break;case"CIMVectorMarker":this.drawVectorMarker(e,t)}}},{key:"drawPictureMarker",value:function(e,t){if(e){var i=this._resourceManager.getResource(e.url),r=(0,z.NA)(e.size,E);if(!(null==i||r<=0)){var n=i.width,a=i.height;if(n&&a){var s=n/a,o=(0,z.NA)(e.scaleX,1),l=H.createIdentity(),h=e.anchorPoint;if(h){var u=h.x,c=h.y;"Absolute"!==e.anchorPointUnits&&(u*=r*s*o,c*=r),l.translate(-u,-c)}var f=(0,z.NA)(e.rotation);e.rotateClockwise&&(f=-f),this._mapRotation&&(f+=this._mapRotation),f&&l.rotate(f*N);var v=(0,z.NA)(e.offsetX),m=(0,z.NA)(e.offsetY);if(v||m){if(this._mapRotation){var d=N*this._mapRotation,y=Math.cos(d),p=Math.sin(d),_=v*p+m*y;v=v*y-m*p,m=_}l.translate(v,m)}var g=this.geomUnitsPerPoint();1!==g&&l.scale(g,g);var P=t.getAngle();P&&l.rotate(P),l.translate(t.tx,t.ty),this.push(l,!1),this.drawImage(e,r),this.pop()}}}}},{key:"drawVectorMarker",value:function(e,t){if(e){var i=e.markerGraphics;if(i){var r=(0,z.NA)(e.size,E),n=e.frame,a=n?n.ymax-n.ymin:0,s=r&&a?r/a:1,o=H.createIdentity();n&&o.translate(.5*-(n.xmax+n.xmin),.5*-(n.ymax+n.ymin));var h=e.anchorPoint;if(h){var u=h.x,c=h.y;"Absolute"!==e.anchorPointUnits?n&&(u*=n.xmax-n.xmin,c*=n.ymax-n.ymin):(u/=s,c/=s),o.translate(-u,-c)}1!==s&&o.scale(s,s);var f=(0,z.NA)(e.rotation);e.rotateClockwise&&(f=-f),this._mapRotation&&(f+=this._mapRotation),f&&o.rotate(f*N);var v=(0,z.NA)(e.offsetX),m=(0,z.NA)(e.offsetY);if(v||m){if(this._mapRotation){var d=N*this._mapRotation,y=Math.cos(d),p=Math.sin(d),_=v*p+m*y;v=v*y-m*p,m=_}o.translate(v,m)}var g=this.geomUnitsPerPoint();1!==g&&o.scale(g,g);var P=t.getAngle();P&&o.rotate(P),o.translate(t.tx,t.ty),this.push(o,e.scaleSymbolsProportionally);var k,M=(0,l.Z)(i);try{for(M.s();!(k=M.n()).done;){var x=k.value;if(null!==x&&void 0!==x&&x.symbol&&x.geometry||T.error("Invalid marker graphic",x),this.drawSymbol(x.symbol,x.geometry,x.textString),this._earlyReturn)break}}catch(b){M.e(b)}finally{M.f()}this.pop()}}}},{key:"drawTextSymbol",value:function(e,t,i){if(e&&(0,k.wp)(t)&&!((0,z.NA)(e.height,X)<=0)){var r=H.createIdentity(),n=(0,z.NA)(e.angle);(n=-n)&&r.rotate(n*N);var a=(0,z.NA)(e.offsetX),s=(0,z.NA)(e.offsetY);(a||s)&&r.translate(a,s);var o=this.geomUnitsPerPoint();1!==o&&r.scale(o,o),r.translate(t.x,t.y),this.push(r,!1),this.drawText(e,i),this.pop()}}},{key:"_buildHatchPolyline",value:function(e,t,i){var r=(0,z.NA)(e.separation,G)*i,n=(0,z.NA)(e.rotation);if(0===r)return null;r<0&&(r=-r);for(var a=0,s=.5*r;a>s;)a-=r;for(;a<-s;)a+=r;var o=(0,_.Ue)();(0,g.$P)(o,t),o[0]-=s,o[1]-=s,o[2]+=s,o[3]+=s;for(var l=[[o[0],o[1]],[o[0],o[3]],[o[2],o[3]],[o[2],o[1]]];n>180;)n-=180;for(;n<0;)n+=180;var h,u,c,f,v=Math.cos(n*N),m=Math.sin(n*N),d=-r*m,y=r*v;a=(0,z.NA)(e.offsetX)*i*m-(0,z.NA)(e.offsetY)*i*v,h=c=Number.MAX_VALUE,u=f=-Number.MAX_VALUE;for(var p=0,P=l;p<P.length;p++){var k=P[p],M=k[0],x=k[1],b=v*M+m*x,S=-m*M+v*x;h=Math.min(h,b),c=Math.min(c,S),u=Math.max(u,b),f=Math.max(f,S)}for(var C=v*h-m*(c=Math.floor(c/r)*r)-d*a/r,w=m*h+v*c-y*a/r,I=v*u-m*c-d*a/r,L=m*u+v*c-y*a/r,O=1+Math.round((f-c)/r),A=[],Z=0;Z<O;Z++)C+=d,w+=y,I+=d,L+=y,A.push([[C,w],[I,L]]);return{paths:A}}}]),e}(),Y=function(e){(0,a.Z)(i,e);var t=(0,s.Z)(i);function i(e,r){var n;return(0,h.Z)(this,i),(n=t.call(this,e,r)).reset(),n}return(0,u.Z)(i,[{key:"reset",value:function(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}},{key:"envelope",value:function(){return new I.Z(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}},{key:"bounds",value:function(){return(0,_.al)(this._xmin,this._ymin,this._xmax,this._ymax)}},{key:"drawSolidFill",value:function(e){if(e&&!(this._clipCount>0))if((0,k.oU)(e))this._processPath(e.rings,0);else if((0,k.l9)(e))this._processPath(e.paths,0);else if((0,k.YX)(e)){var t=W(e);t&&this._processPath(t.rings,0)}else console.error("drawSolidFill Unexpected geometry type!")}},{key:"drawSolidStroke",value:function(e,t,i){if(e&&!(this._clipCount>0)){var r=.5*this.transformSize((0,z.NA)(i,F));if((0,k.oU)(e))this._processPath(e.rings,r);else if((0,k.l9)(e))this._processPath(e.paths,r);else if((0,k.YX)(e)){var n=W(e);n&&this._processPath(n.rings,r)}else console.error("drawSolidStroke unexpected geometry type!")}}},{key:"drawMarkerLayer",value:function(e,t){(0,k.oU)(t)&&e.markerPlacement&&("CIMMarkerPlacementInsidePolygon"===e.markerPlacement.type||"CIMMarkerPlacementPolygonCenter"===e.markerPlacement.type&&e.markerPlacement.clipAtBoundary)?this._processPath(t.rings,0):(0,r.Z)((0,n.Z)(i.prototype),"drawMarkerLayer",this).call(this,e,t)}},{key:"drawHatchFill",value:function(e,t){this.drawSolidFill(e)}},{key:"drawPictureFill",value:function(e,t){this.drawSolidFill(e)}},{key:"drawGradientFill",value:function(e,t){this.drawSolidFill(e)}},{key:"drawPictureStroke",value:function(e,t){this.drawSolidStroke(e,null,t.width)}},{key:"drawGradientStroke",value:function(e,t){this.drawSolidStroke(e,null,t.width)}},{key:"pushClipPath",value:function(e){this.drawSolidFill(e),this._clipCount++}},{key:"popClipPath",value:function(){this._clipCount--}},{key:"drawImage",value:function(e,t){var i=e.url,r=(0,z.NA)(e.scaleX,1),n=r*t,a=t,s=this._resourceManager.getResource(i);t||null==s||(n=r*s.width,a=s.height),this._merge(this.transformPt([-n/2,-a/2]),0),this._merge(this.transformPt([-n/2,a/2]),0),this._merge(this.transformPt([n/2,-a/2]),0),this._merge(this.transformPt([n/2,a/2]),0)}},{key:"drawText",value:function(e,t){if(t&&0!==t.length){this._textRasterizer||(this._textRasterizer=new L.Z);var i=$(e),r=this._textRasterizer.computeTextSize(t,i),n=(0,o.Z)(r,2),a=n[0],s=n[1],l=0;switch(e.horizontalAlignment){case"Left":l=a/2;break;case"Right":l=-a/2}var h=0;switch(e.verticalAlignment){case"Bottom":h=s/2;break;case"Top":h=-s/2;break;case"Baseline":h=s/6}this._merge(this.transformPt([-a/2+l,-s/2+h]),0),this._merge(this.transformPt([-a/2+l,s/2+h]),0),this._merge(this.transformPt([a/2+l,-s/2+h]),0),this._merge(this.transformPt([a/2+l,s/2+h]),0)}}},{key:"_processPath",value:function(e,t){if(e){var i,r=(0,l.Z)(e);try{for(r.s();!(i=r.n()).done;){var n=i.value,a=n?n.length:0;if(a>1){this._merge(this.transformPt(n[0]),t);for(var s=1;s<a;s++)this._merge(this.transformPt(n[s]),t)}}}catch(o){r.e(o)}finally{r.f()}}}},{key:"_merge",value:function(e,t){e[0]-t<this._xmin&&(this._xmin=e[0]-t),e[0]+t>this._xmax&&(this._xmax=e[0]+t),e[1]-t<this._ymin&&(this._ymin=e[1]-t),e[1]+t>this._ymax&&(this._ymax=e[1]+t)}}]),i}(D),V=function(e){(0,a.Z)(i,e);var t=(0,s.Z)(i);function i(){var e;return(0,h.Z)(this,i),(e=t.apply(this,arguments))._searchPoint=[0,0],e._searchDistPoint=0,e._textInfo=null,e}return(0,u.Z)(i,[{key:"hitTest",value:function(e,t,i,r,n,a){var s=a*(0,y.F2)(1);this.setTransform(),this.setGeomUnitsPerPoint(s),this._searchPoint=[(e[0]+e[2])/2,(e[1]+e[3])/2],this._searchDistPoint=(e[2]-e[0])/2/s,this._textInfo=r;var o=t&&("CIMPointSymbol"===t.type&&"Map"!==t.angleAlignment||"CIMTextSymbol"===t.type);return this._mapRotation=o?n:0,this._earlyReturn=!1,this.drawSymbol(t,i),this._earlyReturn}},{key:"drawSolidFill",value:function(e,t){this._hitTestFill(e)}},{key:"drawHatchFill",value:function(e,t){this._hitTestFill(e)}},{key:"drawPictureFill",value:function(e,t){this._hitTestFill(e)}},{key:"drawGradientFill",value:function(e,t){this._hitTestFill(e)}},{key:"drawSolidStroke",value:function(e,t,i,r,n,a){this._hitTestStroke(e,i)}},{key:"drawPictureStroke",value:function(e,t){this._hitTestStroke(e,t.width)}},{key:"drawGradientStroke",value:function(e,t){this._hitTestStroke(e,t.width)}},{key:"drawMarkerLayer",value:function(e,t){e.markerPlacement&&("CIMMarkerPlacementInsidePolygon"===e.markerPlacement.type||"CIMMarkerPlacementPolygonCenter"===e.markerPlacement.type&&e.markerPlacement.clipAtBoundary)?this._hitTestFill(t):(0,r.Z)((0,n.Z)(i.prototype),"drawMarkerLayer",this).call(this,e,t)}},{key:"pushClipPath",value:function(e){}},{key:"popClipPath",value:function(){}},{key:"drawImage",value:function(e,t){var i=e.url,r=(0,z.NA)(e.scaleX,1),n=this._resourceManager.getResource(i);if(null!=n&&0!==n.height&&0!==t){var a=t*this.geomUnitsPerPoint(),s=a*r*(n.width/n.height),o=this.reverseTransformPt(this._searchPoint),l=this._searchDistPoint;Math.abs(o[0])<s/2+l&&Math.abs(o[1])<a/2+l&&(this._earlyReturn=!0)}}},{key:"drawText",value:function(e,t){var i,r,n=this._textInfo;if(n){var a=n.get(e);if(a){var s=a.text,o=a.mosaicItem;if(null!==o&&void 0!==o&&null!==(i=o.glyphMosaicItems)&&void 0!==i&&i.length){var h,u=(0,z.NA)(e.height,X),f=e.lineGapType,v=e.lineGap,m=f?q(f,(0,z.NA)(v),u):0,d=(0,c.E)(s)[1],y=o.glyphMosaicItems,p="CIMBackgroundCallout"===(null===(r=e.callout)||void 0===r?void 0:r.type),_=(0,Z.Nr)(y,d,{scale:u/A.iD,angle:0,xOffset:0,yOffset:0,hAlign:J(e.horizontalAlignment),vAlign:j(e.verticalAlignment),maxLineWidth:512,lineHeight:A.uk*Math.max(.25,Math.min(m||1,4)),decoration:e.font.decoration||"none",isCIM:!0,hasBackground:p}),g=this.reverseTransformPt(this._searchPoint),P=g[0],k=g[1],M=(0,l.Z)(_.glyphs);try{for(M.s();!(h=M.n()).done;){var x=h.value;if(P>x.xTopLeft&&P<x.xBottomRight&&k>-x.yBottomRight&&k<-x.yTopLeft){this._earlyReturn=!0;break}}}catch(b){M.e(b)}finally{M.f()}}}}}},{key:"_hitTestFill",value:function(e){var t=null;if((0,k.YX)(e)){var i=e;t=[[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]}else if((0,k.oU)(e))t=e.rings;else{if(!(0,k.l9)(e))return;t=e.paths}var r=this.reverseTransformPt(this._searchPoint);if(this._pointInPolygon(r,t)&&(this._earlyReturn=!0),!this._earlyReturn){var n=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(r,t,n)&&(this._earlyReturn=!0)}}},{key:"_hitTestStroke",value:function(e,t){var i=null;if((0,k.YX)(e)){var r=e;i=[[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]]]}else if((0,k.oU)(e))i=e.rings;else{if(!(0,k.l9)(e))return;i=e.paths}var n=this.reverseTransformPt(this._searchPoint),a=(0,z.NA)(t,F)*this.geomUnitsPerPoint(),s=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(n,i,a/2+s)&&(this._earlyReturn=!0)}},{key:"_pointInPolygon",value:function(e,t){var i,r=0,n=(0,l.Z)(t);try{for(n.s();!(i=n.n()).done;)for(var a=i.value,s=a.length,o=1;o<s;o++){var h=a[o-1],u=a[o];h[1]>e[1]!=u[1]>e[1]&&((u[0]-h[0])*(e[1]-h[1])-(u[1]-h[1])*(e[0]-h[0])>0?r++:r--)}}catch(c){n.e(c)}finally{n.f()}return 0!==r}},{key:"_nearLine",value:function(e,t,i){var r,n=(0,l.Z)(t);try{for(n.s();!(r=n.n()).done;)for(var a=r.value,s=a.length,o=1;o<s;o++){var h=a[o-1],u=a[o],c=(u[0]-h[0])*(u[0]-h[0])+(u[1]-h[1])*(u[1]-h[1]);if(0!==c){c=Math.sqrt(c);var f=((u[0]-h[0])*(e[1]-h[1])-(u[1]-h[1])*(e[0]-h[0]))/c;if(Math.abs(f)<i){var v=((u[0]-h[0])*(e[0]-h[0])+(u[1]-h[1])*(e[1]-h[1]))/c;if(v>-i&&v<c+i)return!0}}}}catch(m){n.e(m)}finally{n.f()}return!1}}]),i}(D),U=function(e){(0,a.Z)(i,e);var t=(0,s.Z)(i);function i(e,r,n,a){var s;return(0,h.Z)(this,i),(s=t.call(this,r,n))._applyAdditionalRenderProps=a,s._colorSubstitutionHelper=new x,s._ctx=e,s}return(0,u.Z)(i,[{key:"drawSolidFill",value:function(e,t){var i;if(e){if((0,k.oU)(e))this._buildPath(e.rings,!0);else if((0,k.l9)(e))this._buildPath(e.paths,!0);else if((0,k.YX)(e))this._buildPath(W(e).rings,!0);else{if(!(0,k.aW)(e))return;console.log("CanvasDrawHelper.drawSolidFill - No implementation!")}var r=this._ctx;r.fillStyle="string"==typeof t?t:"rgba("+Math.round(t[0])+","+Math.round(t[1])+","+Math.round(t[2])+","+(null!==(i=t[3])&&void 0!==i?i:255)/255+")",r.fill("evenodd")}}},{key:"drawSolidStroke",value:function(e,t,i,r,n,a){var s;if(e&&t&&0!==i){if((0,k.oU)(e))this._buildPath(e.rings,!0);else if((0,k.l9)(e))this._buildPath(e.paths,!1);else{if(!(0,k.YX)(e))return void console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");this._buildPath(W(e).rings,!0)}var o=this._ctx;o.strokeStyle="string"==typeof t?t:"rgba("+Math.round(t[0])+","+Math.round(t[1])+","+Math.round(t[2])+","+(null!==(s=t[3])&&void 0!==s?s:255)/255+")",o.lineWidth=Math.max(this.transformSize(i),.5),this._setCapStyle(r),this._setJoinStyle(n),o.miterLimit=a,o.stroke()}}},{key:"pushClipPath",value:function(e){if(this._ctx.save(),(0,k.oU)(e))this._buildPath(e.rings,!0);else if((0,k.l9)(e))this._buildPath(e.paths,!0);else{if(!(0,k.YX)(e))return;this._buildPath(W(e).rings,!0)}this._ctx.clip("evenodd")}},{key:"popClipPath",value:function(){this._ctx.restore()}},{key:"drawImage",value:function(e,t){var i=e.colorSubstitutions,r=e.url,n=e.tintColor,a=(0,z.NA)(e.scaleX,1),s=this._resourceManager.getResource(r);if(null!=s){var l=t*(s.width/s.height),h=t;t||(l=s.width,h=s.height);var u=(0,z.TB)(r)||"src"in s&&(0,z.TB)(s.src),c="getFrame"in s?w(s):s;i&&(c=this._colorSubstitutionHelper.applyColorSubstituition(c,i)),this._applyAdditionalRenderProps&&!u&&n&&(c=this._colorSubstitutionHelper.tintImageData(c,n));var f=this.transformPt([0,0]),v=this.getTransformAngle(),m=(0,o.Z)(v,2),d=m[0],y=m[1],p=this.transformSize(1),_=this._ctx;_.save(),_.setTransform({m11:a*p*d,m12:a*p*y,m21:-p*y,m22:p*d,m41:f[0],m42:f[1]}),_.drawImage(c,-l/2,-h/2,l,h),_.restore()}}},{key:"drawText",value:function(e,t){if(t&&0!==t.length){this._textRasterizer||(this._textRasterizer=new L.Z);var i=$(e);i.size*=this.transformSize((0,y.Wz)(1));var r=this._textRasterizer.rasterizeText(t,i);if(r){var n=r.size,a=r.anchorX,s=r.anchorY,l=r.canvas,h=n[0]*(a+.5),u=n[1]*(s-.5),c=this._ctx,f=this.transformPt([0,0]),v=this.getTransformAngle(),m=(0,o.Z)(v,2),d=m[0],p=m[1];c.save(),c.setTransform({m11:1*d,m12:1*p,m21:-1*p,m22:1*d,m41:f[0]-1*h,m42:f[1]+1*u}),c.drawImage(l,0,0),c.restore()}}}},{key:"drawPictureFill",value:function(e,t){if(e){var i=t.colorSubstitutions,r=t.height,n=t.offsetX,a=t.offsetY,s=t.rotation,o=t.scaleX,l=t.tintColor,h=t.url,u=this._resourceManager.getResource(h);if(null!=u){if((0,k.oU)(e))this._buildPath(e.rings,!0);else if((0,k.l9)(e))this._buildPath(e.paths,!0);else if((0,k.YX)(e))this._buildPath(W(e).rings,!0);else{if(!(0,k.aW)(e))return;console.log("CanvasDrawHelper.drawPictureFill - No implementation!")}var c,f=this._ctx,v=(0,z.TB)(h)||"src"in u&&(0,z.TB)(u.src),m="getFrame"in u?w(u):u;if(i&&(m=this._colorSubstitutionHelper.applyColorSubstituition(m,i)),this._applyAdditionalRenderProps){v||l&&(m=this._colorSubstitutionHelper.tintImageData(m,l)),c=f.createPattern(m,"repeat");var d=this.transformSize(1);s||(s=0),n?n*=d:n=0,a?a*=d:a=0,r&&(r*=d);var y=r?r/u.height:1,p=o&&r?o*r/u.width:1;if(0!==s||1!==y||1!==p||0!==n||0!==a){var _=new DOMMatrix;_.rotateSelf(0,0,-s).translateSelf(n,a).scaleSelf(p,y,1),c.setTransform(_)}}else c=f.createPattern(m,"repeat");f.save(),f.fillStyle=c,f.fill("evenodd"),f.restore()}}}},{key:"drawPictureStroke",value:function(e,t){if(e){var i=t.colorSubstitutions,r=t.capStyle,n=t.joinStyle,a=t.miterLimit,s=t.tintColor,o=t.url,h=t.width,u=this._resourceManager.getResource(o);if(null!=u){var c;if((0,k.oU)(e))c=e.rings;else if((0,k.l9)(e))c=e.paths;else{if(!(0,k.YX)(e))return(0,k.aW)(e)?void console.log("CanvasDrawHelper.drawPictureStroke - No implementation!"):void 0;c=W(e).rings}h||(h=u.width);var f=(0,z.TB)(o)||"src"in u&&(0,z.TB)(u.src),m="getFrame"in u?w(u):u;i&&(m=this._colorSubstitutionHelper.applyColorSubstituition(m,i)),this._applyAdditionalRenderProps&&(f||s&&(m=this._colorSubstitutionHelper.tintImageData(m,s)));var d,p,_=Math.max(this.transformSize((0,y.F2)(h)),.5),g=_/m.width,P=this._ctx,M=P.createPattern(m,"repeat-y");P.save(),this._setCapStyle(r),this._setJoinStyle(n),void 0!==a&&(P.miterLimit=a),P.lineWidth=_;var x,b=(0,l.Z)(c);try{for(b.s();!(x=b.n()).done;){var S=x.value;if(Q(S=(0,v.d9)(S)),S&&!(S.length<=1)){d=this.transformPt(S[0]);for(var C=1;C<S.length;C++){var I=B(d,p=this.transformPt(S[C])),L=new DOMMatrix;L.translateSelf(0,d[1]-_/2).scaleSelf(g,g,1).rotateSelf(0,0,90-I),M.setTransform(L),P.strokeStyle=M,P.beginPath(),P.moveTo(d[0],d[1]),P.lineTo(p[0],p[1]),P.stroke(),d=p}}}}catch(O){b.e(O)}finally{b.f()}P.restore()}}}},{key:"_buildPath",value:function(e,t){var i=this._ctx;if(i.beginPath(),e){var r,n=(0,l.Z)(e);try{for(n.s();!(r=n.n()).done;){var a=r.value,s=a?a.length:0;if(s>1){var o=this.transformPt(a[0]);i.moveTo(o[0],o[1]);for(var h=1;h<s;h++)o=this.transformPt(a[h]),i.lineTo(o[0],o[1]);t&&i.closePath()}}}catch(u){n.e(u)}finally{n.f()}}}},{key:"_setCapStyle",value:function(e){switch(e){case C.kP.Butt:this._ctx.lineCap="butt";break;case C.kP.Round:this._ctx.lineCap="round";break;case C.kP.Square:this._ctx.lineCap="square"}}},{key:"_setJoinStyle",value:function(e){switch(e){case C.r4.Bevel:this._ctx.lineJoin="bevel";break;case C.r4.Round:this._ctx.lineJoin="round";break;case C.r4.Miter:this._ctx.lineJoin="miter"}}}]),i}(D);function B(e,t){var i=t[0]-e[0],r=t[1]-e[1];return 180/Math.PI*Math.atan2(r,i)}var W=function(e){return e?{spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:null},J=function(e){switch(e){case"Left":return O.M7.Left;case"Right":return O.M7.Right;case"Center":return O.M7.Center;case"Justify":return T.warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),O.M7.Center}},j=function(e){switch(e){case"Top":return O.TR.Top;case"Center":return O.TR.Center;case"Bottom":return O.TR.Bottom;case"Baseline":return O.TR.Baseline}},q=function(e,t,i){switch(e){case"ExtraLeading":return 1+t/i;case"Multiple":return t;case"Exact":return t/i}};function $(e){var t,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=(0,z.BX)(e),a=(0,z.wi)(e.fontStyleName),s=null!==(t=e.fontFamilyName)&&void 0!==t?t:f.em,o=a.weight,l=a.style,h=r*(e.height||5),u=(0,z.X_)(e.horizontalAlignment),c=(0,z.FG)(e.verticalAlignment),v=(0,z.W7)(e),m=(0,z.W7)(e.haloSymbol),d=m?r*(0|e.haloSize):0,y="CIMBackgroundCallout"===(null===(i=e.callout)||void 0===i?void 0:i.type)?e.callout.backgroundSymbol:null,p=(0,z.W7)(y),_=(0,z.F)(y),g=(0,z.$Z)(y);return{color:v,size:h,horizontalAlignment:u,verticalAlignment:c,font:{family:s,style:(0,z.pJ)(l),weight:(0,z.On)(o),decoration:n},halo:{size:d||0,color:m,style:l},backgroundColor:p,borderLine:null!=_&&null!=g?{size:_,color:g}:null,pixelRatio:1,premultiplyColors:!0}}var K=1e-4;function Q(e){for(var t,i,r,n,a,s=e[0],o=1;o<e.length;)t=e[o][0]-s[0],i=e[o][1]-s[1],n=0!==t?i/t:Math.PI/2,void 0!==r&&n-r<=K?(e.splice(o-1,1),s=a):(a=s,s=e[o],o++),r=n}},78915:function(e,t,i){i.d(t,{B$:function(){return X},E0:function(){return H},Tg:function(){return R},U1:function(){return q},bP:function(){return G},rW:function(){return N}});var r=i(74165),n=i(15861),a=i(1413),s=i(29439),o=i(15671),l=i(43144),h=i(37762),u=i(51995),c=i(75746),f=i(93169),v=i(84652),m=i(32718),d=i(84936),y=i(17842),p=i(65156),_=i(376),g=i(819),P=i(73268),k=i(84284),M=i(66726),x=i(48202),b=i(31027),S=i(91935),C=i(99201),w=i(94109),I=i(47975),L=Math.PI,z=L/2,O=Math.PI/180,A=96/72,Z=m.Z.getLogger("esri.symbols.cim.CIMSymbolHelper");function N(e){if(null===e||void 0===e||!e.type)return null;var t;switch(e.type){case"cim":return e.data;case"web-style":return e;case"simple-marker":var i=X.fromSimpleMarker(e);if(!i)return null;t=i;break;case"picture-marker":t=X.fromPictureMarker(e);break;case"simple-line":t=X.fromSimpleLineSymbol(e);break;case"simple-fill":t=X.fromSimpleFillSymbol(e);break;case"picture-fill":t=X.fromPictureFillSymbol(e);break;case"text":t=X.fromTextSymbol(e)}return{type:"CIMSymbolReference",symbol:t}}function T(e,t,i){switch(t.type){case"CIMSymbolReference":return T(e,t.symbol,i);case"CIMPointSymbol":null==i&&(i={x:0,y:0}),e.drawSymbol(t,i);break;case"CIMLineSymbol":null==i&&(i={paths:[[[0,0],[10,0]]]}),e.drawSymbol(t,i);break;case"CIMPolygonSymbol":null==i&&(i={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]}),e.drawSymbol(t,i);break;case"CIMTextSymbol":e.drawSymbol(t,{x:0,y:0});break;case"CIMVectorMarker":var r=new k.u;e.drawMarker(t,r)}return e.envelope()}function F(e){if(!e)return 0;switch(e.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAtExtremities":case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementAtRatioPositions":case"CIMMarkerPlacementOnLine":case"CIMMarkerPlacementOnVertices":return Math.abs(e.offset);default:return 0}}function E(e){if(!e)return 0;switch(e.type){case"CIMGeometricEffectArrow":return Math.abs(.5*e.width);case"CIMGeometricEffectBuffer":return Math.abs(e.size);case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(e.length);case"CIMGeometricEffectJog":return Math.abs(.5*e.length);case"CIMGeometricEffectMove":return Math.max(Math.abs((0,b.NA)(e.offsetX)),Math.abs((0,b.NA)(e.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(e.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(e.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return.5*Math.max(Math.abs(e.fromWidth),Math.abs(e.toWidth));case"CIMGeometricEffectWave":return Math.abs(e.amplitude);case"CIMGeometricEffectDonut":return Math.abs(e.width)}}function R(e){if(!e)return 0;var t,i=0,r=(0,h.Z)(e);try{for(r.s();!(t=r.n()).done;){i+=E(t.value)}}catch(n){r.e(n)}finally{r.f()}return i}var G=function(){function e(){(0,o.Z)(this,e)}return(0,l.Z)(e,[{key:"getSymbolInflateSize",value:function(e,t,i,r,n){return e||(e=[0,0,0,0]),t?this._getInflateSize(e,t,i,r,n):e}},{key:"_vectorMarkerBounds",value:function(e,t,i,r){var n=!0,a=(0,p.Ue)();if(null!==t&&void 0!==t&&t.markerGraphics){var s,o=(0,h.Z)(t.markerGraphics);try{for(o.s();!(s=o.n()).done;){var l=s.value,u=[0,0,0,0];l.geometry&&((0,_.$P)(a,l.geometry),u[0]=0,u[1]=0,u[2]=0,u[3]=0,this.getSymbolInflateSize(u,l.symbol,i,0,r),a[0]+=u[0],a[1]+=u[1],a[2]+=u[2],a[3]+=u[3],n?(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],n=!1):(e[0]=Math.min(e[0],a[0]),e[1]=Math.min(e[1],a[1]),e[2]=Math.max(e[2],a[2]),e[3]=Math.max(e[3],a[3])))}}catch(c){o.e(c)}finally{o.f()}}return e}},{key:"_getInflateSize",value:function(e,t,i,r,n){if(function(e){return void 0!==e.symbolLayers}(t)){var a=this._getLayersInflateSize(e,t.symbolLayers,i,r,n),s=R(t.effects);return s>0&&(a[0]-=s,a[1]-=s,a[2]+=s,a[3]+=s),a}return this._getTextInflatedSize(e,t,n)}},{key:"_getLayersInflateSize",value:function(e,t,i,r,n){var a=!0;if(!t)return e;var s,o=(0,h.Z)(t);try{for(o.s();!(s=o.n()).done;){var l=s.value;if(l){var u=[0,0,0,0];switch(l.type){case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":var c=l,f=c.width;null!=f&&(c.capStyle===x.kP.Square||c.joinStyle===x.r4.Miter?f/=1.4142135623730951:f/=2,u[0]=-f,u[1]=-f,u[2]=f,u[3]=f);break;case"CIMCharacterMarker":case"CIMVectorMarker":case"CIMPictureMarker":var v=l;if("CIMVectorMarker"===l.type){var m=l;if(u=this._vectorMarkerBounds(u,m,i,n),m.frame){var d=(m.frame.xmin+m.frame.xmax)/2,y=(m.frame.ymin+m.frame.ymax)/2;if(u[0]-=d,u[1]-=y,u[2]-=d,u[3]-=y,null!=m.size){var _=m.size/(m.frame.ymax-m.frame.ymin);u[0]*=_,u[1]*=_,u[2]*=_,u[3]*=_}}}else if("CIMPictureMarker"===l.type){var g=l,P=i.getResource(g.url),k=1;if(null!=P&&P.height&&(k=P.width/P.height),null!=v.size){var M=v.size/2,S=v.size*k*g.scaleX/2;u=[-S,-M,S,M]}}else if(null!=v.size){var w=v.size/2;u=[-w,-w,w,w]}if(v.anchorPoint){var I=void 0,L=void 0;"Absolute"===v.anchorPointUnits?(I=v.anchorPoint.x,L=v.anchorPoint.y):(I=v.anchorPoint.x*(u[2]-u[0]),L=v.anchorPoint.y*(u[3]-u[1])),u[0]-=I,u[1]-=L,u[2]-=I,u[3]-=L}var z=(0,b.NA)(v.rotation);if(v.rotateClockwise&&(z=-z),r&&(z-=r),z){var A=O*z,Z=Math.cos(A),N=Math.sin(A),T=(0,p.Ue)([C.FM,C.FM,-C.FM,-C.FM]);(0,p.Ho)(T,[u[0]*Z-u[1]*N,u[0]*N+u[1]*Z]),(0,p.Ho)(T,[u[0]*Z-u[3]*N,u[0]*N+u[3]*Z]),(0,p.Ho)(T,[u[2]*Z-u[1]*N,u[2]*N+u[1]*Z]),(0,p.Ho)(T,[u[2]*Z-u[3]*N,u[2]*N+u[3]*Z]),u=T}var E=(0,b.NA)(v.offsetX),G=(0,b.NA)(v.offsetY);if(r){var X=O*r,H=Math.cos(X),D=Math.sin(X),Y=E*D+G*H;E=E*H-G*D,G=Y}u[0]+=E,u[1]+=G,u[2]+=E,u[3]+=G;var V=F(v.markerPlacement);V>0&&(u[0]-=V,u[1]-=V,u[2]+=V,u[3]+=V)}var U=R(l.effects);U>0&&(u[0]-=U,u[1]-=U,u[2]+=U,u[3]+=U),a?(e[0]=u[0],e[1]=u[1],e[2]=u[2],e[3]=u[3],a=!1):(e[0]=Math.min(e[0],u[0]),e[1]=Math.min(e[1],u[1]),e[2]=Math.max(e[2],u[2]),e[3]=Math.max(e[3],u[3]))}}}catch(B){o.e(B)}finally{o.f()}return e}},{key:"_getTextInflatedSize",value:function(e,t,i){var r,n,a,s=null!==(r=t.height)&&void 0!==r?r:M.zV;if(e[0]=-s/2,e[1]=-s/2,e[2]=s/2,e[3]=s/2,!i)return e;var o=i.get(t);if(!o)return e;var l=o.text,h=o.mosaicItem;if(null===h||void 0===h||null===(n=h.glyphMosaicItems)||void 0===n||!n.length)return e;var u=t.lineGapType,f=t.lineGap,v=u?(0,M.et)(u,null!==f&&void 0!==f?f:0,s):0,m=(0,c.E)(l)[1],d=h.glyphMosaicItems,y="CIMBackgroundCallout"===(null===(a=t.callout)||void 0===a?void 0:a.type),p=(0,I.Nr)(d,m,{scale:s/w.iD,angle:(0,b.NA)(t.angle),xOffset:(0,b.NA)(t.offsetX),yOffset:(0,b.NA)(t.offsetY),hAlign:(0,M.x1)(t.horizontalAlignment),vAlign:(0,M.g)(t.verticalAlignment),maxLineWidth:512,lineHeight:w.uk*Math.max(.25,Math.min(v||1,4)),decoration:t.font.decoration||"none",isCIM:!0,hasBackground:y}).boundsT;return e[0]=p.x-p.halfWidth,e[1]=-p.y-p.halfHeight,e[2]=p.x+p.halfWidth,e[3]=-p.y+p.halfHeight,e}}],[{key:"safeSize",value:function(e){var t=Math.max(Math.abs(e[0]),Math.abs(e[2])),i=Math.max(Math.abs(e[1]),Math.abs(e[3]));return Math.sqrt(t*t+i*i)}}]),e}(),X=function(){function e(){(0,o.Z)(this,e)}return(0,l.Z)(e,null,[{key:"getEnvelope",value:function(e,t,i){if(!e)return null;var r=new M.uQ(i);if(Array.isArray(e)){var n,a,s=(0,h.Z)(e);try{for(s.s();!(a=s.n()).done;){var o=a.value;n?n.union(T(r,o,t)):n=T(r,o,t)}}catch(l){s.e(l)}finally{s.f()}return n}return T(r,e,t)}},{key:"getTextureAnchor",value:function(e,t){var i=this.getEnvelope(e,null,t);if(!i)return[0,0,0];var r=(i.x+.5*i.width)*A,n=(i.y+.5*i.height)*A,a=i.width*A+2,s=i.height*A+2;return[-r/a,-n/s,s]}},{key:"rasterize",value:function(e,t,i,r){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=i||this.getEnvelope(t,null,r);if(!a)return[null,0,0,0,0];var s=(a.x+.5*a.width)*A,o=(a.y+.5*a.height)*A;e.width=a.width*A,e.height=a.height*A,i||(e.width+=2,e.height+=2);var l=e.getContext("2d"),h=M.zA.createScale(A,-A);h.translate(.5*e.width-s,.5*e.height+o);var u=new M.cD(l,r,h);switch(t.type){case"CIMPointSymbol":u.drawSymbol(t,{type:"point",x:0,y:0});break;case"CIMVectorMarker":var c=new k.u;u.drawMarker(t,c)}var f=l.getImageData(0,0,e.width,e.height),v=new Uint8Array(f.data);if(n)for(var m,d=0;d<v.length;d+=4)m=v[d+3]/255,v[d]=v[d]*m,v[d+1]=v[d+1]*m,v[d+2]=v[d+2]*m;return[v,e.width,e.height,-s/e.width,-o/e.height]}},{key:"fromTextSymbol",value:function(e){var t,i,r,n,a,s,o=e.angle,l=e.color,h=e.font,u=e.haloColor,f=e.haloSize,v=e.horizontalAlignment,m=e.kerning,d=e.text,y=e.verticalAlignment,p=e.xoffset,_=e.yoffset,g=e.backgroundColor,P=e.borderLineColor,k=e.borderLineSize;h&&(t=h.family,i=h.style,r=h.weight,n=h.size,a=h.decoration);var M=!1;return d&&(M=(0,c.E)(d)[1]),(g||k)&&(s={type:"CIMBackgroundCallout",margin:null,backgroundSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",color:B(g)},{type:"CIMSolidStroke",color:B(P),width:k}]},accentBarSymbol:null,gap:null,leaderLineSymbol:null,lineStyle:null}),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMTextSymbol",angle:o,blockProgression:x.zV.BTT,depth3D:1,extrapolateBaselines:!0,fontEffects:x.eZ.Normal,fontEncoding:x.DD.Unicode,fontFamilyName:t||"Arial",fontStyleName:W(i,r),fontType:x.Ky.Unspecified,haloSize:f,height:n,hinting:x.Dd.Default,horizontalAlignment:V(null!==v&&void 0!==v?v:"center"),kerning:m,letterWidth:100,ligatures:!0,lineGapType:"Multiple",offsetX:(0,b.NA)(p),offsetY:(0,b.NA)(_),strikethrough:"line-through"===a,underline:"underline"===a,symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:B(l)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:B(u)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:M?x.UX.RTL:x.UX.LTR,verticalAlignment:U(null!==y&&void 0!==y?y:"baseline"),verticalGlyphOrientation:x.RS.Right,wordSpacing:100,billboardMode3D:x.UR.FaceNearPlane,callout:s},textString:d}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}}},{key:"fromPictureFillSymbol",value:function(e){var t,i=e.height,r=e.outline,n=e.width,a=e.xoffset,s=e.xscale,o=e.yoffset,l=e.yscale,h=[],u={type:"CIMPolygonSymbol",symbolLayers:h};if(r){var c=te(r);c&&h.push(c)}var f=e.url;"esriPFS"===e.type&&e.imageData&&(f=e.imageData);var v="angle"in e&&null!==(t=e.angle)&&void 0!==t?t:0,m=(null!==n&&void 0!==n?n:0)*(s||1),d=(null!==i&&void 0!==i?i:0)*(l||1);return h.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:x.Qb.Picture,tintColor:null,url:f,height:d,width:m,offsetX:(0,b.NA)(a),offsetY:(0,b.NA)(o),rotation:(0,b.NA)(-v),colorSubstitutions:null}),u}},{key:"fromSimpleFillSymbol",value:function(e){var t=e.color,i=e.style,r=e.outline,n=[],a={type:"CIMPolygonSymbol",symbolLayers:n};if(r){var s=te(r);s&&n.push(s)}if(i&&"solid"!==i&&"none"!==i&&"esriSFSSolid"!==i&&"esriSFSNull"!==i){var o={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",color:B(t),capStyle:x.kP.Butt,joinStyle:x.r4.Miter,width:.75}]},l=0,h=(0,y.Wz)(K(i)?8:10);switch(i){case"vertical":case"esriSFSVertical":l=90;break;case"forward-diagonal":case"esriSFSForwardDiagonal":case"diagonal-cross":case"esriSFSDiagonalCross":l=-45;break;case"backward-diagonal":case"esriSFSBackwardDiagonal":l=45;break;case"cross":case"esriSFSCross":l=0}n.push({type:"CIMHatchFill",lineSymbol:o,offsetX:0,offsetY:0,rotation:l,separation:h}),"cross"===i||"esriSFSCross"===i?n.push({type:"CIMHatchFill",lineSymbol:(0,v.d9)(o),offsetX:0,offsetY:0,rotation:90,separation:h}):"diagonal-cross"!==i&&"esriSFSDiagonalCross"!==i||n.push({type:"CIMHatchFill",lineSymbol:(0,v.d9)(o),offsetX:0,offsetY:0,rotation:45,separation:h})}else!i||"solid"!==i&&"esriSFSSolid"!==i||n.push({type:"CIMSolidFill",enable:!0,color:B(t)});return a}},{key:"fromSimpleLineSymbol",value:function(t){var i=t.cap,r=t.color,n=t.join,a=t.marker,s=t.miterLimit,o=t.style,l=t.width,h=null;"solid"!==o&&"none"!==o&&"esriSLSSolid"!==o&&"esriSLSNull"!==o&&(h=[{type:"CIMGeometricEffectDashes",dashTemplate:q(o,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);var u=[];if(a){var c;switch(a.placement){case"begin-end":c=x.Tx.Both;break;case"begin":c=x.Tx.JustBegin;break;case"end":c=x.Tx.JustEnd;break;default:c=x.Tx.None}var f=e.fromSimpleMarker(a,l,r).symbolLayers[0];f.markerPlacement={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:c,offsetAlongLine:0},u.push(f)}return u.push({type:"CIMSolidStroke",color:"none"!==o&&"esriSLSNull"!==o?B(r):[0,0,0,0],capStyle:D(i),joinStyle:Y(n),miterLimit:s,width:l,effects:h}),{type:"CIMLineSymbol",symbolLayers:u}}},{key:"fromPictureMarker",value:function(e){var t=e.angle,i=e.height,r=e.width,n=e.xoffset,a=e.yoffset,s=e.url;return"esriPMS"===e.type&&e.imageData&&(s=e.imageData),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:x.Qb.Picture,tintColor:null,url:s,size:i,width:r,offsetX:(0,b.NA)(n),offsetY:(0,b.NA)(a),rotation:(0,b.NA)(-t)}]}}},{key:"fromSimpleMarker",value:function(e,t,i){var r,n,a,o,l,h=e.style,u=null!==(r=e.color)&&void 0!==r?r:i;if("path"===h){var c=[];if("outline"in e&&e.outline){var f=e.outline;c.push({type:"CIMSolidStroke",enable:!0,width:(0,y.F2)(Math.round((0,y.Wz)(f.width))),color:B(f.color),path:e.path})}c.push({type:"CIMSolidFill",enable:!0,color:B(u),path:e.path});var v=$("square"),m=(0,s.Z)(v,2),d=m[0],p=m[1];return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:(0,b.NA)(-e.angle),size:(0,b.NA)(e.size||6),offsetX:(0,b.NA)(e.xoffset),offsetY:(0,b.NA)(e.yoffset),frame:d,markerGraphics:[{type:"CIMMarkerGraphic",geometry:p,symbol:{type:"CIMPolygonSymbol",symbolLayers:c}}]}]}}var _,g,P=[];if("outline"in e&&e.outline&&"none"!==e.outline.style&&"esriSLSNull"!==e.outline.style){var k=e.outline,M="solid"!==k.style&&"esriSLSSolid"!==k.style,S=M?$(h,e.size):$(h),C=(0,s.Z)(S,2);_=C[0],g=C[1];var w="cross"!==e.style&&"x"!==e.style||"dot"===(null===e||void 0===e?void 0:e.outline.style)||"short-dot"===(null===e||void 0===e?void 0:e.outline.style)?x.sj.HalfGap:x.sj.FullPattern,I=M?[{type:"CIMGeometricEffectAddControlPoints"},{type:"CIMGeometricEffectDashes",dashTemplate:q(k.style,null).map((function(e){return k.width&&k.width>0?e*k.width:e})),lineDashEnding:w,controlPointEnding:x.sj.FullPattern}]:void 0;P.push({type:"CIMSolidStroke",capStyle:M?x.kP.Round:x.kP.Butt,enable:!0,width:null!=k.width&&k.width>.667?(0,y.F2)(Math.round((0,y.Wz)(k.width))):k.width,color:B(k.color),effects:I})}else!t||"line-marker"!==e.type||"cross"!==e.style&&"x"!==e.style?(n=$(h),_=(a=(0,s.Z)(n,2))[0],g=a[1]):(o=$(h),_=(l=(0,s.Z)(o,2))[0],g=l[1],P.push({type:"CIMSolidStroke",enable:!0,width:t,color:B(u)}));P.push({type:"CIMSolidFill",enable:!0,color:B(u)});var L={type:"CIMPolygonSymbol",symbolLayers:P};return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:(0,b.NA)(-e.angle),size:(0,b.NA)(e.size||6*t),offsetX:(0,b.NA)(e.xoffset),offsetY:(0,b.NA)(e.yoffset),frame:_,markerGraphics:[{type:"CIMMarkerGraphic",geometry:g,symbol:L}]}]}}},{key:"fromCIMHatchFill",value:function(e,t){var i,r,n=t*(null!==(i=e.separation)&&void 0!==i?i:M.rC),a=n/2,s=(0,v.d9)(e.lineSymbol);null===(r=s.symbolLayers)||void 0===r||r.forEach((function(e){var i;switch(e.type){case"CIMSolidStroke":null!=e.width&&(e.width*=t),null===(i=e.effects)||void 0===i||i.forEach((function(e){"CIMGeometricEffectDashes"===e.type&&(e.dashTemplate=e.dashTemplate.map((function(e){return e*t})))}));break;case"CIMVectorMarker":null!=e.size&&(e.size*=t);var r=e.markerPlacement;null!=r&&"placementTemplate"in r&&(r.placementTemplate=r.placementTemplate.map((function(e){return e*t})))}}));for(var o=this._getLineSymbolPeriod(s)||4;o<4;)o*=2;var l=o/2;return{type:"CIMVectorMarker",frame:{xmin:-l,xmax:l,ymin:-a,ymax:a},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-l,0],[l,0]]]},symbol:s}],size:n}}},{key:"fetchResources",value:function(t,i,r){if(t&&i)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":var n=t.symbolLayers;if(!n)return;var a,s=(0,h.Z)(n);try{for(s.s();!(a=s.n()).done;){var o=a.value;switch(ee(o,i,r),o.type){case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMCharacterMarker":case"CIMPictureMarker":"url"in o&&o.url&&r.push(i.fetchResource(o.url,null));break;case"CIMVectorMarker":var l=o.markerGraphics;if(!l)continue;var u,c=(0,h.Z)(l);try{for(c.s();!(u=c.n()).done;){var f=u.value;if(f){var v=f.symbol;v&&e.fetchResources(v,i,r)}}}catch(m){c.e(m)}finally{c.f()}}}}catch(m){s.e(m)}finally{s.f()}}}},{key:"fetchFonts",value:function(t,i,r){if(t&&i)if("symbolLayers"in t&&t.symbolLayers){var n,a=(0,h.Z)(t.symbolLayers);try{for(a.s();!(n=a.n()).done;){var s=n.value;if("CIMVectorMarker"===s.type&&s.markerGraphics){var o,l=(0,h.Z)(s.markerGraphics);try{for(l.s();!(o=l.n()).done;){var u=o.value;(null===u||void 0===u?void 0:u.symbol)&&e.fetchFonts(u.symbol,i,r)}}catch(_){l.e(_)}finally{l.f()}}}}catch(_){a.e(_)}finally{a.f()}}else if("CIMTextSymbol"===t.type){var c=t.fontFamilyName,f=t.fontStyleName;if(!c||"calcitewebcoreicons"===c.toLowerCase())return;var v=(0,b.wi)(f),m=v.style,d=v.weight,y=(0,b.BX)(t),p=new P.Z({family:c,style:m,weight:d,decoration:y});r.push(i.loadFont(p).catch((function(){Z.error("Unsupported font ".concat(c," in CIM symbol"))})))}}},{key:"_getLineSymbolPeriod",value:function(e){if(e){var t=this._getEffectsRepeat(e.effects);if(t)return t;if(e.symbolLayers){var i,r=(0,h.Z)(e.symbolLayers);try{for(r.s();!(i=r.n()).done;){var n=i.value;if(n){var a=this._getEffectsRepeat(n.effects);if(a)return a;switch(n.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":var s=this._getPlacementRepeat(n.markerPlacement);if(s)return s}}}}catch(o){r.e(o)}finally{r.f()}}}return 0}},{key:"_getEffectsRepeat",value:function(e){if(e){var t,i=(0,h.Z)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(r)switch(r.type){case"CIMGeometricEffectDashes":var n=r.dashTemplate;if(n&&n.length){var a,s=0,o=(0,h.Z)(n);try{for(o.s();!(a=o.n()).done;){s+=a.value}}catch(l){o.e(l)}finally{o.f()}return 1&n.length&&(s*=2),s}break;case"CIMGeometricEffectWave":return r.period;default:Z.error("unsupported geometric effect type ".concat(r.type))}}}catch(l){i.e(l)}finally{i.f()}}return 0}},{key:"_getPlacementRepeat",value:function(e){if(e)switch(e.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":var t=e.placementTemplate;if(t&&t.length){var i,r=0,n=(0,h.Z)(t);try{for(n.s();!(i=n.n()).done;){r+=+i.value}}catch(a){n.e(a)}finally{n.f()}return 1&t.length&&(r*=2),r}}return 0}},{key:"fromCIMInsidePolygon",value:function(e){var t,i=e.markerPlacement,r=(0,a.Z)({},e);r.markerPlacement=null,r.anchorPoint=null;var n,s,o,l,h=Math.abs(i.stepX),u=Math.abs(i.stepY),c=(null!==(t=i.randomness)&&void 0!==t?t:100)/100;if("Random"===i.gridType){var f=(0,y.Wz)(w.KA),v=Math.max(Math.floor(f/h),1),m=Math.max(Math.floor(f/u),1);n=v*h/2,o=2*(s=m*u/2);var p=new d.Z(i.seed),_=c*h/1.5,g=c*u/1.5;l=[];for(var P=0;P<v;P++)for(var k=0;k<m;k++){var M=P*h-n+_*(.5-p.getFloat()),x=k*u-s+g*(.5-p.getFloat());l.push({x:M,y:x}),0===P&&l.push({x:M+2*n,y:x}),0===k&&l.push({x:M,y:x+2*s})}}else!0===i.shiftOddRows?(o=2*u,l=[{x:-(n=h/2),y:0},{x:n,y:0},{x:0,y:s=u},{x:0,y:-s}]):(n=h/2,s=u/2,o=u,l=[{x:-h,y:0},{x:0,y:-u},{x:-h,y:-u},{x:0,y:0},{x:h,y:0},{x:0,y:u},{x:h,y:u},{x:-h,y:u},{x:h,y:-u}]);return{type:"CIMVectorMarker",frame:{xmin:-n,xmax:n,ymin:-s,ymax:s},markerGraphics:l.map((function(e){return{type:"CIMMarkerGraphic",geometry:e,symbol:{type:"CIMPointSymbol",symbolLayers:[r]}}})),size:o}}},{key:"getSize",value:function(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":var t=0;if(e.symbolLayers){var i,r=(0,h.Z)(e.symbolLayers);try{for(r.s();!(i=r.n()).done;){var n=i.value;if(n)switch(n.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":var a=n.size;null!=a&&a>t&&(t=a)}}}catch(v){r.e(v)}finally{r.f()}}return t;case"CIMLineSymbol":case"CIMPolygonSymbol":var s=0;if(e.symbolLayers){var o,l=(0,h.Z)(e.symbolLayers);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(u)switch(u.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":var c=u.width;null!=c&&c>s&&(s=c);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(u.markerPlacement&&(0,b.gJ)(u.markerPlacement)){var f=u.size;null!=f&&f>s&&(s=f)}}}}catch(v){l.e(v)}finally{l.f()}}return s}}},{key:"getMarkerScaleRatio",value:function(e){if(e&&"CIMVectorMarker"===e.type&&!1!==e.scaleSymbolsProportionally&&e.frame&&null!=e.size){var t=e.frame.ymax-e.frame.ymin;return e.size/t}return 1}}]),e}(),H=function(){function e(){(0,o.Z)(this,e)}return(0,l.Z)(e,null,[{key:"findApplicableOverrides",value:function(t,i,r){if(t&&i){if(t.primitiveName){var n,a=!1,s=(0,h.Z)(r);try{for(s.s();!(n=s.n()).done;){if(n.value.primitiveName===t.primitiveName){a=!0;break}}}catch(x){s.e(x)}finally{s.f()}if(!a){var o,l=(0,h.Z)(i);try{for(l.s();!(o=l.n()).done;){var u=o.value;u.primitiveName===t.primitiveName&&r.push(u)}}catch(x){l.e(x)}finally{l.f()}}}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects){var c,f=(0,h.Z)(t.effects);try{for(f.s();!(c=f.n()).done;){var v=c.value;e.findApplicableOverrides(v,i,r)}}catch(x){f.e(x)}finally{f.f()}}if(t.symbolLayers){var m,d=(0,h.Z)(t.symbolLayers);try{for(d.s();!(m=d.n()).done;){var y=m.value;e.findApplicableOverrides(y,i,r)}}catch(x){d.e(x)}finally{d.f()}}break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(t.effects){var p,_=(0,h.Z)(t.effects);try{for(_.s();!(p=_.n()).done;){var g=p.value;e.findApplicableOverrides(g,i,r)}}catch(x){_.e(x)}finally{_.f()}}if(t.markerPlacement&&e.findApplicableOverrides(t.markerPlacement,i,r),"CIMVectorMarker"===t.type){if(t.markerGraphics){var P,k=(0,h.Z)(t.markerGraphics);try{for(k.s();!(P=k.n()).done;){var M=P.value;e.findApplicableOverrides(M,i,r),e.findApplicableOverrides(M.symbol,i,r)}}catch(x){k.e(x)}finally{k.f()}}}else"CIMCharacterMarker"===t.type?e.findApplicableOverrides(t.symbol,i,r):"CIMHatchFill"===t.type?e.findApplicableOverrides(t.lineSymbol,i,r):"CIMPictureMarker"===t.type&&e.findApplicableOverrides(t.animatedSymbolProperties,i,r)}}}},{key:"findEffectOverrides",value:function(e,t,i){if(t&&e)for(var r=e.length,n=0;n<r;n++){var a=e[n],s=null===a||void 0===a?void 0:a.primitiveName;if(s){var o,l=!1,u=(0,h.Z)(i);try{for(u.s();!(o=u.n()).done;){if(o.value.primitiveName===s){l=!0;break}}}catch(m){u.e(m)}finally{u.f()}if(!l){var c,f=(0,h.Z)(t);try{for(f.s();!(c=f.n()).done;){var v=c.value;v.primitiveName===s&&i.push(v)}}catch(m){f.e(m)}finally{f.f()}}}}}},{key:"resolveSymbolOverrides",value:function(){var t=(0,n.Z)((0,r.Z)().mark((function t(i,n,a,s,o,l,h){var u,c,f,m,d;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==i&&void 0!==i&&i.symbol){t.next=2;break}return t.abrupt("return",null);case 2:if(u=i.symbol,c=i.primitiveOverrides,(f=!!c)||s){t.next=6;break}return t.abrupt("return",u);case 6:if(u=(0,v.d9)(u),m=!0,n||(n={attributes:{}},m=!1),!f){t.next=14;break}if(m||(c=c.filter((function(e){var t;return!(null!==(t=e.valueExpressionInfo)&&void 0!==t&&t.expression.includes("$feature"))}))),h||(c=c.filter((function(e){var t;return!(null!==(t=e.valueExpressionInfo)&&void 0!==t&&t.expression.includes("$view"))}))),!(c.length>0)){t.next=13;break}return d=(0,b.Qf)(n.attributes),t.next=13,e.evaluateOverrides(c,n,{spatialReference:a,fields:d,geometryType:o},l,h);case 13:e.applyOverrides(u,c);case 14:return t.abrupt("return",(s&&e.applyDictionaryTextOverrides(u,n,s),u));case 15:case"end":return t.stop()}}),t)})));return function(e,i,r,n,a,s,o){return t.apply(this,arguments)}}()},{key:"evaluateOverrides",value:function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t,i,n,a,s){var o,l,u,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:l=(0,h.Z)(t),e.prev=3,c=(0,r.Z)().mark((function e(){var t,l,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.value,(l=t.valueExpressionInfo)&&null!==n&&void 0!==n&&n.geometryType&&(o||(o=[]),t.value=void 0,h=(0,g.Yi)(l.expression,n.spatialReference,n.fields).then((function(e){t.value=(0,S.Z)(e,i,{$view:s},n.geometryType,a)})),o.push(h));case 3:case"end":return e.stop()}}),e)})),l.s();case 6:if((u=l.n()).done){e.next=10;break}return e.delegateYield(c(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),l.e(e.t1);case 15:return e.prev=15,l.f(),e.finish(15);case 18:if(e.t2=void 0!==o&&o.length>0,!e.t2){e.next=22;break}return e.next=22,Promise.all(o);case 22:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t,i,r,n,a){return e.apply(this,arguments)}}()},{key:"applyDictionaryTextOverrides",value:function(t,i,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Normal";if(null!==t&&void 0!==t&&t.type)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":var a=t.symbolLayers;if(!a)return;var s,o=(0,h.Z)(a);try{for(o.s();!(s=o.n()).done;){var l=s.value;l&&"CIMVectorMarker"===l.type&&e.applyDictionaryTextOverrides(l,i,r,"CIMTextSymbol"===t.type?t.textCase:n)}}catch(y){o.e(y)}finally{o.f()}break;case"CIMVectorMarker":var u=t.markerGraphics;if(!u)return;var c,f=(0,h.Z)(u);try{for(f.s();!(c=f.n()).done;){var v=c.value;v&&e.applyDictionaryTextOverrides(v,i,r)}}catch(y){f.e(y)}finally{f.f()}break;case"CIMMarkerGraphic":var m=t.textString;if(m&&m.includes("[")){var d=(0,b.H1)(m,r);t.textString=(0,b.E_)(i,d,n)}}}},{key:"applyOverrides",value:function(t,i,r,n){if(t.primitiveName){var a,s=(0,h.Z)(i);try{for(s.s();!(a=s.n()).done;){var o=a.value;if(o.primitiveName===t.primitiveName){var l=Q(o.propertyName);if(n&&n.push({cim:t,nocapPropertyName:l,value:t[l]}),o.expression&&(o.value=e.toValue(o.propertyName,o.expression)),r){var u,c=!1,f=(0,h.Z)(r);try{for(f.s();!(u=f.n()).done;){u.value.primitiveName===t.primitiveName&&(c=!0)}}catch(S){f.e(S)}finally{f.f()}c||r.push(o)}null!=o.value&&(t[l]=o.value)}}}catch(S){s.e(S)}finally{s.f()}}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects){var v,m=(0,h.Z)(t.effects);try{for(m.s();!(v=m.n()).done;){var d=v.value;e.applyOverrides(d,i,r,n)}}catch(S){m.e(S)}finally{m.f()}}if(t.symbolLayers){var y,p=(0,h.Z)(t.symbolLayers);try{for(p.s();!(y=p.n()).done;){var _=y.value;e.applyOverrides(_,i,r,n)}}catch(S){p.e(S)}finally{p.f()}}break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(t.effects){var g,P=(0,h.Z)(t.effects);try{for(P.s();!(g=P.n()).done;){var k=g.value;e.applyOverrides(k,i,r,n)}}catch(S){P.e(S)}finally{P.f()}}if("CIMVectorMarker"===t.type&&t.markerGraphics){var M,x=(0,h.Z)(t.markerGraphics);try{for(x.s();!(M=x.n()).done;){var b=M.value;e.applyOverrides(b,i,r,n),e.applyOverrides(b.symbol,i,r,n)}}catch(S){x.e(S)}finally{x.f()}}}}},{key:"restoreOverrides",value:function(e){var t,i=(0,h.Z)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.cim[r.nocapPropertyName]=r.value}}catch(n){i.e(n)}finally{i.f()}}},{key:"buildOverrideKey",value:function(e){var t,i="",r=(0,h.Z)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;void 0!==n.value&&(i+="".concat(n.primitiveName).concat(n.propertyName).concat(JSON.stringify(n.value)))}}catch(a){r.e(a)}finally{r.f()}return i}},{key:"toValue",value:function(e,t){if("DashTemplate"===e)return t.split(" ").map((function(e){return Number(e)}));if("Color"===e){var i=new u.Z(t).toRgba();return i[3]*=255,i}return t}}]),e}(),D=function(e){if(!e)return x.kP.Butt;switch(e){case"butt":return x.kP.Butt;case"square":return x.kP.Square;case"round":return x.kP.Round}},Y=function(e){if(!e)return x.r4.Miter;switch(e){case"miter":return x.r4.Miter;case"round":return x.r4.Round;case"bevel":return x.r4.Bevel}},V=function(e){if(null==e)return"Center";switch(e){case"left":return"Left";case"right":return"Right";case"center":return"Center"}},U=function(e){if(null==e)return"Center";switch(e){case"baseline":return"Baseline";case"top":return"Top";case"middle":return"Center";case"bottom":return"Bottom"}},B=function(e){return e?[e.r,e.g,e.b,255*e.a]:[0,0,0,0]},W=function(e,t){var i=J(t),r=j(e);return i&&r?"".concat(i,"-").concat(r):"".concat(i).concat(r)},J=function(e){if(!e)return"";switch(e.toLowerCase()){case"bold":case"bolder":return"bold"}return""},j=function(e){if(!e)return"";switch(e.toLowerCase()){case"italic":case"oblique":return"italic"}return""},q=function(e,t){var i=(0,f.Z)("safari")?.001:0,r="butt"===t;switch(e){case"dash":case"esriSLSDash":return r?[4,3]:[3,4];case"dash-dot":case"esriSLSDashDot":return r?[4,3,1,3]:[3,4,i,4];case"dot":case"esriSLSDot":return r?[1,3]:[i,4];case"long-dash":case"esriSLSLongDash":return r?[8,3]:[7,4];case"long-dash-dot":case"esriSLSLongDashDot":return r?[8,3,1,3]:[7,4,i,4];case"long-dash-dot-dot":case"esriSLSDashDotDot":return r?[8,3,1,3,1,3]:[7,4,i,4,i,4];case"short-dash":case"esriSLSShortDash":return r?[4,1]:[3,2];case"short-dash-dot":case"esriSLSShortDashDot":return r?[4,1,1,1]:[3,2,i,2];case"short-dash-dot-dot":case"esriSLSShortDashDotDot":return r?[4,1,1,1,1,1]:[3,2,i,2,i,2];case"short-dot":case"esriSLSShortDot":return r?[1,1]:[i,2];case"solid":case"esriSLSSolid":case"none":return Z.error("Unexpected: style does not require rasterization"),[0,0];default:return Z.error("Tried to rasterize SLS, but found an unexpected style: ".concat(e,"!")),[0,0]}};var $=function(e){var t,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=r/2,a=e;if("circle"===a||"esriSMSCircle"===a){var s=Math.acos(1-.25/n),o=Math.ceil(L/s/4);0===o&&(o=1),s=z/o,o*=4;var l=[];l.push([n,0]);for(var h=1;h<o;h++)l.push([n*Math.cos(h*s),-n*Math.sin(h*s)]);l.push([n,0]),t={rings:[l]},i={xmin:-n,ymin:-n,xmax:n,ymax:n}}else if("cross"===a||"esriSMSCross"===a){t={paths:[[[0,n],[0,-n]],[[n,0],[-n,0]]]},i={xmin:-n,ymin:-n,xmax:n,ymax:n}}else if("diamond"===a||"esriSMSDiamond"===a)t={rings:[[[-n,0],[0,n],[n,0],[0,-n],[-n,0]]]},i={xmin:-n,ymin:-n,xmax:n,ymax:n};else if("square"===a||"esriSMSSquare"===a)t={rings:[[[-n,-n],[-n,n],[n,n],[n,-n],[-n,-n]]]},i={xmin:-n,ymin:-n,xmax:n,ymax:n};else if("x"===a||"esriSMSX"===a)t={paths:[[[n,n],[-n,-n]],[[n,-n],[-n,n]]]},i={xmin:-n,ymin:-n,xmax:n,ymax:n};else if("triangle"===a||"esriSMSTriangle"===a){var u=.5773502691896257*r,c=-u,f=2/3*r,v=f-r;t={rings:[[[c,v],[0,f],[u,v],[c,v]]]},i={xmin:c,ymin:v,xmax:u,ymax:f}}else"arrow"===a&&(t={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},i={xmin:-n,ymin:-n,xmax:n,ymax:n});return[i,t]},K=function(e){return"vertical"===e||"horizontal"===e||"cross"===e||"esriSFSCross"===e||"esriSFSVertical"===e||"esriSFSHorizontal"===e},Q=function(e){return e?e.charAt(0).toLowerCase()+e.substr(1):e};function ee(e,t,i){e.effects&&null==t.geometryEngine&&(t.geometryEnginePromise?i.push(t.geometryEnginePromise):(0,b.Cc)(e.effects)&&(t.geometryEnginePromise=(0,b.RI)(),i.push(t.geometryEnginePromise),t.geometryEnginePromise.then((function(e){return t.geometryEngine=e}))))}function te(e){if(!e)return null;var t=null,i=e.cap,r=e.color,n=e.join,a=e.miterLimit,s=e.style,o=e.width;return"solid"!==s&&"none"!==s&&"esriSLSSolid"!==s&&"esriSLSNull"!==s&&(t=[{type:"CIMGeometricEffectDashes",dashTemplate:q(s,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]),{type:"CIMSolidStroke",color:"esriSLSNull"!==s&&"none"!==s?B(r):[0,0,0,0],capStyle:D(i),joinStyle:Y(n),miterLimit:a,width:o,effects:t}}},691:function(e,t,i){i.d(t,{Z:function(){return a}});var r=i(15671),n=i(43144),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,r.Z)(this,e),this.x=t,this.y=i,this.width=n,this.height=a}return(0,n.Z)(e,[{key:"isEmpty",get:function(){return this.width<=0||this.height<=0}},{key:"union",value:function(e){this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height)}}]),e}()},6388:function(e,t,i){i.d(t,{Fp:function(){return h},RL:function(){return v},UV:function(){return f},bk:function(){return c}});var r=i(29439),n=i(37762),a=i(46228),s=i(77981),o=i(691),l=i(94109);function h(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":var t=e.symbolLayers;return t&&1===t.length?h(t[0]):null;case"CIMVectorMarker":var i,r=e.markerGraphics;if(!r||1!==r.length)return null;var n=r[0];if(!n)return null;var a=n.geometry;if(!a)return null;var s=n.symbol;return!s||"CIMPolygonSymbol"!==s.type&&"CIMLineSymbol"!==s.type||null!==(i=s.symbolLayers)&&void 0!==i&&i.some((function(e){return!!e.effects}))?null:{geom:a,asFill:"CIMPolygonSymbol"===s.type};case"sdf":return{geom:e.geom,asFill:e.asFill}}return null}function u(e){var t,i=1/0,r=-1/0,a=1/0,s=-1/0,o=(0,n.Z)(e);try{for(o.s();!(t=o.n()).done;){var l,h=t.value,u=(0,n.Z)(h);try{for(u.s();!(l=u.n()).done;){var c=l.value;c[0]<i&&(i=c[0]),c[0]>r&&(r=c[0]),c[1]<a&&(a=c[1]),c[1]>s&&(s=c[1])}}catch(f){u.e(f)}finally{u.f()}}}catch(f){o.e(f)}finally{o.f()}return[i,a,r,s]}function c(e){return e?e.rings?u(e.rings):e.paths?u(e.paths):(0,s.YX)(e)?[e.xmin,e.ymin,e.xmax,e.ymax]:null:null}function f(e,t,i,n,a){var s=(0,r.Z)(e,4),o=s[0],h=s[1],u=s[2],c=s[3];if(u<o||c<h)return[0,0,0];var f=u-o,v=c-h,m=l.s4,d=Math.floor(.5*(64-m)),y=(128-2*(d+m))/Math.max(f,v),p=Math.round(f*y)+2*d,_=Math.round(v*y)+2*d,g=1;t&&(g=_/y/(t.ymax-t.ymin));var P=0,k=0,M=1;n&&(a?t&&i&&t.ymax-t.ymin>0&&(M=(t.xmax-t.xmin)/(t.ymax-t.ymin),P=n.x/(i*M),k=n.y/i):(P=n.x,k=n.y)),t&&(P=.5*(t.xmax+t.xmin)+P*(t.xmax-t.xmin),k=.5*(t.ymax+t.ymin)+k*(t.ymax-t.ymin)),P-=o,k-=h,P*=y,k*=y;var x=(P+=d)/p-.5,b=(k+=d)/_-.5;return a&&i&&(x*=i*M,b*=i),[g,x,b]}function v(e){var t,i=function(e){return e?e.rings?e.rings:e.paths?e.paths:void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:null:null}(e.geom),a=function(e){var t,i=1/0,r=-1/0,a=1/0,s=-1/0,l=(0,n.Z)(e);try{for(l.s();!(t=l.n()).done;){var h,u=t.value,c=(0,n.Z)(u);try{for(c.s();!(h=c.n()).done;){var f=h.value;f[0]<i&&(i=f[0]),f[0]>r&&(r=f[0]),f[1]<a&&(a=f[1]),f[1]>s&&(s=f[1])}}catch(v){c.e(v)}finally{c.f()}}}catch(v){l.e(v)}finally{l.f()}return new o.Z(i,a,r-i,s-a)}(i),s=l.s4,h=Math.floor(.5*(64-s)),u=(128-2*(h+s))/Math.max(a.width,a.height),c=Math.round(a.width*u)+2*h,f=Math.round(a.height*u)+2*h,v=[],d=(0,n.Z)(i);try{for(d.s();!(t=d.n()).done;){var y=t.value;if(y&&y.length>1){var p,_=[],g=(0,n.Z)(y);try{for(g.s();!(p=g.n()).done;){var P=p.value,k=(0,r.Z)(P,2),M=k[0],x=k[1];M-=a.x,x-=a.y,M*=u,x*=u,M+=h-.5,x+=h-.5,e.asFill?_.push([M,x]):_.push([Math.round(M),Math.round(x)])}}catch(C){g.e(C)}finally{g.f()}if(e.asFill){var b=_.length-1;_[0][0]===_[b][0]&&_[0][1]===_[b][1]||_.push(_[0])}v.push(_)}}}catch(C){d.e(C)}finally{d.f()}var S=function(e,t,i,r){for(var a=t*i,s=new Array(a),o=r*r+1,l=0;l<a;++l)s[l]=o;var h,u=(0,n.Z)(e);try{for(u.s();!(h=u.n()).done;)for(var c=h.value,f=c.length,v=1;v<f;++v){var m=c[v-1],d=c[v],y=void 0,p=void 0,_=void 0,g=void 0;m[0]<d[0]?(y=m[0],p=d[0]):(y=d[0],p=m[0]),m[1]<d[1]?(_=m[1],g=d[1]):(_=d[1],g=m[1]);var P=Math.floor(y)-r,k=Math.floor(p)+r,M=Math.floor(_)-r,x=Math.floor(g)+r;P<0&&(P=0),k>t&&(k=t),M<0&&(M=0),x>i&&(x=i);for(var b=d[0]-m[0],S=d[1]-m[1],w=b*b+S*S,I=P;I<k;I++)for(var L=M;L<x;L++){var z=void 0,O=void 0,A=(I-m[0])*b+(L-m[1])*S;A<0?(z=m[0],O=m[1]):A>w?(z=d[0],O=d[1]):(A/=w,z=m[0]+A*b,O=m[1]+A*S);var Z=(I-z)*(I-z)+(L-O)*(L-O),N=(i-L-1)*t+I;Z<s[N]&&(s[N]=Z)}}}catch(C){u.e(C)}finally{u.f()}for(var T=0;T<a;++T)s[T]=Math.sqrt(s[T]);return s}(v,c,f,h);return e.asFill&&function(e,t,i,r,a){var s,o=(0,n.Z)(e);try{for(o.s();!(s=o.n()).done;)for(var l=s.value,h=l.length,u=1;u<h;++u){var c=l[u-1],f=l[u],v=void 0,m=void 0,d=void 0,y=void 0;c[0]<f[0]?(v=c[0],m=f[0]):(v=f[0],m=c[0]),c[1]<f[1]?(d=c[1],y=f[1]):(d=f[1],y=c[1]);var p=Math.floor(v),_=Math.floor(m)+1,g=Math.floor(d),P=Math.floor(y)+1;p<r&&(p=r),_>t-r&&(_=t-r),g<r&&(g=r),P>i-r&&(P=i-r);for(var k=g;k<P;++k)if(c[1]>k!=f[1]>k){for(var M=(i-k-1)*t,x=p;x<_;++x)x<(f[0]-c[0])*(k-c[1])/(f[1]-c[1])+c[0]&&(a[M+x]=-a[M+x]);for(var b=r;b<p;++b)a[M+b]=-a[M+b]}}}catch(C){o.e(C)}finally{o.f()}}(v,c,f,h,S),[m(S,h),c,f]}function m(e,t){for(var i=2*t,r=e.length,n=new Uint8Array(4*r),s=0;s<r;++s){var o=.5-e[s]/i;(0,a.I)(o,n,4*s)}return n}},22532:function(e,t,i){i.d(t,{Z:function(){return h}});var r=i(37762),n=i(15671),a=i(43144),s=i(17842),o=i(81283);function l(e){return"rgba(".concat(e.slice(0,3).toString(),",").concat(e[3],")")}var h=function(){function e(t){(0,n.Z)(this,e),t&&(this._textRasterizationCanvas=t)}return(0,a.Z)(e,[{key:"rasterizeText",value:function(e,t){var i;this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));var n=this._textRasterizationCanvas,a=n.getContext("2d");this._setFontProperties(a,t),this._parameters=t,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();var h=t.font,u=h.decoration,c=h.weight;this._lineThroughWidthOffset=u&&"line-through"===u?.1*this._lineHeight:0;var f=null!=t.backgroundColor||null!=t.borderLine,v=f?o.c9:0,m=this._computeTextWidth(a,t)+2*v,d=this._lineHeight*this._textLines.length+2*v;if(n.width=m+2*this._lineThroughWidthOffset,n.height=d,0===n.width||0===n.height)return n.width=n.height=1,{size:[0,0],image:new Uint32Array(0),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0,canvas:n};this._renderedLineHeight=Math.round(this._lineHeight*t.pixelRatio),this._renderedHaloSize=(0,s.F2)(t.halo.size)*t.pixelRatio,this._renderedWidth=m*t.pixelRatio,this._renderedHeight=d*t.pixelRatio,this._lineThroughWidthOffset*=t.pixelRatio;var y=null!==(i=t.color)&&void 0!==i?i:[0,0,0,0],p=t.halo&&t.halo.color?t.halo.color:[0,0,0,0];this._fillStyle=l(y),this._haloStyle="rgb(".concat(p.slice(0,3).toString(),")");var _=this._renderedLineHeight,g=this._renderedHaloSize;a.save(),a.clearRect(0,0,n.width,n.height),this._setFontProperties(a,t);var P=v*t.pixelRatio,k=function(e,t){return"center"===e?.5*t:"right"===e?t:0}(a.textAlign,this._renderedWidth-2*P)+g+P,M=g+P,x=g>0,b=this._lineThroughWidthOffset,S=0;if(f){var C,w,I,L,z;a.save();var O=null!==(C=t.backgroundColor)&&void 0!==C?C:[0,0,0,0],A=null!==(w=null===(I=t.borderLine)||void 0===I?void 0:I.color)&&void 0!==w?w:[0,0,0,0],Z=2*(0,s.F2)(null!==(L=null===(z=t.borderLine)||void 0===z?void 0:z.size)&&void 0!==L?L:0);a.fillStyle=l(O),a.strokeStyle=l(A),a.lineWidth=Z,a.fillRect(0,0,n.width,n.height),a.strokeRect(0,0,n.width,n.height),a.restore()}x&&this._renderHalo(a,k,M,b,S,t),S+=M,b+=k;var N,T=(0,r.Z)(this._textLines);try{for(T.s();!(N=T.n()).done;){var F=N.value;x?(a.globalCompositeOperation="destination-out",a.fillStyle="rgb(0, 0, 0)",a.fillText(F,b,S),a.globalCompositeOperation="source-over",a.fillStyle=this._fillStyle,a.fillText(F,b,S)):(a.fillStyle=this._fillStyle,a.fillText(F,b,S)),u&&"none"!==u&&this._renderDecoration(a,b,S,u,c),S+=_}}catch(U){T.e(U)}finally{T.f()}a.restore();var E,R,G=this._renderedWidth+2*this._lineThroughWidthOffset,X=this._renderedHeight,H=a.getImageData(0,0,G,X),D=new Uint8Array(H.data);if(t.premultiplyColors)for(var Y,V=0;V<D.length;V+=4)Y=D[V+3]/255,D[V]=D[V]*Y,D[V+1]=D[V+1]*Y,D[V+2]=D[V+2]*Y;switch(t.horizontalAlignment){case"left":E=-.5;break;case"right":E=.5;break;default:E=0}switch(t.verticalAlignment){case"bottom":R=-.5;break;case"top":R=.5;break;default:R=0}return{size:[G,X],image:new Uint32Array(D.buffer),sdf:!1,simplePattern:!1,anchorX:E,anchorY:R,canvas:n}}},{key:"_renderHalo",value:function(e,t,i,r,n,a){var s=this._renderedWidth,o=this._renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement("canvas")),this._haloRasterizationCanvas.width=s,this._haloRasterizationCanvas.height=o;var l=this._haloRasterizationCanvas,h=l.getContext("2d");h.clearRect(0,0,s,o),this._setFontProperties(h,a);var u=a.font,c=u.decoration,f=u.weight;h.fillStyle=this._haloStyle,h.strokeStyle=this._haloStyle,h.lineJoin="round",this._renderHaloNative(h,t,i,c,f),e.globalAlpha=this._parameters.halo.color[3],e.drawImage(l,0,0,s,o,r,n,s,o),e.globalAlpha=1}},{key:"_renderHaloNative",value:function(e,t,i,n,a){var s,o=this._renderedLineHeight,l=this._renderedHaloSize,h=(0,r.Z)(this._textLines);try{for(h.s();!(s=h.n()).done;){for(var u=s.value,c=2*l,f=0;f<5;f++){var v=(.6+.1*f)*c;e.lineWidth=v,e.strokeText(u,t,i),n&&"none"!==n&&this._renderDecoration(e,t,i,n,a,v)}i+=o}}catch(m){h.e(m)}finally{h.f()}}},{key:"_setFontProperties",value:function(e,t){var i,r=Math.max(t.size,.5),n=t.font,a="".concat(n.style," ").concat(n.weight," ").concat((0,s.F2)(r*t.pixelRatio).toFixed(1),"px ").concat(n.family,", sans-serif");switch(e.font=a,e.textBaseline="top",t.horizontalAlignment){case"left":default:i="left";break;case"right":i="right";break;case"center":i="center"}e.textAlign=i}},{key:"computeTextSize",value:function(e,t){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));var i=this._textRasterizationCanvas,r=i.getContext("2d");this._setFontProperties(r,t),this._parameters=t,this._textLines=e.split(/\r?\n/),this._lineHeight=this._computeLineHeight();var n=this._computeTextWidth(r,t),a=this._lineHeight*this._textLines.length;return i.width=n,i.height=a,[n*t.pixelRatio,a*t.pixelRatio]}},{key:"_computeTextWidth",value:function(e,t){var i,n=0,a=(0,r.Z)(this._textLines);try{for(a.s();!(i=a.n()).done;){var o=i.value;n=Math.max(n,e.measureText(o).width)}}catch(h){a.e(h)}finally{a.f()}var l=t.font;return("italic"===l.style||"oblique"===l.style||"string"==typeof l.weight&&("bold"===l.weight||"bolder"===l.weight)||"number"==typeof l.weight&&l.weight>600)&&(n+=.3*e.measureText("w").width),n+=2*(0,s.F2)(this._parameters.halo.size),Math.round(n)}},{key:"_computeLineHeight",value:function(){var e=1.275*this._parameters.size,t=this._parameters.font.decoration;return t&&"underline"===t&&(e*=1.3),Math.round(e+2*(0,s.F2)(this._parameters.halo.size))}},{key:"_renderDecoration",value:function(e,t,i,r,n,a){var s=.9*this._lineHeight,o="bold"===n?.06:"bolder"===n?.09:.04;switch(e.textAlign){case"center":t-=this._renderedWidth/2;break;case"right":t-=this._renderedWidth}var l=e.textBaseline;if("underline"===r)switch(l){case"top":i+=s;break;case"middle":i+=s/2}else if("line-through"===r)switch(l){case"top":i+=s/1.5;break;case"middle":i+=s/3}var h=a?1.5*a:Math.ceil(s*o);e.save(),e.beginPath(),e.strokeStyle=e.fillStyle,e.lineWidth=h,e.moveTo(t-this._lineThroughWidthOffset,i),e.lineTo(t+this._renderedWidth+2*this._lineThroughWidthOffset,i),e.stroke(),e.restore()}}]),e}()},98991:function(e,t,i){i.d(t,{_:function(){return T},S:function(){return G}});var r=i(1413),n=i(29439),a=i(93433),s=i(74165),o=i(37762),l=i(15861),h=i(15671),u=i(43144),c=i(51995),f=i(82272),v=i(84652),m=i(32718),d=i(17842),y=i(643),p=i(819),_=i(66726),g=i(78915),P=i(48202),k=.05;function M(e){return Math.max(Math.round(e/k),1)*k}var x=new Set(["StartTimeOffset","Duration","RepeatDelay"]);function b(e,t){return x.has(t)?M(e):e}var S=i(6388),C=i(31027),w=i(95954),I=i(91935),L=i(94109),z=i(93592),O=m.Z.getLogger("esri.symbols.cim.cimAnalyzer");function A(e){switch(e){case"Butt":return P.RL.BUTT;case"Square":return P.RL.SQUARE;default:return P.RL.ROUND}}function Z(e){switch(e){case"Bevel":return P.AH.BEVEL;case"Miter":return P.AH.MITER;default:return P.AH.ROUND}}function N(e){var t=e.markerPlacement;return t&&t.angleToLine?P.v2.MAP:P.v2.SCREEN}var T=function(){function e(t,i){(0,h.Z)(this,e),this._cimLayers=[],this._poMap={},this._primitiveOverrides=[],this._resourceManager=t,this._info=i}return(0,u.Z)(e,[{key:"analyzeSymbolReference",value:function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t,i,r){var n,a,l,h,u,c,f,v=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._cimLayers=null!==r&&void 0!==r?r:[],t){e.next=2;break}return e.abrupt("return",this._cimLayers);case 2:if(!t.primitiveOverrides){e.next=21;break}this._primitiveOverrides=t.primitiveOverrides,this._poMap={},n=[],a=this._info,l=(0,o.Z)(this._primitiveOverrides),e.prev=6,u=(0,s.Z)().mark((function e(){var t,i,r,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,(i=t.valueExpressionInfo)&&a?(r=i.expression,o=(0,p.Yi)(r,a.spatialReference,a.fields).then((function(e){null!=e&&v._setPoMap(t.primitiveName,t.propertyName,e)})),n.push(o)):null!=t.value&&v._setPoMap(t.primitiveName,t.propertyName,t.value),e.t0=n.length>0,!e.t0){e.next=7;break}return e.next=7,Promise.all(n);case 7:case"end":return e.stop()}}),e)})),l.s();case 9:if((h=l.n()).done){e.next=13;break}return e.delegateYield(u(),"t0",11);case 11:e.next=9;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(6),l.e(e.t1);case 18:return e.prev=18,l.f(),e.finish(18);case 21:if(c=t.symbol,f=[],g.B$.fetchResources(c,this._resourceManager,f),e.t2=f.length>0,!e.t2){e.next=27;break}return e.next=27,Promise.all(f);case 27:return this._analyzeSymbol(c,i),e.abrupt("return",this._cimLayers);case 29:case"end":return e.stop()}}),e,this,[[6,15,18,21]])})));return function(t,i,r){return e.apply(this,arguments)}}()},{key:"_analyzeSymbol",value:function(e,t){switch(null===e||void 0===e?void 0:e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this._analyzeMultiLayerSymbol(e,t,1,0,0,0)}}},{key:"_analyzeMultiLayerSymbol",value:function(e,t,i,r,n,s){var o,l=null===e||void 0===e?void 0:e.symbolLayers;if(l){var h=e.effects,u=P.v2.SCREEN,c=null!==(o=g.B$.getSize(e))&&void 0!==o?o:0;"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(u=P.v2.MAP);for(var f="CIMPolygonSymbol"===e.type,v=l.length;v--;){var m,d=l[v];if(d&&!1!==d.enable){var y=void 0;(null===h||void 0===h?void 0:h.length)&&(y=(0,a.Z)(h));var p=d.effects;(null===p||void 0===p?void 0:p.length)&&(h?(m=y).push.apply(m,(0,a.Z)(p)):y=(0,a.Z)(p));var _,k=[];g.E0.findEffectOverrides(y,this._primitiveOverrides,k),_=k.length>0?this._createEffectsOverrideFunction(y,k):y;switch(g.E0.findApplicableOverrides(d,this._primitiveOverrides,[]),d.type){case"CIMSolidFill":this._analyzeSolidFill(d,_);break;case"CIMPictureFill":this._analyzePictureFill(d,_);break;case"CIMHatchFill":this._analyzeHatchFill(d,_);break;case"CIMGradientFill":this._analyzeGradientFill(d,_);break;case"CIMSolidStroke":this._analyzeSolidStroke(d,_,f,c);break;case"CIMPictureStroke":this._analyzePictureStroke(d,_,f,c);break;case"CIMGradientStroke":this._analyzeGradientStroke(d,_,f,c);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":"CIMLineSymbol"===e.type&&(u=N(d));var M=[],x=d.primitiveName;x&&M.push(x),this._analyzeMarker(d,_,null,M,u,c,1,t,i,r,n,s);break;default:O.error("Cannot analyze CIM layer",d.type)}}}}}},{key:"_analyzeSolidFill",value:function(e,t){var i=e.primitiveName,r=(0,C.NO)(e.color),a=this._analyzePrimitiveOverrides(i,t,null,null),s=(0,n.Z)(a,2),o=s[0],l=s[1],h=(0,y.hP)(JSON.stringify(e)+l).toString();this._cimLayers.push({type:"fill",templateHash:h,materialHash:o?function(){return h}:h,cim:e,materialOverrides:null,colorLocked:!!e.colorLocked,color:this._createOverrideFunction(i,"Color",r,E),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t,applyRandomOffset:!1,sampleAlphaOnly:!0})}},{key:"_analyzePictureFill",value:function(e,t){var i=e.primitiveName,r=(0,C.cO)(e),a=this._analyzePrimitiveOverrides(i,t,null,null),s=(0,n.Z)(a,2),o=s[0],l=s[1],h=(0,y.hP)(JSON.stringify(e)+l).toString(),u=(0,y.hP)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),c=(0,C.NA)(e.height,_.v$),f=(0,C.NA)(e.scaleX,1);if("width"in e&&"number"==typeof e.width){var v=e.width,m=1,d=this._resourceManager.getResource(e.url);null!=d&&(m=d.width/d.height),f/=m*(c/v)}this._cimLayers.push({type:"fill",templateHash:h,materialHash:o?function(){return u}:u,cim:e,materialOverrides:null,colorLocked:!!e.colorLocked,effects:t,color:this._createOverrideFunction(i,"TintColor",r,E),height:this._createOverrideFunction(i,"Height",c),scaleX:this._createOverrideFunction(i,"ScaleX",f),angle:this._createOverrideFunction(i,"Rotation",(0,C.NA)(e.rotation)),offsetX:this._createOverrideFunction(i,"OffsetX",(0,C.NA)(e.offsetX)),offsetY:this._createOverrideFunction(i,"OffsetY",(0,C.NA)(e.offsetY)),url:e.url,applyRandomOffset:!1,sampleAlphaOnly:!1})}},{key:"_analyzeHatchFill",value:function(e,t){var i,r=this,a=e.primitiveName,s=this._analyzeMaterialOverrides(a,["Rotation","OffsetX","OffsetY"]),o=this._analyzePrimitiveOverrides(a,t,null,null),l=(0,n.Z)(o,2),h=l[0],u=l[1],c=(0,y.hP)(JSON.stringify(e)+u).toString(),f=(0,y.hP)("".concat(e.separation).concat(JSON.stringify(e.lineSymbol))).toString(),v={r:255,g:255,b:255,a:1},m=!1,d=null===(i=e.lineSymbol)||void 0===i||null===(i=i.symbolLayers)||void 0===i?void 0:i.find((function(e){var t;return"CIMSolidStroke"===e.type&&null!=(null===(t=r._poMap[e.primitiveName])||void 0===t?void 0:t.Color)}));if(d){v=(0,C.NO)(d.color);var p="function"==typeof(v=this._createOverrideFunction(d.primitiveName,"Color",v,E));h=h||p,m=null!=d.color||p}this._cimLayers.push({type:"fill",templateHash:c,materialHash:h&&s?this._createMaterialHashFunction(f,s):f,cim:e,materialOverrides:s,colorLocked:!!e.colorLocked,effects:t,color:v,height:this._createOverrideFunction(a,"Separation",(0,C.NA)(e.separation,_.rC)),scaleX:1,angle:this._createOverrideFunction(a,"Rotation",(0,C.NA)(e.rotation)),offsetX:this._createOverrideFunction(a,"OffsetX",(0,C.NA)(e.offsetX)),offsetY:this._createOverrideFunction(a,"OffsetY",(0,C.NA)(e.offsetY)),applyRandomOffset:!1,sampleAlphaOnly:!0,hasUnresolvedReplacementColor:!m})}},{key:"_analyzeGradientFill",value:function(e,t){var i=e.primitiveName,r=this._analyzePrimitiveOverrides(i,t,null,null),a=(0,n.Z)(r,2),s=a[0],o=a[1],l=(0,y.hP)(JSON.stringify(e)+o).toString();this._cimLayers.push({type:"fill",templateHash:l,materialHash:s?function(){return l}:l,cim:e,materialOverrides:null,colorLocked:!!e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,applyRandomOffset:!1,sampleAlphaOnly:!1})}},{key:"_analyzeSolidStroke",value:function(e,t,i,r){var s,o,l=e.primitiveName,h=(0,C.NO)(e.color),u=(0,C.NA)(e.width,_.KM),c=A(e.capStyle),f=Z(e.joinStyle),v=e.miterLimit,m=this._analyzePrimitiveOverrides(l,t,null,null),d=(0,n.Z)(m,2),p=d[0],g=d[1],P=(0,y.hP)(JSON.stringify(e)+g).toString();if(t&&t instanceof Array&&t.length>0){var k=t[t.length-1];if("CIMGeometricEffectDashes"===k.type&&"NoConstraint"===k.lineDashEnding&&null===k.offsetAlongLine){var M=(t=(0,a.Z)(t)).pop();s=M.dashTemplate,o=M.scaleDash}}this._cimLayers.push({type:"line",templateHash:P,materialHash:p?function(){return P}:P,cim:e,materialOverrides:null,isOutline:i,colorLocked:!!e.colorLocked,effects:t,color:this._createOverrideFunction(l,"Color",h,E),width:this._createOverrideFunction(l,"Width",u),cap:this._createOverrideFunction(l,"CapStyle",c),join:this._createOverrideFunction(l,"JoinStyle",f),miterLimit:v&&this._createOverrideFunction(l,"MiterLimit",v),referenceWidth:r,zOrder:F(e.name),dashTemplate:s,scaleDash:o,sampleAlphaOnly:!0})}},{key:"_analyzePictureStroke",value:function(e,t,i,r){var a=(0,y.hP)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions))).toString(),s=e.primitiveName,o=(0,C.cO)(e),l=(0,C.NA)(e.width,_.KM),h=A(e.capStyle),u=Z(e.joinStyle),c=e.miterLimit,f=this._analyzePrimitiveOverrides(s,t,null,null),v=(0,n.Z)(f,2),m=v[0],d=v[1],p=(0,y.hP)(JSON.stringify(e)+d).toString();this._cimLayers.push({type:"line",templateHash:p,materialHash:m?function(){return a}:a,cim:e,materialOverrides:null,isOutline:i,colorLocked:!!e.colorLocked,effects:t,color:this._createOverrideFunction(s,"TintColor",o,E),width:this._createOverrideFunction(s,"Width",l),cap:this._createOverrideFunction(s,"CapStyle",h),join:this._createOverrideFunction(s,"JoinStyle",u),miterLimit:c&&this._createOverrideFunction(s,"MiterLimit",c),referenceWidth:r,zOrder:F(e.name),dashTemplate:null,scaleDash:!1,url:e.url,sampleAlphaOnly:!1})}},{key:"_analyzeGradientStroke",value:function(e,t,i,r){var a=e.primitiveName,s=(0,C.NA)(e.width,_.KM),o=A(e.capStyle),l=Z(e.joinStyle),h=e.miterLimit,u=this._analyzePrimitiveOverrides(a,t,null,null),c=(0,n.Z)(u,2),f=c[0],v=c[1],m=(0,y.hP)(JSON.stringify(e)+v).toString();this._cimLayers.push({type:"line",templateHash:m,materialHash:f?function(){return m}:m,cim:e,materialOverrides:null,isOutline:i,colorLocked:!!e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},width:this._createOverrideFunction(a,"Width",s),cap:this._createOverrideFunction(a,"CapStyle",o),join:this._createOverrideFunction(a,"JoinStyle",l),miterLimit:h&&this._createOverrideFunction(a,"MiterLimit",h),referenceWidth:r,zOrder:F(e.name),dashTemplate:null,scaleDash:!1,sampleAlphaOnly:!1})}},{key:"_analyzeMarker",value:function(e,t,i,r,n,a,s,o,l,h,u,c){var f=arguments.length>12&&void 0!==arguments[12]&&arguments[12];if(!this._analyzeMarkerInsidePolygon(e,t)){var v=(0,C.NA)(e.size,_.w7),m=(0,C.NA)(e.rotation),d=(0,C.NA)(e.offsetX),y=(0,C.NA)(e.offsetY),p=this._createOverrideFunction(e.primitiveName,"Size",v),g=this._createOverrideFunction(e.primitiveName,"Rotation",m),P=this._createOverrideFunction(e.primitiveName,"OffsetX",d),k=this._createOverrideFunction(e.primitiveName,"OffsetY",y);p=this._transformSize(p,s),g=this._transformRotation(g,!!e.rotateClockwise,h);var M=this._transformOffsetX(P,k,h,s,u),x=this._transformOffsetY(P,k,h,s,c);switch(P=M,k=x,e.type){case"CIMPictureMarker":this._analyzePictureMarker(e,t,i,r,n,a,p,g,P,k,e.colorLocked||f);break;case"CIMVectorMarker":this._analyzeVectorMarker(e,t,i,r,n,a,s,o,p,g,P,k,e.colorLocked||f)}}}},{key:"_analyzeMarkerInsidePolygon",value:function(e,t){var i=e.markerPlacement,r=e.type;if(!i||"CIMMarkerPlacementInsidePolygon"!==i.type)return!1;if("CIMVectorMarker"===r||"CIMPictureMarker"===r){var a=e.primitiveName;if(a){var s=this._analyzePrimitiveOverrides([a],t,null,null),l=(0,n.Z)(s,2),h=l[0];l[1];if(h)return!1}var u=i.primitiveName;if(u){var c=this._analyzePrimitiveOverrides([u],t,null,null),f=(0,n.Z)(c,2),v=f[0];f[1];if(v)return!1}if("CIMVectorMarker"===r){var m=e.markerGraphics;if(m){var p,_=(0,o.Z)(m);try{for(_.s();!(p=_.n()).done;){var g=p.value.symbol;if("CIMPolygonSymbol"===(null===g||void 0===g?void 0:g.type)&&g.symbolLayers){var P,k=g.symbolLayers,M=(0,o.Z)(k);try{for(M.s();!(P=M.n()).done;){if("CIMSolidStroke"===P.value.type)return!1}}catch(G){M.e(G)}finally{M.f()}}}}catch(G){_.e(G)}finally{_.f()}}}else{if(e.animatedSymbolProperties)return!1}}var x=i,b=Math.abs(x.stepX),S=Math.abs(x.stepY);if(0===b||0===S)return!0;var w,I,z=new Set(["Rotation","OffsetX","OffsetY"]),O=this._primitiveOverrides.filter((function(t){return t.primitiveName!==e.primitiveName||!z.has(t.propertyName)})),A="url"in e&&"string"==typeof e.url?e.url:void 0,Z=(0,y.hP)(JSON.stringify(e)).toString(),N=null;if("Random"===i.gridType){var T=(0,d.Wz)(L.KA),F=Math.max(Math.floor(T/b),1),E=Math.max(Math.floor(T/S),1);N=function(e){return e?e*E:0},I=F*b/(w=S*E)}else i.shiftOddRows?(w=2*S,N=function(e){return e?2*e:0},I=b/S*.5):(w=S,N=null,I=b/S);var R=(0,C.cO)(e);return this._cimLayers.push({type:"fill",templateHash:Z,materialHash:Z,cim:e,materialOverrides:O,colorLocked:!!e.colorLocked,effects:t,color:R,height:this._createOverrideFunction(x.primitiveName,"StepY",w,N),scaleX:I,angle:x.gridAngle,offsetX:(0,C.NA)(x.offsetX),offsetY:(0,C.NA)(x.offsetY),url:A,applyRandomOffset:"Random"===i.gridType,sampleAlphaOnly:!A,hasUnresolvedReplacementColor:!0}),!0}},{key:"_analyzePictureMarker",value:function(e,t,i,r,a,s,o,l,h,u,c){var f,v=(0,C.NA)(e.scaleX,1),m=(0,C.cO)(e),d=(0,y.hP)("".concat(e.url).concat(JSON.stringify(e.colorSubstitutions)).concat(JSON.stringify(e.animatedSymbolProperties))).toString();i||(i=this._createMarkerPlacementOverrideFunction(e.markerPlacement));var p=this._createAnimatedSymbolPropertiesOverrideFunction(e.animatedSymbolProperties),_=this._analyzePrimitiveOverrides(r,t,i,p),g=(0,n.Z)(_,2),P=g[0],k=g[1],M=(0,y.hP)(JSON.stringify(e)+k).toString(),x=null!==(f=e.anchorPoint)&&void 0!==f?f:{x:0,y:0};if("width"in e&&"number"==typeof e.width){var b=e.width,S=1,w=this._resourceManager.getResource(e.url);null!=w&&(S=w.width/w.height),v/=S*((0,C.NA)(e.size)/b)}function I(e,t){return null!=p?(0,C.hf)(p,e,t):null}var L=e.animatedSymbolProperties&&!0===e.animatedSymbolProperties.randomizeStartTime?function(e,t,i,r){var n=(0,z.$)(null!==r&&void 0!==r?r:0),a=I(e,t);return d+"-MATERIALGROUP(".concat(n,")")+"-ASP(".concat(JSON.stringify(a),")")}:P?function(e,t){var i=I(e,t);return d+"-ASP(".concat(JSON.stringify(i),")")}:d;this._cimLayers.push({type:"marker",templateHash:M,materialHash:L,cim:e,materialOverrides:null,colorLocked:!!e.colorLocked||!!c,effects:t,scaleSymbolsProportionally:!1,alignment:a,size:o,scaleX:this._createOverrideFunction(e.primitiveName,"ScaleX",v),rotation:l,offsetX:h,offsetY:u,color:this._createOverrideFunction(e.primitiveName,"TintColor",m,E),anchorPoint:{x:x.x,y:x.y},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:!1,referenceSize:s,sizeRatio:1,markerPlacement:i,url:e.url,animatedSymbolProperties:p})}},{key:"_analyzeVectorMarker",value:function(e,t,i,r,n,a,s,l,h,u,c,f,v){var m=e.markerGraphics;if(m){var d=e.frame,y=0,p=1;e.scaleSymbolsProportionally&&d&&(y=d.ymax-d.ymin,p=this._transformSize(h,1/y)),p=this._transformSize(p,s),i||(i=this._createMarkerPlacementOverrideFunction(e.markerPlacement));var _,g=(0,o.Z)(m);try{for(g.s();!(_=g.n()).done;){var P=_.value;if(P){var k=P.symbol;if(!k)continue;var M=P.primitiveName;M&&r.push(M);var x=c,b=f;if(("CIMPointSymbol"===k.type||"CIMTextSymbol"===k.type)&&d){var S=0,C=0,w=P.geometry;"x"in w&&"y"in w&&(S+=w.x-.5*(d.xmin+d.xmax),C+=w.y-.5*(d.ymin+d.ymax));var I=e.anchorPoint;I&&("Absolute"===e.anchorPointUnits?(S-=I.x,C-=I.y):d&&(S-=(d.xmax-d.xmin)*I.x,C-=(d.ymax-d.ymin)*I.y)),x=this._transformOffsetX(S,C,u,p,c),b=this._transformOffsetY(S,C,u,p,f)}switch(k.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":l||H(k)?this._analyzeMultiLayerGraphicNonSDF(e,t,i,null,P,r,n,a,y,!!v||!!e.colorLocked):this._analyzeMultiLayerGraphic(e,t,i,null,P,r,n,a,y,p,h,u,x,b,!!v||!!e.colorLocked);break;case"CIMTextSymbol":this._analyzeTextGraphic(e,t,i,P,r,n,a,y,p,h,u,x,b,!!v||!!e.colorLocked)}M&&r.pop()}}}catch(L){g.e(L)}finally{g.f()}}}},{key:"_analyzeMultiLayerGraphic",value:function(e,t,i,a,s,l,h,u,c,f,v,m,d,p,_){var g=this,P=s.symbol,k=P.symbolLayers;if(k){var M=k.length;if(X(k))this._analyzeCompositeMarkerGraphic(e,t,i,a,s,k,l,h,u,c,v,m,d,p,!!_||!!e.colorLocked);else{var x=this._resourceManager.geometryEngine,b=w.j.applyEffects(P.effects,s.geometry,x);if(b)for(var I=function(){var P=k[M];if(!P||!1===P.enable)return 0;var I=P.primitiveName;switch(I&&l.push(I),P.type){case"CIMSolidFill":case"CIMSolidStroke":var L,z=w.j.applyEffects(P.effects,b,x),O=(0,S.bk)(z);if(!O)return 0;var A="Relative"!==e.anchorPointUnits,Z=(0,S.UV)(O,e.frame,e.size,e.anchorPoint,A),N=(0,n.Z)(Z,3),T=N[0],F=N[1],R=N[2],G="CIMSolidFill"===P.type,X={type:"sdf",geom:z,asFill:G},H=P.path,D=G?(0,C.NO)((0,C.W7)(P)):null==H?(0,C.NO)((0,C.$Z)(P)):{r:0,g:0,b:0,a:0},Y=G?{r:0,g:0,b:0,a:0}:(0,C.NO)((0,C.$Z)(P)),V=null!==(L=(0,C.F)(P))&&void 0!==L?L:0;if(!G&&!V)break;var U=s.primitiveName,B=null;G&&!P.colorLocked&&(B=g._createOverrideFunction(U,"FillColor",D,E));var W=null;G||P.colorLocked||(W=g._createOverrideFunction(U,"StrokeColor",Y,E));var J,j=g._createOverrideFunction(U,"StrokeWidth",V),q=!1,$="",K=(0,o.Z)(g._primitiveOverrides);try{for(K.s();!(J=K.n()).done;){var Q=J.value;l.includes(Q.primitiveName)&&(null!=Q.value?$+="-".concat(Q.primitiveName,"-").concat(Q.propertyName,"-").concat(JSON.stringify(Q.value)):Q.valueExpressionInfo&&(q=!0))}}catch(re){K.e(re)}finally{K.f()}(null!=t&&"function"==typeof t||null!=i&&"function"==typeof i)&&(q=!0),((0,C.wO)(v)||(0,C.wO)(m)||(0,C.wO)(d)||(0,C.wO)(p))&&(q=!0);var ee=JSON.stringify((0,r.Z)((0,r.Z)({},e),{},{markerGraphics:null})),te=(0,y.hP)(JSON.stringify(X)+H).toString(),ie=(0,y.hP)(JSON.stringify(s)+JSON.stringify(P)+ee+$).toString();g._cimLayers.push({type:"marker",templateHash:ie,materialHash:q?function(){return te}:te,cim:X,materialOverrides:null,colorLocked:!!P.colorLocked||!!_,effects:t,scaleSymbolsProportionally:!!e.scaleSymbolsProportionally,alignment:h,anchorPoint:{x:F,y:R},isAbsoluteAnchorPoint:A,size:v,rotation:m,offsetX:d,offsetY:p,scaleX:1,frameHeight:c,rotateClockwise:!1,referenceSize:u,sizeRatio:T,color:(0,C.wO)(B)?B:g._createOverrideFunction(I,"Color",D,E),outlineColor:(0,C.wO)(W)?W:g._createOverrideFunction(I,"Color",Y,E),outlineWidth:(0,C.wO)(j)?j:g._createOverrideFunction(I,"Width",V),markerPlacement:i,animatedSymbolProperties:a,path:H});break;case"CIMVectorMarker":P.markerPlacement?g._analyzeMultiLayerGraphicNonSDF(e,t,i,a,s,l,h,u,c,!!_||!!P.colorLocked):g._analyzeMarker(P,t,i,l,h,u,f,!1,v,m,d,p,!!_||!!e.colorLocked);break;default:g._analyzeMultiLayerGraphicNonSDF(e,t,i,a,s,l,h,u,c,!!_||!!e.colorLocked)}I&&l.pop()};M--;)I()}}}},{key:"_analyzeTextGraphic",value:function(e,t,i,a,s,l,h,u,c,v,m,d,p,P){var k,M,x;g.E0.findApplicableOverrides(a,this._primitiveOverrides,[]);var b=a.geometry;if("x"in b&&"y"in b){var S=a.symbol,w=(0,C.BX)(S),I=(0,C.wi)(S.fontStyleName),L=(0,f.BN)(S.fontFamilyName);S.font=(0,r.Z)({family:L,decoration:w},I);var z=(0,C.NA)(S.height,_.zV),O=(0,C.NA)(S.angle),A=(0,C.NA)(S.offsetX),Z=(0,C.NA)(S.offsetY);z=this._transformSize(z,c),O=this._transformRotation(O,!1,m);var N=this._transformOffsetX(A,Z,m,c,d),T=this._transformOffsetY(A,Z,m,c,p);A=N,Z=T;var F=(0,C.NO)((0,C.W7)(S)),R=(0,C.NO)((0,C.$Z)(S)),G=null!==(k=(0,C.F)(S))&&void 0!==k?k:0;G||(R=(0,C.NO)((0,C.W7)(S.haloSymbol)),G=(0,C.NA)(S.haloSize)),G=this._transformSize(G,c);var X=!1;if(null!==(M=S.symbol)&&void 0!==M&&M.symbolLayers){var H,D=(0,o.Z)(S.symbol.symbolLayers);try{for(D.s();!(H=D.n()).done;){var Y=H.value;null!=(0,C.W7)(Y)&&(X=!!Y.colorLocked)}}catch(ue){D.e(ue)}finally{D.f()}}var V=a.primitiveName,U=null;X||(U=this._createOverrideFunction(V,"Color",F,E));var B=null,W=null,J=0;if(S.callout&&"CIMBackgroundCallout"===S.callout.type){var j=S.callout;if(j.backgroundSymbol){var q=j.backgroundSymbol.symbolLayers;if(q){var $,K=(0,o.Z)(q);try{for(K.s();!($=K.n()).done;){var Q=$.value;"CIMSolidFill"===Q.type?B=(0,C.NO)(Q.color):"CIMSolidStroke"===Q.type&&(W=(0,C.NO)(Q.color),J=(0,C.NA)(Q.width,_.KM))}}catch(ue){K.e(ue)}finally{K.f()}}}}var ee=this._analyzePrimitiveOverrides(s,t,i,null),te=(0,n.Z)(ee,2),ie=te[0],re=te[1],ne=JSON.stringify(e.effects)+Number(e.colorLocked||P).toString()+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement)+e.size.toString(),ae=(0,y.hP)(JSON.stringify(a)+ne+re).toString(),se=this._createOverrideFunction(a.primitiveName,"TextString",null!==(x=a.textString)&&void 0!==x?x:"",C.QI,S.textCase);if(null!=se){var oe=S.fontStyleName,le=L+(oe?"-"+oe.toLowerCase():"-regular"),he=le;"string"==typeof se&&se.includes("[")&&S.fieldMap&&(se=(0,C.Qs)(S.fieldMap,se,S.textCase)),this._cimLayers.push({type:"text",templateHash:ae,materialHash:ie||"function"==typeof se||/\[(.*?)\]/.test(se)?function(e,t,i){return he+"-"+(0,C.hf)(se,e,t,i)}:he+"-"+(0,y.hP)(se),cim:S,materialOverrides:null,colorLocked:!!P||!!X,effects:t,alignment:l,anchorPoint:{x:0,y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:le,decoration:w,weight:I.weight,style:I.style,size:z,angle:O,offsetX:A,offsetY:Z,horizontalAlignment:(0,C.X_)(S.horizontalAlignment),verticalAlignment:(0,C.FG)(S.verticalAlignment),text:se,color:(0,C.wO)(U)?U:F,outlineColor:R,outlineSize:G,backgroundColor:B,borderLineColor:W,borderLineWidth:J,lineWidth:null,referenceSize:h,sizeRatio:1,markerPlacement:i})}}}},{key:"_analyzeMultiLayerGraphicNonSDF",value:function(e,t,i,r,a,s,o,l,h,u){var c=this._buildSimpleMarker(e,a),f=e.primitiveName,v=this._analyzeMaterialOverrides(f,["Rotation","OffsetX","OffsetY"]),m=this._analyzePrimitiveOverrides(s,null,null,null),p=(0,n.Z)(m,2),P=(p[0],p[1]),k=g.B$.getTextureAnchor(c,this._resourceManager),M=(0,n.Z)(k,3),x=M[0],b=M[1],S=M[2],w=(0,C.NA)(e.rotation),I=(0,C.NA)(e.offsetX),L=(0,C.NA)(e.offsetY),z=(0,y.hP)(JSON.stringify(c)+P).toString(),O=v&&v.length>0||null!=t&&"function"==typeof t;this._cimLayers.push({type:"marker",templateHash:z,materialHash:O&&v?this._createMaterialHashFunction(z,v):z,cim:c,materialOverrides:v,colorLocked:!!e.colorLocked||!!u,effects:t,scaleSymbolsProportionally:!!e.scaleSymbolsProportionally,alignment:o,anchorPoint:{x:x,y:b},isAbsoluteAnchorPoint:!1,size:(0,C.NA)(e.size,_.w7),rotation:this._createOverrideFunction(f,"Rotation",w),offsetX:this._createOverrideFunction(f,"OffsetX",I),offsetY:this._createOverrideFunction(f,"OffsetY",L),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:h,rotateClockwise:!!e.rotateClockwise,referenceSize:l,sizeRatio:S/(0,d.F2)(e.size),markerPlacement:i,animatedSymbolProperties:r,avoidSDFRasterization:!0})}},{key:"_buildSimpleMarker",value:function(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath}}},{key:"_analyzeCompositeMarkerGraphic",value:function(e,t,i,a,s,l,h,u,c,f,v,m,d,p,g){var P=s.geometry,k=l[0],M=l[1],x=(0,S.bk)(P);if(x){var b="Relative"!==e.anchorPointUnits,w=(0,S.UV)(x,e.frame,e.size,e.anchorPoint,b),I=(0,n.Z)(w,3),L=I[0],z=I[1],O=I[2],A={type:"sdf",geom:P,asFill:!0},Z=M.path,N=M.primitiveName,T=k.primitiveName,F=(0,C.NO)(M.color),R=(0,C.NO)(k.color),G=(0,C.NA)(k.width,_.KM),X=s.primitiveName,H=null;M.colorLocked||g||(H=this._createOverrideFunction(X,"FillColor",F,E));var D=null;k.colorLocked||g||(D=this._createOverrideFunction(X,"StrokeColor",R,E));var Y,V=this._createOverrideFunction(X,"StrokeWidth",G),U=!1,B="",W=(0,o.Z)(this._primitiveOverrides);try{for(W.s();!(Y=W.n()).done;){var J=Y.value;(J.primitiveName===N||J.primitiveName===T||h.includes(J.primitiveName))&&(null!=J.value?B+="-".concat(J.primitiveName,"-").concat(J.propertyName,"-").concat(JSON.stringify(J.value)):J.valueExpressionInfo&&(U=!0))}}catch(K){W.e(K)}finally{W.f()}null!=i&&"function"==typeof i&&(U=!0),((0,C.wO)(v)||(0,C.wO)(m)||(0,C.wO)(d)||(0,C.wO)(p))&&(U=!0);var j=JSON.stringify((0,r.Z)((0,r.Z)({},e),{},{markerGraphics:null})),q=(0,y.hP)(JSON.stringify(A)+Z).toString(),$=(0,y.hP)(JSON.stringify(s)+JSON.stringify(M)+JSON.stringify(k)+j+B).toString();this._cimLayers.push({type:"marker",templateHash:$,materialHash:U?function(){return q}:q,cim:A,materialOverrides:null,colorLocked:!!g,effects:t,scaleSymbolsProportionally:!!e.scaleSymbolsProportionally,alignment:u,anchorPoint:{x:z,y:O},isAbsoluteAnchorPoint:b,size:v,rotation:m,offsetX:d,offsetY:p,scaleX:1,frameHeight:f,rotateClockwise:!1,referenceSize:c,sizeRatio:L,color:(0,C.wO)(H)?H:this._createOverrideFunction(N,"Color",F,E),outlineColor:(0,C.wO)(D)?D:this._createOverrideFunction(T,"Color",R,E),outlineWidth:(0,C.wO)(V)?V:this._createOverrideFunction(T,"Width",G),markerPlacement:i,path:Z,animatedSymbolProperties:a})}}},{key:"_createMaterialHashFunction",value:function(e,t){var i,r=null===(i=this._info)||void 0===i?void 0:i.geometryType;if(r){var n,a=this._poMap,s=(0,o.Z)(t);try{var l=function(){var e=n.value;if(e.valueExpressionInfo){var t=a[e.primitiveName]&&a[e.primitiveName][e.propertyName];t instanceof p.mz&&(e.fn=function(e,i,n){return(0,I.Z)(t,e,{$view:n},r,i)})}};for(s.s();!(n=s.n()).done;)l()}catch(h){s.e(h)}finally{s.f()}}return function(i,r,n){var a,s=(0,o.Z)(t);try{for(s.s();!(a=s.n()).done;){var l=a.value;l.fn&&(l.value=l.fn(i,r,n))}}catch(h){s.e(h)}finally{s.f()}return(0,y.hP)(e+g.E0.buildOverrideKey(t)).toString()}}},{key:"_setPoMap",value:function(e,t,i){var r;this._poMap[e]?r=this._poMap[e]:(r={},this._poMap[e]=r),r[t]=i}},{key:"_createOverrideFunction",value:function(e,t,i,r,n){var a;if(null==e)return i;var s=this._poMap[e];if(null==s)return i;var o=s[t];if("string"==typeof o||"number"==typeof o||o instanceof Array)return r?r.call(null,o,n):o;var l=null===(a=this._info)||void 0===a?void 0:a.geometryType;return null!=o&&o instanceof p.mz&&null!=l?function(e,t,a){var s=(0,I.Z)(o,e,{$view:a},l,t);return null!==s&&r&&(s=r.call(null,s,n)),null!==s?s:i}:i}},{key:"_createEffectsOverrideFunction",value:function(e,t){var i,r,n=this._poMap,a=null===(i=this._info)||void 0===i?void 0:i.geometryType,s=(0,o.Z)(t);try{var l=function(){var e=r.value;if(e.valueExpressionInfo&&a){var t=n[e.primitiveName]&&n[e.primitiveName][e.propertyName];t instanceof p.mz&&(e.fn=function(e,i,r){return(0,I.Z)(t,e,{$view:r},a,i)})}};for(s.s();!(r=s.n()).done;)l()}catch(h){s.e(h)}finally{s.f()}return function(i,r,n){var a,s=(0,o.Z)(t);try{for(s.s();!(a=s.n()).done;){var l=a.value;l.fn&&(l.value=l.fn(i,r,n))}}catch(h){s.e(h)}finally{s.f()}var u,c=[],f=(0,o.Z)(e);try{for(f.s();!(u=f.n()).done;){var m,d=u.value,y=null===(m=d)||void 0===m?void 0:m.primitiveName;if(y){var p,_=!1,g=(0,o.Z)(t);try{for(g.s();!(p=g.n()).done;){var P=p.value;if(P.primitiveName===y){var k=R(P.propertyName);null!=P.value&&P.value!==d[k]&&(_||(d=(0,v.d9)(d),_=!0),d[k]=P.value)}}}catch(h){g.e(h)}finally{g.f()}}c.push(d)}}catch(h){f.e(h)}finally{f.f()}return c}}},{key:"_createMarkerPlacementOverrideFunction",value:function(e){var t,i=[];if(g.E0.findApplicableOverrides(e,this._primitiveOverrides,i),null==e||0===i.length)return e;for(var r=this._poMap,n=null===(t=this._info)||void 0===t?void 0:t.geometryType,a=function(){var e=o[s];if(e.valueExpressionInfo&&n){var t=r[e.primitiveName]&&r[e.primitiveName][e.propertyName];t instanceof p.mz&&(e.fn=function(e,i,r){return(0,I.Z)(t,e,{$view:r},n,i)})}},s=0,o=i;s<o.length;s++)a();return function(t,r,n){for(var a=0,s=i;a<s.length;a++){var o=s[a];o.fn&&(o.value=o.fn(t,r,n))}for(var l=(0,v.d9)(e),h=e.primitiveName,u=0,c=i;u<c.length;u++){var f=c[u];if(f.primitiveName===h){var m=R(f.propertyName);null!=f.value&&f.value!==l[m]&&(l[m]=f.value)}}return l}}},{key:"_createAnimatedSymbolPropertiesOverrideFunction",value:function(e){var t,i=[];if(g.E0.findApplicableOverrides(e,this._primitiveOverrides,i),null==e||0===i.length)return e;var r=null===(t=this._info)||void 0===t?void 0:t.geometryType;if(r){var n,a=this._poMap,s=(0,o.Z)(i);try{var l=function(){var e=n.value;if(e.valueExpressionInfo){var t=a[e.primitiveName]&&a[e.primitiveName][e.propertyName];t instanceof p.mz&&(e.fn=function(e,i,n){return(0,I.Z)(t,e,{$view:n},r,i)})}};for(s.s();!(n=s.n()).done;)l()}catch(h){s.e(h)}finally{s.f()}}return function(t,r,n){for(var a=0,s=i;a<s.length;a++){var o=s[a];o.fn&&(o.value=o.fn(t,r,n))}for(var l=(0,v.d9)(e),h=e.primitiveName,u=0,c=i;u<c.length;u++){var f=c[u];if(f.primitiveName===h){var m=R(f.propertyName);if(null!=f.value){var d=b(f.value,f.propertyName);d!==l[m]&&(l[m]=d)}}}return l}}},{key:"_analyzePrimitiveOverrides",value:function(e,t,i,r){var n=!1,a="";"string"==typeof e&&(e=[e]);var s,l=(0,o.Z)(this._primitiveOverrides);try{for(l.s();!(s=l.n()).done;){var h,u=s.value;(null===(h=e)||void 0===h?void 0:h.includes(u.primitiveName))&&(null!=u.value?a+="-".concat(u.primitiveName,"-").concat(u.propertyName,"-").concat(JSON.stringify(u.value)):u.valueExpressionInfo&&(n=!0))}}catch(c){l.e(c)}finally{l.f()}return null!=t&&"function"==typeof t&&(n=!0),null!=i&&"function"==typeof i&&(n=!0),null!=r&&"function"==typeof r&&(n=!0),[n,a]}},{key:"_analyzeMaterialOverrides",value:function(e,t){return this._primitiveOverrides.filter((function(i){return i.primitiveName!==e||!t.includes(i.propertyName)}))}},{key:"_transformSize",value:function(e,t){return(0,C.wO)(e)||(0,C.wO)(t)?function(i,r,n){return((0,C.wO)(e)?e(i,r,n):e)*((0,C.wO)(t)?t(i,r,n):t)}:e*t}},{key:"_transformRotation",value:function(e,t,i){return(0,C.wO)(e)||(0,C.wO)(i)?function(r,n,a){var s=(0,C.wO)(e)?e(r,n,a):e,o=(0,C.wO)(i)?i(r,n,a):i;return t?o-s:o+s}:t?i-e:i+e}},{key:"_transformOffsetX",value:function(e,t,i,r,n){if(!((0,C.wO)(e)||(0,C.wO)(t)||(0,C.wO)(i)||(0,C.wO)(r)||(0,C.wO)(n))){var a=i*Math.PI/180;if(a){var s=Math.cos(a),o=Math.sin(a);return(s*e-o*t)*r+n}return e*r+n}return function(a,s,o){var l=(0,C.wO)(i)?i(a,s,o):i,h=(0,C.wO)(r)?r(a,s,o):r,u=(0,C.wO)(e)?e(a,s,o):e,c=(0,C.wO)(n)?n(a,s,o):n;return l?(l*=Math.PI/180,(Math.cos(l)*u-Math.sin(l)*((0,C.wO)(t)?t(a,s,o):t))*h+c):u*h+c}}},{key:"_transformOffsetY",value:function(e,t,i,r,n){if(!((0,C.wO)(e)||(0,C.wO)(t)||(0,C.wO)(i)||(0,C.wO)(r)||(0,C.wO)(n))){var a=i*Math.PI/180;if(a){var s=Math.cos(a);return(Math.sin(a)*e+s*t)*r+n}return t*r+n}return function(a,s,o){var l=(0,C.wO)(i)?i(a,s,o):i,h=(0,C.wO)(r)?r(a,s,o):r,u=(0,C.wO)(t)?t(a,s,o):t,c=(0,C.wO)(n)?n(a,s,o):n;if(l){l*=Math.PI/180;var f=Math.cos(l);return(Math.sin(l)*((0,C.wO)(e)?e(a,s,o):e)+f*u)*h+c}return u*h+c}}}]),e}();function F(e){if(e&&0===e.indexOf("Level_")){var t=parseInt(e.substr(6),10);if(!isNaN(t))return t}return 0}function E(e){if(!e||0===e.length)return null;var t=new c.Z(e).toRgba();return{r:t[0],g:t[1],b:t[2],a:t[3]}}function R(e){return e?e.charAt(0).toLowerCase()+e.substr(1):e}function G(e,t){if(!t||0===t.length)return e;var i=(0,v.d9)(e);return g.E0.applyOverrides(i,t),i}var X=function(e){return e&&2===e.length&&e[0].enable&&e[1].enable&&"CIMSolidStroke"===e[0].type&&"CIMSolidFill"===e[1].type&&null==e[0].path&&null==e[1].path&&!e[0].effects&&!e[1].effects};function H(e){var t=e.symbolLayers;if(!t||2!==t.length)return!1;var i=t.find((function(e){var t;return null===(t=e.effects)||void 0===t?void 0:t.find((function(e){return"CIMGeometricEffectDashes"===e.type}))})),r=t.find((function(e){var t;return null===(t=e.effects)||void 0===t?void 0:t.find((function(e){return"CIMGeometricEffectAddControlPoints"===e.type}))}));return!!i&&!!r}},95954:function(e,t,i){i.d(t,{j:function(){return f}});var r=i(93433),n=i(37762),a=i(15671),s=i(43144),o=i(23895),l=i(41116),h=i(35747),u=i(63695),c=i(78915),f=function(){function e(){(0,a.Z)(this,e)}return(0,s.Z)(e,null,[{key:"executeEffects",value:function(e,t,i,r){var a,s=(0,c.Tg)(e),o=new h.z(t),l=(0,n.Z)(e);try{for(l.s();!(a=l.n()).done;){var f=a.value,v=(0,u.h)(f);v&&(o=v.execute(o,f,1.3333333333333333,i,r,s))}}catch(m){l.e(m)}finally{l.f()}return o}},{key:"applyEffects",value:function(e,t,i){if(!e)return t;var a,s,f=(0,c.Tg)(e),v=new h.z(o.z.fromJSONCIM(t)),m=(0,n.Z)(e);try{for(m.s();!(s=m.n()).done;){var d=s.value,y=(0,u.h)(d);y&&(v=y.execute(v,d,1,null,i,f))}}catch(g){m.e(g)}finally{m.f()}for(var p=[],_=null;a=v.next();)p.push.apply(p,(0,r.Z)((0,l.M)(a))),_=a.geometryType;return 0===p.length||null===_?null:"esriGeometryPolygon"===_?{rings:p}:{paths:p}}}]),e}()},91935:function(e,t,i){i.d(t,{Z:function(){return o}});var r=i(1413),n=i(10064),a=i(32718),s=i(58971);function o(e,t,i,n,s){if(null==e)return null;var o=e.referencesGeometry()&&s?h(t,n,s):t,l=e.repurposeFeature(o);try{return e.evaluate((0,r.Z)((0,r.Z)({},i),{},{$feature:l}),e.services)}catch(u){return a.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",u),null}}var l=new Map;function h(e,t,i){var o=i.transform,h=i.hasZ,u=i.hasM;l.has(t)||l.set(t,function(e){var t={};switch(e){case"esriGeometryPoint":return function(e,i,r,n){return(0,s.U1)(i,t,e,r,n)};case"esriGeometryPolygon":return function(e,i,r,n){return(0,s.Ie)(i,t,e,r,n)};case"esriGeometryPolyline":return function(e,i,r,n){return(0,s.G6)(i,t,e,r,n)};case"esriGeometryMultipoint":return function(e,i,r,n){return(0,s.J9)(i,t,e,r,n)};default:return a.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new n.Z("mapview-arcade","Unable to handle geometryType: ".concat(e))),function(e){return e}}}(t));var c=l.get(t)(e.geometry,o,h,u);return(0,r.Z)((0,r.Z)({},e),{},{geometry:c})}},93592:function(e,t,i){i.d(t,{$:function(){return a},f:function(){return n}});var r=i(643);function n(e,t){var i;if("string"==typeof e)i=(0,r.hP)(e+"-seed(".concat(t,")"));else{var n=12;i=e^t;do{i=107*(i>>8^i)+n|0}while(0!=--n)}return(1+i/(1<<31))/2}function a(e){return Math.floor(n(e,s)*o)}var s=53290320,o=10},47975:function(e,t,i){i.d(t,{Nr:function(){return L}});var r=i(37762),n=i(29439),a=i(15671),s=i(43144),o=i(17842),l=i(22018),h=i(11245),u=i(88396),c=i(15245),f=i(38999),v=i(73271),m=i(12233),d=function(){function e(t,i,r,n){(0,a.Z)(this,e),this.center=(0,c.f)(t,i),this.centerT=(0,c.c)(),this.halfWidth=r/2,this.halfHeight=n/2,this.width=r,this.height=n}return(0,s.Z)(e,[{key:"x",get:function(){return this.center[0]},set:function(e){this.center[0]=e}},{key:"y",get:function(){return this.center[1]},set:function(e){this.center[1]=e}},{key:"blX",get:function(){return this.center[0]+this.halfWidth}},{key:"blY",get:function(){return this.center[1]+this.halfHeight}},{key:"trX",get:function(){return this.center[0]-this.halfWidth}},{key:"trY",get:function(){return this.center[1]-this.halfHeight}},{key:"xmin",get:function(){return this.x-this.halfWidth}},{key:"xmax",get:function(){return this.x+this.halfWidth}},{key:"ymin",get:function(){return this.y-this.halfHeight}},{key:"ymax",get:function(){return this.y+this.halfHeight}},{key:"clone",value:function(){return new e(this.x,this.y,this.width,this.height)}},{key:"serialize",value:function(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e}},{key:"findCollisionDelta",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=Math.abs(e.centerT[0]-this.centerT[0]),r=Math.abs(e.centerT[1]-this.centerT[1]),n=(e.halfWidth+this.halfWidth+t)/i,a=(e.halfHeight+this.halfHeight+t)/r,s=Math.min(n,a);return Math.log2(s)}},{key:"extend",value:function(e){var t=Math.min(this.xmin,e.xmin),i=Math.min(this.ymin,e.ymin),r=Math.max(this.xmax,e.xmax)-t,n=Math.max(this.ymax,e.ymax)-i,a=t+r/2,s=i+n/2;this.width=r,this.height=n,this.halfWidth=r/2,this.halfHeight=n/2,this.x=a,this.y=s}}],[{key:"deserialize",value:function(t){return new e(t.readF32(),t.readF32(),t.readInt32(),t.readInt32())}}]),e}(),y=26,p=4,_=y+p,g=y-6,P=3,k=Math.PI/180,M=function(){function e(t,i,r,n){(0,a.Z)(this,e),this._rotationT=(0,h.c)(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;var s=r.rect,o=new Float32Array(8);t*=n,i*=n;var l=r.code?s.width*n:r.metrics.width,u=r.code?s.height*n:r.metrics.height;this.width=l,this.height=u,o[0]=t,o[1]=i,o[2]=t+l,o[3]=i,o[4]=t,o[5]=i+u,o[6]=t+l,o[7]=i+u,this._data=o,this._setTextureCoords(s),this._scale=n,this._mosaic=r,this.x=t,this.y=i,this.maxOffset=Math.max(t+l,i+u)}return(0,s.Z)(e,[{key:"mosaic",get:function(){return this._mosaic}},{key:"angle",get:function(){return this._angle},set:function(e){this._angle=e,(0,l.b)(this._rotationT,-e),this._setOffsets(this._data)}},{key:"xTopLeft",get:function(){return this._data[0]}},{key:"yTopLeft",get:function(){return this._data[1]}},{key:"xBottomRight",get:function(){return this._data[6]}},{key:"yBottomRight",get:function(){return this._data[7]}},{key:"texcoords",get:function(){return this._texcoords}},{key:"textureBinding",get:function(){return this._mosaic.textureBinding}},{key:"offsets",get:function(){return this._offsets||this._setOffsets(this._data),this._offsets}},{key:"char",get:function(){return String.fromCharCode(this._mosaic.code)}},{key:"code",get:function(){return this._mosaic.code}},{key:"bounds",get:function(){if(!this._bounds){var e=this._mosaic.metrics,t=e.height,i=e.width*this._scale,r=Math.abs(t)*this._scale,n=new Float32Array(8);n[0]=this.x,n[1]=this.y,n[2]=this.x+i,n[3]=this.y,n[4]=this.x,n[5]=this.y+r,n[6]=this.x+i,n[7]=this.y+r;var a=(0,l.m)((0,h.c)(),this._rotationT,this._transform);(0,h.t)(n,n,a);for(var s=1/0,o=1/0,u=0,c=0,f=0;f<4;f++){var v=n[2*f],m=n[2*f+1];s=Math.min(s,v),o=Math.min(o,m),u=Math.max(u,v),c=Math.max(c,m)}var y=u-s,p=c-o,_=s+y/2,g=o+p/2;this._bounds=new d(_,g,y,p)}return this._bounds}},{key:"setTransform",value:function(e){this._transform=e,this._offsets=null}},{key:"_setOffsets",value:function(e){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});var t=this._offsets,i=new Float32Array(8),r=(0,l.m)((0,h.c)(),this._rotationT,this._transform);(0,h.t)(i,e,r),t.upperLeft=(0,v.UJ)(8*i[0],8*i[1]),t.upperRight=(0,v.UJ)(8*i[2],8*i[3]),t.lowerLeft=(0,v.UJ)(8*i[4],8*i[5]),t.lowerRight=(0,v.UJ)(8*i[6],8*i[7])}},{key:"_setTextureCoords",value:function(e){var t=e.x,i=e.y,r=e.width,n=e.height;this._texcoords={upperLeft:(0,v.UJ)(t,i),upperRight:(0,v.UJ)(t+r,i),lowerLeft:(0,v.UJ)(t,i+n),lowerRight:(0,v.UJ)(t+r,i+n)}}}]),e}(),x=function(e,t){return{code:0,page:0,sdf:!0,rect:new m.Z(0,0,11,8),textureBinding:t,metrics:{advance:0,height:4,width:e,left:0,top:0}}};function b(e,t){return e.forEach((function(e){return(0,u.t)(e,e,t)})),{upperLeft:(0,v.UJ)(8*e[0][0],8*e[0][1]),upperRight:(0,v.UJ)(8*e[1][0],8*e[1][1]),lowerLeft:(0,v.UJ)(8*e[2][0],8*e[2][1]),lowerRight:(0,v.UJ)(8*e[3][0],8*e[3][1])}}var S=function(){function e(t,i,s){var o,l;(0,a.Z)(this,e),this._rotation=0,this._decorate(t,i,s),this.glyphs=t,this.bounds=this._createBounds(t),this.isMultiline=i.length>1,this._hasRotation=0!==s.angle,this._transform=this._createGlyphTransform(this.bounds,s),this._borderLineSize=s.borderLineSize,(s.borderLineSize||s.hasBackground)&&(o=this.shapeBackground(this._transform),l=(0,n.Z)(o,2),this.bounds=l[0],this.background=l[1]);var h,u=(0,r.Z)(t);try{for(u.s();!(h=u.n()).done;){h.value.setTransform(this._transform)}}catch(c){u.e(c)}finally{u.f()}}return(0,s.Z)(e,[{key:"setRotation",value:function(e){if(0!==e||0!==this._rotation){this._rotation=e;var t=this._transform,i=(0,l.b)((0,h.c)(),e);(0,l.m)(t,i,t);var n,a=(0,r.Z)(this.glyphs);try{for(a.s();!(n=a.n()).done;){n.value.setTransform(this._transform)}}catch(s){a.e(s)}finally{a.f()}}}},{key:"_decorate",value:function(e,t,i){if(i.decoration&&"none"!==i.decoration&&e.length){var n,a=i.scale,s="underline"===i.decoration?_:g,o=e[0].textureBinding,l=(0,r.Z)(t);try{for(l.s();!(n=l.n()).done;){var h=n.value,u=h.startX*a,c=h.startY*a,f=(h.width+h.glyphWidthEnd)*a;e.push(new M(u,c+s*a,x(f,o),1))}}catch(v){l.e(v)}finally{l.f()}}}},{key:"shapeBackground",value:function(e){var t=this.bounds,i=t.xmin,r=t.ymin,n=t.xmax,a=t.ymax,s=t.x,l=t.y,h=t.width,u=t.height,c=Math.min(h,u)+16-1.5,f=(1.5+Math.min((0,o.F2)(this._borderLineSize||0),c))/2,v=this._borderLineSize?f:0,m=[i-8,r-8],y=[n+8,r-8],p=[i-8,a+8],_=[n+8,a+8],g=b([[m[0]-f,m[1]-f],[y[0]+f,y[1]-f],[m[0]+v,m[1]+v],[y[0]-v,y[1]+v]],e),P=b([[p[0]+v,p[1]-v],[_[0]-v,_[1]-v],[p[0]-f,p[1]+f],[_[0]+f,_[1]+f]],e),k=b([[m[0]-f,m[1]-f],[m[0]+v,m[1]+v],[p[0]-f,p[1]+f],[p[0]+v,p[1]-v]],e),M=b([[y[0]-v,y[1]+v],[y[0]+f,y[1]-f],[_[0]-v,_[1]-v],[_[0]+f,_[1]+f]],e),x={main:b([m,y,p,_],e),top:g,bot:P,left:k,right:M};return[new d(s,l,h+2*f,u+2*f),x]}},{key:"boundsT",get:function(){var e=this.bounds,t=(0,u.s)((0,c.c)(),e.x,e.y);if((0,u.t)(t,t,this._transform),this._hasRotation){var i=Math.max(e.width,e.height);return new d(t[0],t[1],i,i)}return new d(t[0],t[1],e.width,e.height)}},{key:"_createBounds",value:function(e){var t,i=1/0,n=1/0,a=0,s=0,o=(0,r.Z)(e);try{for(o.s();!(t=o.n()).done;){var l=t.value;i=Math.min(i,l.xTopLeft),n=Math.min(n,l.yTopLeft),a=Math.max(a,l.xBottomRight),s=Math.max(s,l.yBottomRight)}}catch(c){o.e(c)}finally{o.f()}var h=a-i,u=s-n;return new d(i+h/2,n+u/2,h,u)}},{key:"_createGlyphTransform",value:function(e,t){var i=k*t.angle,r=(0,h.c)(),n=(0,c.c)();return(0,l.t)(r,r,(0,u.s)(n,t.xOffset,-t.yOffset)),t.isCIM?(0,l.r)(r,r,i):((0,l.t)(r,r,(0,u.s)(n,e.x,e.y)),(0,l.r)(r,r,i),(0,l.t)(r,r,(0,u.s)(n,-e.x,-e.y))),r}}]),e}(),C=(0,s.Z)((function e(t,i,r,n,s,o){(0,a.Z)(this,e),this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,r)),this.end=Math.max(0,Math.max(i,r)),this.end<t.length&&(this.glyphWidthEnd=t[this.end].metrics.width),this.width=n,this.yMin=s,this.yMax=o})),w=function(e){return 10===e},I=function(e){return 32===e};function L(e,t,i){for(var r=i.scale,n=new Array,a=function(e,t,i){for(var r=new Array,n=1/i.scale,a=i.maxLineWidth*n,s=t?e.length-1:0,o=t?-1:e.length,l=t?-1:1,h=s,u=0,c=0,f=h,v=f,m=0,d=1/0,y=0;h!==o;){var p=e[h],_=p.code,g=p.metrics,P=Math.abs(g.top);if(w(_)||I(_)||(d=Math.min(d,P),y=Math.max(y,P+g.height)),w(_))h!==s&&(r.push(new C(e,f,h-l,u,d,y)),d=1/0,y=0),u=0,f=h+l,v=h+l,c=0;else if(I(_))v=h+l,c=0,m=g.advance,u+=g.advance;else if(u>a){if(v!==f){var k=v-2*l;u-=m,r.push(new C(e,f,k,u-c,d,y)),d=1/0,y=0,f=v,u=c}else r.push(new C(e,f,h-l,u,d,y)),d=1/0,y=0,f=h,v=h,u=0;u+=g.advance,c+=g.advance}else u+=g.advance,c+=g.advance;h+=l}var M=new C(e,f,h-l,u,d,y);return M.start>=0&&M.end<e.length&&r.push(M),r}(e,t,i),s=function(e,t){for(var i=0,r=0;r<e.length;r++){var n=e[r].width;i=Math.max(n,i)}var a="underline"===t.decoration?p:0,s=e[0].yMin;return{x:0,y:s,height:e[e.length-1].yMax+t.lineHeight*(e.length-1)+a-s,width:i}}(a,i),o=i.vAlign,l=i.hAlign,h=o===f.TR.Baseline?1:0,u=h?0:o-1,c=(1-h)*-s.y+u*(s.height/2)+(h?1:0)*-y,v=0;v<a.length;v++){var m=a[v],d=m.start,_=m.end,g=-1*(l+1)*(m.width/2)-P,k=v*i.lineHeight+c-P;a[v].startX=g,a[v].startY=k;for(var x=d;x<=_;x++){var b=e[x];if(!w(b.code)){var L=new M(g+b.metrics.left,k-b.metrics.top,b,r);g+=b.metrics.advance,n.push(L)}}}return new S(n,a,i)}}}]);
//# sourceMappingURL=8991.19458567.chunk.js.map