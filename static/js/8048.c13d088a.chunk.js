"use strict";(self.webpackChunkamit_kumar_rathi=self.webpackChunkamit_kumar_rathi||[]).push([[8048,2078],{18048:function(e,t,r){r.r(t),r.d(t,{default:function(){return j}});var n=r(74165),i=r(15861),a=r(15671),o=r(43144),s=r(97326),u=r(60136),l=r(29388),c=r(27366),p=r(77178),f=r(93002),d=r(32718),h=r(97642),v=r(66978),y=r(94172),b=r(49861),m=(r(25243),r(63780),r(93169),r(23879)),w=r(38511),Z=r(69912),x=r(31201),k=r(25265),_=r(30651),g=r(6693),I=r(6061),S=r(29598),O=r(56811),P=r(19610),L=r(98995),C=r(30219),R=r(84938),A=r(16791),T=Symbol("WebScene"),M=r(84933),F=r(9634),V=r(41190),E=function(e){(0,u.Z)(c,e);var t=(0,l.Z)(c);function c(e){var o;return(0,a.Z)(this,c),(o=t.call(this,e)).allLayers=new p.Z({getCollections:function(){return[o.layers]},getChildrenFunction:function(e){return"layers"in e?e.layers:null}}),o.allTables=(0,C.a)((0,s.Z)(o)),o.fullExtent=void 0,o.operationalLayerType="GroupLayer",o.spatialReference=void 0,o.type="group",o._debouncedSaveOperations=(0,v.Ds)(function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t,i,a){var u,l,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(907).then(r.bind(r,80907));case 2:u=e.sent,l=u.save,c=u.saveAs,e.t0=t,e.next=e.t0===M.x.SAVE?8:e.t0===M.x.SAVE_AS?9:10;break;case 8:return e.abrupt("return",l((0,s.Z)(o),i));case 9:return e.abrupt("return",c((0,s.Z)(o),a,i));case 10:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),o}return(0,o.Z)(c,[{key:"initialize",value:function(){var e=this;this._enforceVisibility(this.visibilityMode,this.visible),this.addHandles([(0,y.YP)((function(){for(var t=e.parent;t&&"parent"in t&&t.parent;)t=t.parent;return t&&T in t}),(function(t){var r="prevent-adding-tables";e.removeHandles(r),t&&(e.tables.removeAll(),e.addHandles((0,y.on)((function(){return e.tables}),"before-add",(function(t){t.preventDefault(),d.Z.getLogger(e).errorOnce("tables","tables in group layers in a webscene are not supported. Please move the tables from the group layer to the webscene if you want to persist them.")})),r))}),y.tX),(0,y.YP)((function(){return e.visible}),this._onVisibilityChange.bind(this),y.Z_)])}},{key:"destroy",value:function(){this.allLayers.destroy(),this.allTables.destroy()}},{key:"sourceIsPortalItem",get:function(){return this.portalItem&&this.originIdOf("portalItem")===k.s3.USER}},{key:"_writeLayers",value:function(e,t,r,n){var i=[];if(!e)return i;e.forEach((function(e){var t=(0,V.Nw)(e,n.webmap?n.webmap.getLayerJSONFromResourceInfo(e):null,n);(null===t||void 0===t?void 0:t.layerType)&&i.push(t)})),t.layers=i}},{key:"portalItem",set:function(e){this._set("portalItem",e)}},{key:"readPortalItem",value:function(e,t,r){var n=t.itemId;if("GroupLayer"===t.layerType&&n)return new L.default({id:n,portal:null===r||void 0===r?void 0:r.portal})}},{key:"writePortalItem",value:function(e,t){(null===e||void 0===e?void 0:e.id)&&(t.itemId=e.id)}},{key:"visibilityMode",set:function(e){var t=this._get("visibilityMode")!==e;this._set("visibilityMode",e),t&&this._enforceVisibility(e,this.visible)}},{key:"beforeSave",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,F.Pl)(this));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(e){var t=this,r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Group Layer","Scene Service"],layerModuleTypeMap:P.T},e).catch((function(e){if((0,v.r9)(e),t.sourceIsPortalItem)throw e}));return this.addResolvingPromise(r),Promise.resolve(this)}},{key:"loadAll",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var t=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.G)(this,(function(e){e(t.layers,t.tables)})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(M.x.SAVE,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(M.x.SAVE_AS,r,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"layerAdded",value:function(e){var t=this;e.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(e):"inherited"===this.visibilityMode&&(e.visible=this.visible),this.hasHandles(e.uid)?console.error("Layer readded to Grouplayer: uid=".concat(e.uid)):this.addHandles((0,y.YP)((function(){return e.visible}),(function(r){return t._onChildVisibilityChange(e,r)}),y.Z_),e.uid)}},{key:"layerRemoved",value:function(e){this.removeHandles(e.uid),this._enforceVisibility(this.visibilityMode,this.visible)}},{key:"_turnOffOtherLayers",value:function(e){this.layers.forEach((function(t){t!==e&&(t.visible=!1)}))}},{key:"_enforceVisibility",value:function(e,t){if((0,m.vw)(this).initialized){var r=this.layers,n=r.find((function(e){return e.visible}));switch(e){case"exclusive":r.length&&!n&&((n=r.at(0)).visible=!0),this._turnOffOtherLayers(n);break;case"inherited":r.forEach((function(e){e.visible=t}))}}}},{key:"_onVisibilityChange",value:function(e){"inherited"===this.visibilityMode&&this.layers.forEach((function(t){t.visible=e}))}},{key:"_onChildVisibilityChange",value:function(e,t){switch(this.visibilityMode){case"exclusive":t?this._turnOffOtherLayers(e):this._isAnyLayerVisible()||(e.visible=!0);break;case"inherited":e.visible=this.visible}}},{key:"_isAnyLayerVisible",value:function(){return this.layers.some((function(e){return e.visible}))}}]),c}((0,g.h)((0,O.M)((0,I.q)((0,S.I)((0,A.Q)((0,R.K)((0,h.R)(_.Z))))))));(0,c._)([(0,b.Cb)({readOnly:!0,dependsOn:[]})],E.prototype,"allLayers",void 0),(0,c._)([(0,b.Cb)({readOnly:!0})],E.prototype,"allTables",void 0),(0,c._)([(0,b.Cb)({json:{read:!0,write:!0}})],E.prototype,"blendMode",void 0),(0,c._)([(0,b.Cb)()],E.prototype,"fullExtent",void 0),(0,c._)([(0,b.Cb)({readOnly:!0})],E.prototype,"sourceIsPortalItem",null),(0,c._)([(0,b.Cb)({json:{read:!1,write:{ignoreOrigin:!0}}})],E.prototype,"layers",void 0),(0,c._)([(0,x.c)("layers")],E.prototype,"_writeLayers",null),(0,c._)([(0,b.Cb)({type:["GroupLayer"]})],E.prototype,"operationalLayerType",void 0),(0,c._)([(0,b.Cb)({json:{origins:{"web-map":{read:!1,write:{overridePolicy:function(e,t,r){return{enabled:"Group Layer"===(null===e||void 0===e?void 0:e.type)&&(null===r||void 0===r?void 0:r.initiator)!==this}}}},"web-scene":{read:!1,write:!1}}}})],E.prototype,"portalItem",null),(0,c._)([(0,w.r)("web-map","portalItem",["itemId"])],E.prototype,"readPortalItem",null),(0,c._)([(0,x.c)("web-map","portalItem",{itemId:{type:String}})],E.prototype,"writePortalItem",null),(0,c._)([(0,b.Cb)()],E.prototype,"spatialReference",void 0),(0,c._)([(0,b.Cb)({json:{read:!1},readOnly:!0,value:"group"})],E.prototype,"type",void 0),(0,c._)([(0,b.Cb)({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{type:["independent","exclusive"],write:function(e,t,r){"inherited"!==e&&(t[r]=e)}}}}})],E.prototype,"visibilityMode",null);var j=E=(0,c._)([(0,Z.j)("esri.layers.GroupLayer")],E)},62078:function(e,t,r){r.r(t),r.d(t,{addOrUpdateResource:function(){return p},contentToBlob:function(){return w},fetchResources:function(){return l},getSiblingOfSameType:function(){return x},getSiblingOfSameTypeI:function(){return k},removeAllResources:function(){return v},removeResource:function(){return d},splitPrefixFileNameAndExtension:function(){return m}});var n=r(74165),i=r(29439),a=r(15861),o=r(76200),s=r(10064),u=r(35995);function l(e){return c.apply(this,arguments)}function c(){return c=(0,a.Z)((0,n.Z)().mark((function e(t){var r,i,a,o,s,l,c,p,f,d,h,v,y=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:{},i=y.length>2?y[2]:void 0,e.next=4,t.load(i);case 4:return a=(0,u.v_)(t.itemUrl,"resources"),o=r.start,s=void 0===o?1:o,l=r.num,c=void 0===l?10:l,p=r.sortOrder,f=void 0===p?"asc":p,d=r.sortField,h={query:{start:s,num:c,sortOrder:f,sortField:void 0===d?"created":d,token:t.apiKey},signal:null===i||void 0===i?void 0:i.signal},e.next=16,t.portal.request(a,h);case 16:return v=e.sent,e.abrupt("return",{total:v.total,nextStart:v.nextStart,resources:v.resources.map((function(e){var r=e.created,n=e.size,i=e.resource;return{created:new Date(r),size:n,resource:t.resourceFromPath(i)}}))});case 18:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function p(e,t,r,n){return f.apply(this,arguments)}function f(){return f=(0,a.Z)((0,n.Z)().mark((function e(t,r,a,o){var l,c,p,f,d,h,v;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.hasPath()){e.next=2;break}throw new s.Z("portal-item-resource-".concat(r,":invalid-path"),"Resource does not have a valid path");case 2:return l=t.portalItem,e.next=5,l.load(o);case 5:return c=(0,u.v_)(l.userItemUrl,"add"===r?"addResources":"updateResources"),p=b(t.path),f=(0,i.Z)(p,2),d=f[0],h=f[1],v=new FormData,d&&"."!==d&&v.append("resourcesPrefix",d),null!=o&&o.compress&&v.append("compress","true"),v.append("fileName",h),v.append("file",a,h),v.append("f","json"),null!==o&&void 0!==o&&o.access&&v.append("access",o.access),e.next=14,l.portal.request(c,{method:"post",body:v,signal:null===o||void 0===o?void 0:o.signal});case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function d(e,t,r){return h.apply(this,arguments)}function h(){return h=(0,a.Z)((0,n.Z)().mark((function e(t,r,i){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.hasPath()){e.next=2;break}throw new s.Z("portal-item-resources-remove:invalid-path","Resource does not have a valid path");case 2:return e.next=4,t.load(i);case 4:return a=(0,u.v_)(t.userItemUrl,"removeResources"),e.next=7,t.portal.request(a,{method:"post",query:{resource:r.path},signal:null===i||void 0===i?void 0:i.signal});case 7:r.portalItem=null;case 8:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function v(e,t){return y.apply(this,arguments)}function y(){return(y=(0,a.Z)((0,n.Z)().mark((function e(t,r){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load(r);case 2:return i=(0,u.v_)(t.userItemUrl,"removeResources"),e.abrupt("return",t.portal.request(i,{method:"post",query:{deleteAll:!0},signal:null===r||void 0===r?void 0:r.signal}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){var t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function m(e){var t=function(e){var t=(0,u.Ml)(e);return null==t?[e,""]:[e.slice(0,e.length-t.length-1),".".concat(t)]}(e),r=(0,i.Z)(t,2),n=r[0],a=r[1],o=b(n),s=(0,i.Z)(o,2);return[s[0],s[1],a]}function w(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("blob"!==t.type){e.next=2;break}return e.abrupt("return",t.blob);case 2:if("json"!==t.type){e.next=4;break}return e.abrupt("return",new Blob([t.jsonString],{type:"application/json"}));case 4:return e.next=6,(0,o.Z)(t.url,{responseType:"blob"});case 6:return e.abrupt("return",e.sent.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){if(!e.hasPath())return null;var r=m(e.path),n=(0,i.Z)(r,3),a=n[0],o=n[2];return e.portalItem.resourceFromPath((0,u.v_)(a,t+o))}function k(e,t){if(!e.hasPath())return null;var r=m(e.path),n=(0,i.Z)(r,3),a=n[0],o=n[2];return e.portalItem.resourceFromPath((0,u.v_)(a,t+o))}},9634:function(e,t,r){r.d(t,{Hn:function(){return f},Pl:function(){return g},bx:function(){return h}});var n=r(1413),i=r(37762),a=r(74165),o=r(15861),s=r(14921),u=r(10064),l=r(66978),c=r(71907),p=r(62078);function f(e,t){return d.apply(this,arguments)}function d(){return d=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,i,o=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:null,e.next=3,y(t,r,n);case 3:return i=e.sent,e.next=6,m(i,r,n);case 6:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function h(e,t,r,n){return v.apply(this,arguments)}function v(){return v=(0,o.Z)((0,a.Z)().mark((function e(t,r,n,i){var o,s,u=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>4&&void 0!==u[4]?u[4]:null,e.next=3,y(n,i,o);case 3:return s=e.sent,e.next=6,t.update({data:r});case 6:return e.next=8,m(s,i,o);case 8:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function y(e,t){return b.apply(this,arguments)}function b(){return b=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,o,s,f,d,h,v,y,b,m,w,x,_,g,I,S,O,P=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=P.length>2&&void 0!==P[2]?P[2]:null,null!==r&&void 0!==r&&r.resources){e.next=3;break}return e.abrupt("return");case 3:o=r.portalItem===t.portalItem?new Set(t.paths):new Set,t.paths.length=0,t.portalItem=r.portalItem,s=new Set(r.resources.toKeep.map((function(e){return e.resource.path}))),f=new Set,d=[],s.forEach((function(e){o.delete(e),t.paths.push(e)})),h=(0,i.Z)(r.resources.toUpdate);try{for(h.s();!(v=h.n()).done;)y=v.value,o.delete(y.resource.path),s.has(y.resource.path)||f.has(y.resource.path)?(b=y.resource,m=y.content,w=y.finish,x=y.error,_=(0,p.getSiblingOfSameTypeI)(b,(0,c.DO)()),t.paths.push(_.path),d.push(Z({resource:_,content:m,compress:y.compress,finish:w,error:x},n))):(t.paths.push(y.resource.path),d.push(k(y,n)),f.add(y.resource.path))}catch(a){h.e(a)}finally{h.f()}g=(0,i.Z)(r.resources.toAdd);try{for(g.s();!(I=g.n()).done;)S=I.value,t.paths.push(S.resource.path),o.has(S.resource.path)?o.delete(S.resource.path):d.push(Z(S,n))}catch(a){g.e(a)}finally{g.f()}if(0!==d.length){e.next=13;break}return e.abrupt("return",o);case 13:return e.next=15,(0,l.UO)(d);case 15:if(O=e.sent,(0,l.k_)(n),!(O.length>0)){e.next=18;break}throw new u.Z("save:resources","Failed to save one or more resources",{errors:O});case 18:return e.abrupt("return",o);case 19:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function m(e,t){return w.apply(this,arguments)}function w(){return w=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,o,s,u,c,p,f=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>2&&void 0!==f[2]?f[2]:null,t&&r.portalItem){e.next=3;break}return e.abrupt("return");case 3:o=[],s=(0,i.Z)(t);try{for(s.s();!(u=s.n()).done;)c=u.value,p=r.portalItem.resourceFromPath(c),o.push(p.portalItem.removeResource(p,n))}catch(a){s.e(a)}finally{s.f()}return e.next=8,(0,l.as)(o);case 8:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function Z(e,t){return x.apply(this,arguments)}function x(){return(x=(0,o.Z)((0,a.Z)().mark((function e(t,r){var i,o,u,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=(0,n.Z)((0,n.Z)({},null!=r?r:{}),{},{compress:t.compress}),e.t0=s.q6,e.t1=t.resource.portalItem,e.t2=t.resource,e.next=6,(0,p.contentToBlob)(t.content);case 6:return e.t3=e.sent,e.t4=u,e.t5=e.t1.addResource.call(e.t1,e.t2,e.t3,e.t4),e.next=11,(0,e.t0)(e.t5);case 11:if(!0===(l=e.sent).ok){e.next=14;break}throw null!==(i=t.error)&&void 0!==i&&i.call(t,l.error),l.error;case 14:null===(o=t.finish)||void 0===o||o.call(t,t.resource);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){return _.apply(this,arguments)}function _(){return(_=(0,o.Z)((0,a.Z)().mark((function e(t,r){var n,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s.q6,e.t1=t.resource,e.next=4,(0,p.contentToBlob)(t.content);case 4:return e.t2=e.sent,e.t3=r,e.t4=e.t1.update.call(e.t1,e.t2,e.t3),e.next=9,(0,e.t0)(e.t4);case 9:if(!0===(o=e.sent).ok){e.next=12;break}throw null!==(n=t.error)&&void 0!==n&&n.call(t,o.error),o.error;case 12:null===(i=t.finish)||void 0===i||i.call(t,t.resource);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return I.apply(this,arguments)}function I(){return(I=(0,o.Z)((0,a.Z)().mark((function e(t){var r,n,o,s,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=(0,i.Z)(t.allLayers);try{for(n.s();!(o=n.n()).done;)"beforeSave"in(s=o.value)&&"function"==typeof s.beforeSave&&(u=s.beforeSave())&&r.push(u)}catch(a){n.e(a)}finally{n.f()}return e.next=5,Promise.allSettled(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=8048.c13d088a.chunk.js.map