{"version":3,"file":"static/js/6553.a9a735df.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/labelFormatUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{parseWhereClause as t}from\"../../core/sql.js\";import{formatDate as n,convertDateFormatToIntlOptions as o}from\"../../intl/date.js\";import{formatNumber as a}from\"../../intl/number.js\";import{getDomainRange as l}from\"./domainUtils.js\";import{isDateField as i,isNumericField as s}from\"./fieldUtils.js\";import{getLabelExpression as u,getSingleFieldArcadeExpression as c}from\"./labelUtils.js\";import{createLabelExpression as f}from\"../../support/arcadeOnDemand.js\";const m=r.getLogger(\"esri.layers.support.labelFormatUtils\"),p={type:\"simple\",evaluate:()=>null},d={getAttribute:(e,r)=>e.field(r)};async function w(r,n,o){if(!r||!r.symbol||!n)return p;const a=r.where,l=u(r);let i;if(\"arcade\"===l.type){const r=await f(l.expression,o,n);if(null==r)return p;i={type:\"arcade\",evaluate(t,n){try{const e=\"attributes\"in t?r.repurposeFeature(t):t;e.contextTimeZone=n??null;const o=r.evaluate({$view:{timeZone:n},$feature:e},r.services);if(null!=o)return o.toString()}catch(o){m.error(new e(\"arcade-expression-error\",\"Encountered an error when evaluating label expression for feature\",{error:o,feature:t,expression:l}))}return null},needsHydrationToEvaluate:()=>null==c(l.expression)}}else i={type:\"simple\",evaluate:e=>l.expression.replaceAll(/{[^}]*}/g,(r=>{const t=r.slice(1,-1),o=n.get(t);if(!o)return r;let a=null;if(\"attributes\"in e){e&&e.attributes&&(a=e.attributes[o.name])}else a=e.field(o.name);return null==a?\"\":g(a,o)}))};if(a){let r;try{r=await t(a,n)}catch(s){return m.error(new e(\"bad-where-clause\",\"Encountered an error when evaluating where clause, ignoring\",{where:a,error:s})),p}const o=i.evaluate;i.evaluate=(t,n)=>{const l=\"attributes\"in t?void 0:d;try{if(r.testFeature(t,l))return o(t,n)}catch(s){m.error(new e(\"bad-where-clause\",\"Encountered an error when evaluating where clause for feature\",{where:a,feature:t,error:s}))}return null}}return i}function g(e,r){if(null==e)return\"\";const t=r.domain;if(t)if(\"codedValue\"===t.type||\"coded-value\"===t.type){const r=e;for(const e of t.codedValues)if(e.code===r)return e.name}else if(\"range\"===t.type){const{max:n,min:o}=l(r),a=+e;if(null!=o&&null!=n&&o<=a&&a<=n)return t.name}let u=e;return i(r)?u=n(u,o(\"short-date\")):s(r)&&(u=a(+u)),u||\"\"}export{w as createLabelFunction,g as formatField};\n"],"names":["m","r","getLogger","p","type","evaluate","d","getAttribute","e","field","w","_x","_x2","_x3","_w","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","n","o","a","l","i","_r2","_r3","_o3","wrap","_context","prev","next","symbol","abrupt","where","u","f","expression","sent","t","repurposeFeature","contextTimeZone","$view","timeZone","$feature","services","toString","error","feature","needsHydrationToEvaluate","c","replaceAll","slice","get","attributes","name","g","t0","testFeature","s","stop","domain","_step","_iterator","_createForOfIteratorHelper","codedValues","done","value","code","err","_l","max","min"],"sourceRoot":""}