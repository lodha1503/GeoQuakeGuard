"use strict";(self.webpackChunkamit_kumar_rathi=self.webpackChunkamit_kumar_rathi||[]).push([[2668],{2668:function(e,t,r){r.r(t),r.d(t,{default:function(){return pe}});var n,i=r(29439),o=r(1413),a=r(74165),s=r(15861),l=r(15671),p=r(43144),u=r(97326),d=r(88301),c=r(61120),y=r(60136),f=r(29388),v=r(27366),m=(r(59486),r(44055)),h=(r(94931),r(78451),r(98689),r(57823),r(32066),r(49018),r(34999),r(28189),r(9014)),b=r(40464),w=r(76200),g=r(11582),_=r(10064),k=r(42537),S=r(84652),x=r(32718),C=r(97642),I=r(66978),Z=r(49861),R=r(25243),j=r(38511),T=r(69912),F=r(27823),P=r(30651),A=r(11936),O=r(6693),E=r(46671),D=r(7632),N=r(64390),U=r(6061),L=r(29598),M=r(71684),V=r(56811),J=r(99063),z=r(45948),G=r(38558),q=r(83040),Y=r(25610),Q=r(37270),W=r(77748),H=r(85116),B=r(46784),K=(r(63780),r(93169),n=function(e){(0,y.Z)(r,e);var t=(0,f.Z)(r);function r(){var e;return(0,l.Z)(this,r),(e=t.apply(this,arguments)).age=null,e.ageReceived=null,e.displayCount=null,e.maxObservations=1,e}return(0,p.Z)(r,[{key:"clone",value:function(){return new n({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}}]),r}(B.wq));(0,v._)([(0,Z.Cb)({type:Number,json:{write:!0}})],K.prototype,"age",void 0),(0,v._)([(0,Z.Cb)({type:Number,json:{write:!0}})],K.prototype,"ageReceived",void 0),(0,v._)([(0,Z.Cb)({type:Number,json:{write:!0}})],K.prototype,"displayCount",void 0),(0,v._)([(0,Z.Cb)({type:Number,json:{write:!0}})],K.prototype,"maxObservations",void 0);var X=K=n=(0,v._)([(0,T.j)("esri.layers.support.PurgeOptions")],K),$=r(21371),ee=r(86638),te=r(81085),re=r(64575),ne=r(84933),ie=r(78952),oe=r(53866),ae=(0,Y.v)();function se(e,t){return new _.Z("layer:unsupported","Layer (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' ").concat(t),{layer:e})}var le=function(e){(0,y.Z)(n,e);var t=(0,f.Z)(n);function n(){var e;(0,l.Z)(this,n);for(var i=arguments.length,o=new Array(i),p=0;p<i;p++)o[p]=arguments[p];return(e=t.call.apply(t,[this].concat(o))).copyright=null,e.definitionExpression=null,e.displayField=null,e.elevationInfo=null,e.fields=null,e.fieldsIndex=null,e.geometryDefinition=null,e.geometryType=null,e.labelsVisible=!0,e.labelingInfo=null,e.legendEnabled=!0,e.maxReconnectionAttempts=0,e.maxReconnectionInterval=20,e.maxScale=0,e.minScale=0,e.objectIdField=null,e.operationalLayerType="ArcGISStreamLayer",e.outFields=["*"],e.popupEnabled=!0,e.popupTemplate=null,e.purgeOptions=new X,e.refreshInterval=0,e.screenSizePerspectiveEnabled=!0,e.sourceJSON=null,e.spatialReference=ie.Z.WGS84,e.type="stream",e.url=null,e.updateInterval=300,e.useViewTime=!0,e.webSocketUrl=null,e._debouncedSaveOperations=(0,I.Ds)(function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n,i,o){var s,l,p;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.e(6126).then(r.bind(r,36126));case 2:s=t.sent,l=s.save,p=s.saveAs,t.t0=n,t.next=t.t0===ne.x.SAVE?8:t.t0===ne.x.SAVE_AS?9:10;break;case 8:return t.abrupt("return",l((0,u.Z)(e),i));case 9:return t.abrupt("return",p((0,u.Z)(e),o,i));case 10:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),e}return(0,p.Z)(n,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,o.Z)({url:e},t):e}},{key:"load",value:function(e){var t=this;if(!("WebSocket"in globalThis))return this.addResolvingPromise(Promise.reject(new _.Z("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);var r=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service","Feed"]},e).catch(I.r9).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"featureReduction",set:function(e){var t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}},{key:"renderer",set:function(e){(0,Q.YN)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,r){var n,i=null===(n=(t=t.layerDefinition||t).drawingInfo)||void 0===n?void 0:n.renderer;if(i){var o=(0,h.a)(i,t,r)||void 0;return o||x.Z.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),o}return(0,G.Ob)(t,r)}},{key:"connect",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,o,s,l,p,u,d,c,y,f,v,m,h,b,w,g,_,S,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Promise.all([r.e(7607),r.e(7463),r.e(159)]).then(r.bind(r,97463)),this.load()]);case 2:return n=e.sent,o=(0,i.Z)(n,1),s=o[0].createConnection,l=this.geometryType?F.M.toJSON(this.geometryType):null,p=t||this.createConnectionParameters(),u=p.customParameters,d=void 0===u?null:u,c=p.definitionExpression,y=void 0===c?null:c,f=p.geometryDefinition,v=void 0===f?null:f,m=p.maxReconnectionAttempts,h=void 0===m?0:m,b=p.maxReconnectionInterval,w=void 0===b?20:b,g=p.spatialReference,_=void 0===g?this.spatialReference:g,S=s(this.parsedUrl,this.spatialReference,_,l,{geometry:v,where:y},h,w,null!==d&&void 0!==d?d:void 0),x=(0,k.AL)([this.on("send-message-to-socket",(function(e){return S.sendMessageToSocket(e)})),this.on("send-message-to-client",(function(e){return S.sendMessageToClient(e)}))]),e.abrupt("return",(S.once("destroy",x.remove),S));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createConnectionParameters",value:function(){return{spatialReference:this.spatialReference,customParameters:this.customParameters,definitionExpression:this.definitionExpression,geometryDefinition:this.geometryDefinition,maxReconnectionAttempts:this.maxReconnectionAttempts,maxReconnectionInterval:this.maxReconnectionInterval}}},{key:"createPopupTemplate",value:function(e){return(0,te.eZ)(this,e)}},{key:"createQuery",value:function(){var e=new ee.Z;return e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1",e}},{key:"getFieldDomain",value:function(e,t){if(!this.fields)return null;var r=null;return this.fields.some((function(t){return t.name===e&&(r=t.domain),!!r})),r}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"serviceSupportsSpatialReference",value:function(e){return!0}},{key:"sendMessageToSocket",value:function(e){this.emit("send-message-to-socket",e)}},{key:"sendMessageToClient",value:function(e){this.emit("send-message-to-client",e)}},{key:"save",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(ne.x.SAVE,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(ne.x.SAVE_AS,r,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"write",value:function(e,t){var r=null===t||void 0===t?void 0:t.messages;return this.webSocketUrl?(null!==r&&void 0!==r&&r.push(se(this,"using a custom websocket connection cannot be written to web scenes and web maps")),null):this.parsedUrl?(0,d.Z)((0,c.Z)(n.prototype),"write",this).call(this,e,t):(null!==r&&void 0!==r&&r.push(se(this,"using a client-side only connection without a url cannot be written to web scenes and web maps")),null)}},{key:"_fetchService",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var r,n,i,s,l,p,u=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.webSocketUrl||!this.parsedUrl){e.next=9;break}if(this.sourceJSON){e.next=7;break}return e.next=4,(0,w.Z)(this.parsedUrl.path,{query:(0,o.Z)((0,o.Z)({f:"json"},this.customParameters),this.parsedUrl.query),responseType:"json",signal:t});case 4:n=e.sent,i=n.data,this.sourceJSON=i;case 7:e.next=21;break;case 9:if(null!==(s=this.timeInfo)&&void 0!==s&&s.trackIdField){e.next=11;break}throw new _.Z("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");case 11:if(this.objectIdField){e.next=16;break}if(p=null===(l=this.fields.find((function(e){return"oid"===e.type})))||void 0===l?void 0:l.name,p){e.next=15;break}throw new _.Z("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");case 15:this.objectIdField=p;case 16:if(this.fields){e.next=18;break}throw new _.Z("stream-layer:missing-metadata","The stream layer fields must be specified.");case 18:if(this.fields.some((function(e){return e.name===u.objectIdField}))||this.fields.push(new q.Z({name:this.objectIdField,alias:this.objectIdField,type:"oid"})),this.geometryType){e.next=20;break}throw new _.Z("stream-layer:missing-metadata","The stream layer geometryType must be specified.");case 20:this.webSocketUrl&&(this.url=this.webSocketUrl);case 21:return e.abrupt("return",(this.read(this.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:null===(r=this.portalItem)||void 0===r?void 0:r.portal,url:this.parsedUrl}),(0,Q.YN)(this.renderer,this.fieldsIndex),(0,Q.UF)(this.timeInfo,this.fieldsIndex),this.objectIdField||(this.objectIdField="__esri_stream_id__"),(0,$.y)(this,{origin:"service"})));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}((0,N.M)((0,D.b)((0,O.h)((0,J.n)((0,V.M)((0,M.Q)((0,A.Y)((0,U.q)((0,L.I)((0,C.R)((0,E.N)((0,g.J)(P.Z)))))))))))));(0,v._)([(0,Z.Cb)({type:String})],le.prototype,"copyright",void 0),(0,v._)([(0,Z.Cb)({readOnly:!0})],le.prototype,"defaultPopupTemplate",null),(0,v._)([(0,Z.Cb)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],le.prototype,"definitionExpression",void 0),(0,v._)([(0,Z.Cb)({type:String})],le.prototype,"displayField",void 0),(0,v._)([(0,Z.Cb)({type:re.Z})],le.prototype,"elevationInfo",void 0),(0,v._)([(0,Z.Cb)({json:{origins:{"web-map":{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],le.prototype,"featureReduction",null),(0,v._)([(0,Z.Cb)(ae.fields)],le.prototype,"fields",void 0),(0,v._)([(0,Z.Cb)(ae.fieldsIndex)],le.prototype,"fieldsIndex",void 0),(0,v._)([(0,Z.Cb)({type:oe.Z,json:{name:"layerDefinition.definitionGeometry",write:!0}})],le.prototype,"geometryDefinition",void 0),(0,v._)([(0,Z.Cb)({type:F.M.apiValues,json:{read:{reader:F.M.read}}})],le.prototype,"geometryType",void 0),(0,v._)([(0,Z.Cb)(z.iR)],le.prototype,"labelsVisible",void 0),(0,v._)([(0,Z.Cb)({type:[W.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:H.r},write:!0}})],le.prototype,"labelingInfo",void 0),(0,v._)([(0,Z.Cb)(z.rn)],le.prototype,"legendEnabled",void 0),(0,v._)([(0,Z.Cb)({type:["show","hide"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],le.prototype,"listMode",void 0),(0,v._)([(0,Z.Cb)({type:R.z8})],le.prototype,"maxReconnectionAttempts",void 0),(0,v._)([(0,Z.Cb)({type:R.z8})],le.prototype,"maxReconnectionInterval",void 0),(0,v._)([(0,Z.Cb)(z.u1)],le.prototype,"maxScale",void 0),(0,v._)([(0,Z.Cb)(z.rO)],le.prototype,"minScale",void 0),(0,v._)([(0,Z.Cb)({type:String})],le.prototype,"objectIdField",void 0),(0,v._)([(0,Z.Cb)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],le.prototype,"operationalLayerType",void 0),(0,v._)([(0,Z.Cb)({readOnly:!0})],le.prototype,"outFields",void 0),(0,v._)([(0,Z.Cb)(z.C_)],le.prototype,"popupEnabled",void 0),(0,v._)([(0,Z.Cb)({type:m.Z,json:{name:"popupInfo",write:!0}})],le.prototype,"popupTemplate",void 0),(0,v._)([(0,Z.Cb)({type:X})],le.prototype,"purgeOptions",void 0),(0,v._)([(0,Z.Cb)({json:{read:!1,write:!1}})],le.prototype,"refreshInterval",void 0),(0,v._)([(0,Z.Cb)({types:b.A,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{name:"layerDefinition.drawingInfo.renderer",types:b.o,write:!0}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],le.prototype,"renderer",null),(0,v._)([(0,j.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,j.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],le.prototype,"readRenderer",null),(0,v._)([(0,Z.Cb)(function(){var e=(0,S.d9)(z.YI);return e.json.origins["portal-item"]={read:!1,write:!1},e}())],le.prototype,"screenSizePerspectiveEnabled",void 0),(0,v._)([(0,Z.Cb)()],le.prototype,"sourceJSON",void 0),(0,v._)([(0,Z.Cb)({type:ie.Z,json:{origins:{service:{read:{source:"spatialReference"}}}}})],le.prototype,"spatialReference",void 0),(0,v._)([(0,Z.Cb)({json:{read:!1}})],le.prototype,"type",void 0),(0,v._)([(0,Z.Cb)(z.HQ)],le.prototype,"url",void 0),(0,v._)([(0,Z.Cb)({type:Number})],le.prototype,"updateInterval",void 0),(0,v._)([(0,Z.Cb)({json:{read:!1,write:!1}})],le.prototype,"useViewTime",void 0),(0,v._)([(0,Z.Cb)({type:String})],le.prototype,"webSocketUrl",void 0);var pe=le=(0,v._)([(0,T.j)("esri.layers.StreamLayer")],le)}}]);
//# sourceMappingURL=2668.e1ea9eeb.chunk.js.map