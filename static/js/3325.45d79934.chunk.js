"use strict";(self.webpackChunkamit_kumar_rathi=self.webpackChunkamit_kumar_rathi||[]).push([[3325,5164],{31027:function(e,t,r){r.d(t,{$Z:function(){return M},BX:function(){return R},Cc:function(){return E},E_:function(){return d},F:function(){return C},FG:function(){return z},H1:function(){return c},JW:function(){return V},NA:function(){return b},NO:function(){return p},On:function(){return T},QI:function(){return h},Qf:function(){return F},Qs:function(){return f},RI:function(){return k},TB:function(){return L},TT:function(){return y},W7:function(){return Z},X_:function(){return I},be:function(){return v},cO:function(){return _},gJ:function(){return x},hf:function(){return s},nn:function(){return u},pJ:function(){return S},wO:function(){return a},wi:function(){return w},yL:function(){return g},zL:function(){return m}});var n=r(29439),i=r(37762);function a(e){return"function"==typeof e}function s(e,t,r,n){return a(e)?e(t,r,n):e}function u(e){return[e.r,e.g,e.b,e.a]}var l=" /-,\n";function o(e){for(var t=e.length;t--;)if(!l.includes(e.charAt(t)))return!1;return!0}function c(e,t){var r=[],n=0,i=-1;do{if((i=e.indexOf("[",n))>=n){if(i>n){var a=e.substr(n,i-n);r.push([a,null,o(a)])}if(n=i+1,(i=e.indexOf("]",n))>=n){if(i>n){var s=t[e.substr(n,i-n)];s&&r.push([null,s,!1])}n=i+1}}}while(-1!==i);if(n<e.length-1){var u=e.substr(n);r.push([u,null,o(u)])}return r}function d(e,t,r){var a,s="",u=null,l=(0,i.Z)(t);try{for(l.s();!(a=l.n()).done;){var o=a.value,c=(0,n.Z)(o,3),d=c[0],f=c[1],y=c[2];if(d)y?u=d:(u&&(s+=u,u=null),s+=d);else{var p=e.attributes[f];p&&(u&&(s+=u,u=null),s+=p)}}}catch(v){l.e(v)}finally{l.f()}return h(s,r)}function f(e,t,r){var n=c(t,e);return function(e){return d(e,n,r)}}function h(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function y(e,t,r,n,i,a){for(var s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=t/i,l=r/a,o=Math.ceil(u/2),c=Math.ceil(l/2),d=0;d<a;d++)for(var f=0;f<i;f++){for(var h=4*(f+(s?a-d-1:d)*i),y=0,p=0,v=0,m=0,g=0,x=0,b=0,_=(d+.5)*l,E=Math.floor(d*l);E<(d+1)*l;E++)for(var k=Math.abs(_-(E+.5))/c,S=(f+.5)*u,T=k*k,w=Math.floor(f*u);w<(f+1)*u;w++){var R=Math.abs(S-(w+.5))/o,Z=Math.sqrt(T+R*R);Z>=-1&&Z<=1&&((y=2*Z*Z*Z-3*Z*Z+1)>0&&(b+=y*e[(R=4*(w+E*t))+3],v+=y,e[R+3]<255&&(y=y*e[R+3]/250),m+=y*e[R],g+=y*e[R+1],x+=y*e[R+2],p+=y))}n[h]=m/p,n[h+1]=g/p,n[h+2]=x/p,n[h+3]=b/v}}function p(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function v(e){var t,r;return null!==(t=null===(r=e.data)||void 0===r?void 0:r.symbol)&&void 0!==t?t:null}function m(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function g(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function x(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e||isNaN(e)?t:e},_=function(e){return e.tintColor?p(e.tintColor):{r:255,g:255,b:255,a:1}},E=function(e){if(!e)return!1;var t,r=(0,i.Z)(e);try{for(r.s();!(t=r.n()).done;){switch(t.value.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}}}catch(n){r.e(n)}finally{r.f()}return!1};function k(){return Promise.all([r.e(9058),r.e(309)]).then(r.bind(r,50309))}function S(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function T(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function w(e){var t="normal",r="normal";if(e){var n=e.toLowerCase();n.includes("italic")?t="italic":n.includes("oblique")&&(t="oblique"),n.includes("bold")?r="bold":n.includes("light")&&(r="lighter")}return{style:t,weight:r}}function R(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function Z(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers){var t,r=(0,i.Z)(e.symbolLayers);try{for(r.s();!(t=r.n()).done;){var n=Z(t.value);if(null!=n)return n}}catch(a){r.e(a)}finally{r.f()}}break;case"CIMTextSymbol":return Z(e.symbol);case"CIMSolidFill":return e.color}}function M(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":var t=e.symbolLayers;if(t){var r,n=(0,i.Z)(t);try{for(n.s();!(r=n.n()).done;){var a=M(r.value);if(null!=a)return a}}catch(s){n.e(s)}finally{n.f()}}break;case"CIMTextSymbol":return M(e.symbol);case"CIMSolidStroke":return e.color}}function C(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers){var t,r=(0,i.Z)(e.symbolLayers);try{for(r.s();!(t=r.n()).done;){var n=C(t.value);if(void 0!==n)return n}}catch(a){r.e(a)}finally{r.f()}}break;case"CIMTextSymbol":return C(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function I(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function z(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function F(e){return(e?Object.keys(e):[]).map((function(t){return{name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"}}))}var L=function(e){return e.includes("data:image/svg+xml")};function V(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}},26885:function(e,t,r){r.d(t,{H:function(){return k}});var n=r(74165),i=r(15861),a=r(37762),s=r(15671),u=r(43144),l=r(10064),o=r(93169),c=r(32718),d=r(66978),f=r(94109),h=r(84328),y=r(84319),p=r(64668),v=r(8548),m=r(53634),g=r(57808),x=r(52311),b=c.Z.getLogger("esri.views.2d.engine.webgl.AttributeStoreView"),_=(0,p.g)(p.P,b),E=function(){function e(t,r,n){(0,s.Z)(this,e),this._texture=null,this._lastTexture=null,this._fbos={},this.texelSize=4;var i=t.buffer,a=t.pixelType,u=t.textureOnly,l=(0,y.UK)(a);this.shared=n,this.pixelType=a,this.size=r,this.textureOnly=u,u||(this.data=new l(i)),this._resetRange()}return(0,u.Z)(e,[{key:"destroy",value:function(){var e;for(var t in null===(e=this._texture)||void 0===e||e.dispose(),this._fbos){var r=this._fbos[t];r&&("0"===t&&r.detachColorTexture(),r.dispose()),this._fbos[t]=null}this._texture=null}},{key:"_textureDesc",get:function(){var e=new x.X;return e.wrapMode=v.e8.CLAMP_TO_EDGE,e.samplingMode=v.cw.NEAREST,e.dataType=this.pixelType,e.width=this.size,e.height=this.size,e}},{key:"setData",value:function(e,t,r){var n=(0,h.jL)(e),i=this.data,a=n*this.texelSize+t;!i||a>=i.length||(i[a]=r,this.dirtyStart=Math.min(this.dirtyStart,n),this.dirtyEnd=Math.max(this.dirtyEnd,n))}},{key:"getData",value:function(e,t){if(null==this.data)return null;var r=(0,h.jL)(e)*this.texelSize+t;return!this.data||r>=this.data.length?null:this.data[r]}},{key:"getTexture",value:function(e){var t;return null!==(t=this._texture)&&void 0!==t?t:this._initTexture(e)}},{key:"getFBO",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this._fbos[t]){var r=0===t?this.getTexture(e):this._textureDesc;this._fbos[t]=new m.X(e,r)}return this._fbos[t]}},{key:"locked",get:function(){return!(this.pixelType!==v.Br.UNSIGNED_BYTE||!this.shared||this.textureOnly||!(0,o.Z)("esri-atomics")||!this.data)&&1===Atomics.load(this.data,0)}},{key:"hasDirty",get:function(){var e=this.dirtyStart;return this.dirtyEnd>=e}},{key:"updateTexture",value:function(e,t){if(!this.locked){try{var r=this.dirtyStart,n=this.dirtyEnd;if(!this.hasDirty)return;this._resetRange();var i=this.data.buffer,a=this.getTexture(e),s=(r-r%this.size)/this.size,u=(n-n%this.size)/this.size,o=s,c=this.size,d=u,f=s*this.size*4,h=4*(c+d*this.size)-f,p=(0,y.UK)(this.pixelType),v=new p(i,f*p.BYTES_PER_ELEMENT,h),m=this.size,g=d-o+1;if(g>this.size)return void b.error(new l.Z("mapview-webgl","Out-of-bounds index when updating AttributeData"));a.updateData(0,0,o,m,g,v)}catch(x){}t()}}},{key:"update",value:function(e){var t=e.data,r=e.start,n=e.end;if(null!=t&&null!=this.data)for(var i=this.data,a=r*this.texelSize,s=0;s<t.length;s++){var u=1<<s%this.texelSize;e.layout&u&&(i[a+s]=t[s])}this.dirtyStart=Math.min(this.dirtyStart,r),this.dirtyEnd=Math.max(this.dirtyEnd,n)}},{key:"resize",value:function(e,t){var r=this.size;if(this.size=t,this.textureOnly)r!==this.size&&(this._lastTexture=this._texture,this._texture=null);else{var n=(0,y.UK)(this.pixelType);this.destroy(),this.data=new n(e.buffer)}}},{key:"_resetRange",value:function(){this.dirtyStart=2147483647,this.dirtyEnd=0}},{key:"_initTexture",value:function(e){var t,r=new g.x(e,this._textureDesc,null!==(t=this.data)&&void 0!==t?t:void 0);if(null!=this._lastTexture&&this._fbos[0]){var n=this._lastTexture.descriptor.width,i=this._lastTexture.descriptor.height,a=this._lastTexture.descriptor.dataType,s=this._lastTexture.descriptor.pixelFormat,u=this.getFBO(e),l=(0,y.Yw)(a),o=new((0,y.UK)(a))(new ArrayBuffer(n*i*l*this.texelSize)),c=e.getBoundFramebufferObject(),d=e.getViewport(),f=d.x,h=d.y,p=d.width,v=d.height;e.bindFramebuffer(u),u.readPixels(0,0,n,i,s,a,o),r.updateData(0,0,0,2*n,i/2,o),e.setViewport(f,h,p,v),e.bindFramebuffer(c)}return this.destroy(),this._texture=r,this._texture}}]),e}(),k=function(){function e(t){(0,s.Z)(this,e),this._onUpdate=t,this._initialized=!1,this._forceNextUpload=!1,this._locked=!1}return(0,u.Z)(e,[{key:"initialize",value:function(e){var t=e.blocks,r=e.shared,n=e.size;if(this.shared=r,this.size=n,_("Initializing AttributeStoreView",e),null==this._data)this._data=t.map((function(e){return null!=e?new E(e,n,r):null}));else for(var i=0;i<this._data.length;i++){var a=this._data[i],s=t[i];null!=s&&(null==a?this._data[i]=new E(s,n,r):a.resize(s,n))}this._initialized=!0}},{key:"destroy",value:function(){var e,t,r,n=(0,a.Z)(null!==(t=this._data)&&void 0!==t?t:[]);try{for(n.s();!(r=n.n()).done;){var i=r.value;null===i||void 0===i||i.destroy()}}catch(s){n.e(s)}finally{n.f()}null===(e=this._defaultTexture)||void 0===e||e.dispose()}},{key:"isEmpty",value:function(){return null==this._data}},{key:"isUpdating",value:function(){var e=null!=this._pendingAttributeUpdate,t=e;return(0,o.Z)("esri-2d-log-updating")&&console.log("Updating AttributeStoreView ".concat(t,"\n  -> hasPendingUpdate ").concat(e)),t}},{key:"getBlock",value:function(e){return null==this._data?null:this._data[e]}},{key:"setLabelMinZoom",value:function(e,t){this.setData(e,0,1,t)}},{key:"getLabelMinZoom",value:function(e){return this.getData(e,0,1,255)}},{key:"getFilterFlags",value:function(e){return this.getData(e,0,0,0)}},{key:"getVVSize",value:function(e){return this.getData(e,f.mb,0,0)}},{key:"getData",value:function(e,t,r,n){if(!this._data)return 0;var i=this._data[t];if(null==i)return 0;var a=i.getData(e,r);return null!=a?a:n}},{key:"setData",value:function(e,t,r,n){this._data[t].setData(e,r,n)}},{key:"lockTextureUpload",value:function(){this._locked=!0}},{key:"unlockTextureUpload",value:function(){this._locked=!1}},{key:"forceTextureUpload",value:function(){this._forceNextUpload=!0}},{key:"requestUpdate",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._pendingAttributeUpdate){e.next=2;break}return e.abrupt("return",void b.error(new l.Z("mapview-webgl","Tried to update attribute data with a pending update")));case 2:return r=(0,d.hh)(),e.abrupt("return",(_("AttributeStoreView Update Requested",t),this._pendingAttributeUpdate={data:t,resolver:r},this._onUpdate(),r.promise));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){if(this._initialized&&null!=this._pendingAttributeUpdate){(0,o.Z)("esri-2d-update-debug")&&console.debug("AttributeStoreView::update");for(var e=this._pendingAttributeUpdate,t=e.data,r=e.resolver,n=this._data,i=0;i<t.blocks.length;i++){var a=t.blocks[i],s=n[i];null!=s&&null!=a&&(_("Updating block ".concat(i),a),s.update(a))}this._pendingAttributeUpdate=null,r(),this._onUpdate()}}},{key:"bindTextures",value:function(e){var t,r,n,i,s,u,l,o,c,d,h,y,p,v,m=this,g=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],x=this._getDefaultTexture(e);if(!this._initialized)return e.bindTexture(x,f.XO),void(g&&(e.bindTexture(x,f.jS),e.bindTexture(x,f.tg),e.bindTexture(x,f.$y),e.bindTexture(x,f.Im),e.bindTexture(x,f.o2),e.bindTexture(x,f.pb)));var b=this._data;if(!this._locked||this._forceNextUpload){var _,E=(0,a.Z)(b);try{for(E.s();!(_=E.n()).done;){var k=_.value;null===k||void 0===k||k.updateTexture(e,(function(){return m._onUpdate()}))}}catch(S){E.e(S)}finally{E.f()}this._forceNextUpload=!1}e.bindTexture(null!==(t=null===(r=b[f.j9])||void 0===r?void 0:r.getTexture(e))&&void 0!==t?t:x,f.XO),g&&(e.bindTexture(null!==(n=null===(i=b[f.U8])||void 0===i?void 0:i.getTexture(e))&&void 0!==n?n:x,f.pb),e.bindTexture(null!==(s=null===(u=b[f.S])||void 0===u?void 0:u.getTexture(e))&&void 0!==s?s:x,f.jS),e.bindTexture(null!==(l=null===(o=b[f.mb])||void 0===o?void 0:o.getTexture(e))&&void 0!==l?l:x,f.tg),e.bindTexture(null!==(c=null===(d=b[f.Fn])||void 0===d?void 0:d.getTexture(e))&&void 0!==c?c:x,f.$y),e.bindTexture(null!==(h=null===(y=b[f.Im])||void 0===y?void 0:y.getTexture(e))&&void 0!==h?h:x,f.Im),e.bindTexture(null!==(p=null===(v=b[f.o2])||void 0===v?void 0:v.getTexture(e))&&void 0!==p?p:x,f.o2))}},{key:"_getDefaultTexture",value:function(e){if(null==this._defaultTexture){var t=new x.X;t.wrapMode=v.e8.CLAMP_TO_EDGE,t.samplingMode=v.cw.NEAREST,t.width=1,t.height=1,this._defaultTexture=new g.x(e,t,new Uint8Array(4))}return this._defaultTexture}}]),e}()},84328:function(e,t,r){r.d(t,{Ht:function(){return n},KS:function(){return o},QC:function(){return s},QS:function(){return d},jL:function(){return l},mi:function(){return a},nE:function(){return c},vs:function(){return u}});var n=8388607,i=8388608,a=0,s=1,u=function(e){return(e&i)>>>23},l=function(e){return e&n},o=function(e){return u(e)===s?254:255};function c(e){return u(e)===s}function d(e,t){return((t?i:0)|e)>>>0}},39694:function(e,t,r){r.d(t,{I:function(){return l},S:function(){return o}});var n=r(74165),i=r(37762),a=r(15671),s=r(43144),u=r(70734),l=function(){function e(t,r,n,i,s){(0,a.Z)(this,e),this.target=t,this.geometryType=r,this.materialKey=n,this.indexFrom=i,this.indexCount=s}return(0,s.Z)(e,[{key:"indexEnd",get:function(){return this.indexFrom+this.indexCount}},{key:"extend",value:function(e){this.indexCount+=e}}]),e}(),o=function(){function e(t,r){(0,a.Z)(this,e),this.geometryType=0,this._target=t,this.geometryType=r}return(0,s.Z)(e,[{key:"addRecord",value:function(e){var t=this._target,r=this.geometryType,n=e.materialKey,i=e.indexFrom,a=e.indexCount,s=e.vertexFrom,o=e.vertexCount;if(a||(i=s,a=o),null!=this._head){for(var c=null,d=this._head;d;){if(i<d.data.indexFrom)return this._insert(n,i,a,c,d);c=d,d=d.next}this._insert(n,i,a,c,null)}else{var f=new l(t,r,n,i,a);this._head=new u.a(f)}}},{key:"forEach",value:function(e){null!=this._head&&this._head.forEach(e)}},{key:"infos",value:(0,n.Z)().mark((function e(){var t,r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this._head){e.next=18;break}t=(0,i.Z)(this._head.values()),e.prev=2,t.s();case 4:if((r=t.n()).done){e.next=10;break}return a=r.value,e.next=8,a;case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))},{key:"_insert",value:function(e,t,r,n,i){if(null==n&&null==i){var a=new l(this._target,this.geometryType,e,t,r);this._head=new u.a(a)}return null==n&&null!=i?this._insertAtHead(e,t,r,i):null!=n&&null==i?this._insertAtEnd(e,t,r,n):null!=n&&null!=i?this._insertAtMiddle(e,t,r,n,i):void 0}},{key:"_insertAtHead",value:function(e,t,r,n){var i=t+r;if(e===n.data.materialKey&&i===n.data.indexFrom)n.data.indexFrom=t,n.data.indexCount+=r;else{var a=new l(this._target,this.geometryType,e,t,r);this._head=new u.a(a),this._head.next=n}}},{key:"_insertAtEnd",value:function(e,t,r,n){if(n.data.materialKey===e&&n.data.indexEnd===t)n.data.indexCount+=r;else{var i=new l(this._target,this.geometryType,e,t,r),a=new u.a(i);n.next=a}}},{key:"_insertAtMiddle",value:function(e,t,r,n,i){var a=t+r;if(n.data.materialKey===e&&n.data.indexEnd===t)n.data.indexCount+=r,n.data.materialKey===i.data.materialKey&&n.data.indexEnd===i.data.indexFrom&&(n.data.indexCount+=i.data.indexCount,n.next=i.next);else if(e===i.data.materialKey&&a===i.data.indexFrom)i.data.indexFrom=t,i.data.indexCount+=r;else{var s=new l(this._target,this.geometryType,e,t,r),o=new u.a(s);n.next=o,o.next=i}}}],[{key:"from",value:function(t,r,n,a){var s=new e(t,r);if(null!=a){var u,l=(0,i.Z)(a);try{for(l.s();!(u=l.n()).done;){var o=u.value;n.seekIndex(o),s.addRecord(n)}}catch(c){l.e(c)}finally{l.f()}}else for(;n.next();)s.addRecord(n);return s}}]),e}()},72900:function(e,t,r){r.d(t,{I:function(){return d}});var n=r(29439),i=r(15671),a=r(43144),s=r(60136),u=r(29388),l=r(22753),o=r(87422),c=r(73828),d=function(e){(0,s.Z)(r,e);var t=(0,u.Z)(r);function r(e,n,a,s,u,l){var o,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:u,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:l;return(0,i.Z)(this,r),(o=t.call(this)).triangleCountReportedInDebug=0,o.triangleCount=0,o.texture=null,o.key=new c.Z(e),o.resolution=n,o.x=a,o.y=s,o.width=u,o.height=l,o.rangeX=d,o.rangeY=f,o}return(0,a.Z)(r,[{key:"destroy",value:function(){this.texture&&(this.texture.dispose(),this.texture=null)}},{key:"setTransform",value:function(e){var t=this.resolution/(e.resolution*e.pixelRatio),r=this.transforms.tileMat3,i=e.toScreenNoRotation([0,0],[this.x,this.y]),a=(0,n.Z)(i,2),s=a[0],u=a[1],o=this.width/this.rangeX*t,c=this.height/this.rangeY*t;(0,l.s)(r,o,0,0,0,c,0,s,u,1),(0,l.m)(this.transforms.dvs,e.displayViewMat3,r)}}]),r}(o.s)},98774:function(e,t,r){r.d(t,{o:function(){return m}});var n=r(29439),i=r(88301),a=r(61120),s=r(60136),u=r(29388),l=r(15671),o=r(43144),c=r(22018),d=r(11245),f=r(22753),h=r(23588),y=r(94109),p=r(72900),v=function(){function e(){(0,l.Z)(this,e)}return(0,o.Z)(e,[{key:"acquire",value:function(e){return{refCount:1,version:-1,labelMat2d:(0,d.c)(),tileMat3:(0,h.c)(),dvs:(0,h.c)()}}},{key:"release",value:function(e){}}]),e}(),m=function(e){(0,s.Z)(r,e);var t=(0,u.Z)(r);function r(e,n,i,a){return(0,l.Z)(this,r),t.call(this,e,n,i,a,y.i9,y.i9)}return(0,o.Z)(r,[{key:"destroy",value:function(){(0,i.Z)((0,a.Z)(r.prototype),"destroy",this).call(this),this._transforms&&r.TransformCache.release(this.key.hash)}},{key:"setTransform",value:function(e){var t=this.resolution/e.resolution,r=this.transforms.tileMat3,i=e.toScreenNoRotation([0,0],[this.x,this.y]),a=(0,n.Z)(i,2),s=a[0],u=a[1],l=this.width/this.rangeX*t,o=this.height/this.rangeY*t;(0,f.s)(r,l,0,0,0,o,0,s,u,1),(0,f.m)(this.transforms.dvs,e.displayViewMat3,r);var h=this.transforms.labelMat2d,y=window.devicePixelRatio,p=(0,c.d)((0,d.c)(),l*y,0,0,o*y,s*y,u*y);(0,c.m)(h,e.viewMat2d,p)}},{key:"_createTransforms",value:function(){return r.TransformCache.acquire(this.key.hash)}}]),r}(p.I);m.TransformCache=new v},50477:function(e,t,r){r.d(t,{$:function(){return l}});var n=r(15671),i=r(43144),a=r(94109),s=r(39694),u=2147483647,l=function(){function e(t){(0,n.Z)(this,e),this._head=t,this._cursor=t}return(0,i.Z)(e,[{key:"size",value:function(){for(var e=this._cursor,t=0;e;)t+=e.size(),e=e._link;return t}},{key:"id",get:function(){return this._cursor.id},set:function(e){this._cursor.id=e}},{key:"materialKey",get:function(){return this._cursor.materialKey},set:function(e){this._cursor.materialKey=e}},{key:"insertAfter",get:function(){return this._cursor.insertAfter}},{key:"indexFrom",get:function(){return this._cursor.indexFrom},set:function(e){this._cursor.indexFrom=e}},{key:"indexCount",get:function(){return this._cursor.indexCount},set:function(e){this._cursor.indexCount=e}},{key:"vertexFrom",get:function(){return this._cursor.vertexFrom},set:function(e){this._cursor.vertexFrom=e}},{key:"vertexCount",get:function(){return this._cursor.vertexCount},set:function(e){this._cursor.vertexCount=e}},{key:"sortKey",get:function(){return this._cursor.sortKey},set:function(e){this._cursor.sortKey=e}},{key:"index",get:function(){return this._cursor._indexStart+this._cursor._index}},{key:"seekIndex",value:function(e){var t=e;for(this._cursor=this._head;this._cursor;){var r=this._cursor.size();if(t<r)return this._cursor._index=t,!0;t-=r,this._cursor=this._cursor._link}return!1}},{key:"forEach",value:function(e){for(var t=this.getCursor();t.next();)e(t)}},{key:"link",value:function(e){if(this._head){for(var t=this._head;t._link;)t=t._link;t._link=e._head,t._link._indexStart=t._indexStart+t.size()}else this._head=e._head}},{key:"getCursor",value:function(){return this.copy()}},{key:"getDrawInfo",value:function(e,t){return new s.I(e,t,this.materialKey,this.indexFrom,this.indexCount)}},{key:"lookup",value:function(e){for(this._cursor=this._head;this._cursor&&!this._cursor.lookup(e);){if(!this._cursor._link)return!1;this._cursor=this._cursor._link}return!!this._cursor}},{key:"copy",value:function(){var t,r=new e(null===(t=this._head)||void 0===t?void 0:t.copy());if(!r._head)return r;for(var n=r._head,i=r._head._link;i;)n._link=i.copy(),i=(n=i)._link;return r}},{key:"next",value:function(){return!!this._cursor&&(!!this._cursor.next()||!!this._cursor._link&&(this._cursor=this._cursor._link,this.next()))}},{key:"peekId",value:function(){var e;return null!==(e=this._cursor.peekId())&&void 0!==e?e:this._cursor._link.peekId()}},{key:"delete",value:function(e){for(var t=this._head,r=null;t;){if(t.delete(e))return t.isEmpty()&&(null!=r&&(r._link=t._link),t===this._head&&(this._head=t._link),t===this._cursor&&(this._cursor=t._link)),!0;r=t,t=t._link}return!1}}],[{key:"from",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength/o.BYTES_PER_RECORD-r;return new e(new o(new Int32Array(t,r*o.BYTES_PER_RECORD,n*o.ELEMENTS_PER_RECORD)))}}]),e}();l.ELEMENTS_PER_RECORD=a.T3,l.BYTES_PER_RECORD=l.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;var o=function(){function e(t){(0,n.Z)(this,e),this._link=null,this._index=-1,this._indexStart=0,this._packedRecordsF32=null,this._deletedCount=0,this._offsets={instance:null},this._packedRecords=t}return(0,i.Z)(e,[{key:"delete",value:function(e){var t=this._index,r=this.lookup(e);if(r)for(this.id=u,++this._deletedCount;this.next()&&this.id===e;)this.id=u,++this._deletedCount;return this._index=t,r}},{key:"isEmpty",value:function(){return this._deletedCount===this.size()}},{key:"link",value:function(e){this._link?this._link.link(e):this._link=e}},{key:"lookup",value:function(e){if(null==this._offsets.instance){this._offsets.instance=new Map;var t=this.copy();t._index=-1;for(var r=0;t.next();)t.id!==r&&(this._offsets.instance.set(t.id,t._index),r=t.id)}if(!this._offsets.instance.has(e))return!1;var n=this._index;return this._index=this._offsets.instance.get(e),this.id!==u||(this._index=n,!1)}},{key:"id",get:function(){return this._packedRecords[this._index*e.ELEMENTS_PER_RECORD]},set:function(t){this._packedRecords[this._index*e.ELEMENTS_PER_RECORD]=t}},{key:"materialKey",get:function(){return this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+1]},set:function(t){this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+1]=t}},{key:"insertAfter",get:function(){return this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+2]}},{key:"indexFrom",get:function(){return this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+3]},set:function(t){this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+3]=t}},{key:"indexCount",get:function(){return this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+4]},set:function(t){this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+4]=t}},{key:"vertexFrom",get:function(){return this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+5]},set:function(t){this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+5]=t}},{key:"vertexCount",get:function(){return this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+6]},set:function(t){this._packedRecords[this._index*e.ELEMENTS_PER_RECORD+6]=t}},{key:"sortKey",get:function(){return this._packedRecordsF32||(this._packedRecordsF32=new Float32Array(this._packedRecords.buffer)),this._packedRecordsF32[this._index*e.ELEMENTS_PER_RECORD+7]},set:function(t){this._packedRecordsF32||(this._packedRecordsF32=new Float32Array(this._packedRecords.buffer)),this._packedRecordsF32[this._index*e.ELEMENTS_PER_RECORD+7]=t}},{key:"index",get:function(){return this._index}},{key:"size",value:function(){return this._packedRecords.length/e.ELEMENTS_PER_RECORD}},{key:"next",value:function(){for(;++this._index<this.size()&&this.id===u;);return this._index<this.size()}},{key:"peekId",value:function(){var t=(this._index+1)*e.ELEMENTS_PER_RECORD;return t>=this._packedRecords.length?0:this._packedRecords[t]}},{key:"getCursor",value:function(){return this.copy()}},{key:"copy",value:function(){var t=new e(this._packedRecords);return t._indexStart=this._indexStart,t._link=this._link,t._index=this._index,t._offsets=this._offsets,t._deletedCount=this._deletedCount,t}}],[{key:"from",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.byteLength/this.BYTES_PER_RECORD-r;return new e(new Int32Array(t,r*this.BYTES_PER_RECORD,n*this.ELEMENTS_PER_RECORD))}}]),e}();o.ELEMENTS_PER_RECORD=a.T3,o.BYTES_PER_RECORD=o.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT},70734:function(e,t,r){r.d(t,{a:function(){return s},m:function(){return u}});var n=r(74165),i=r(15671),a=r(43144),s=function(){function e(t){if((0,i.Z)(this,e),this.next=null,Array.isArray(t)){this.data=t[0];for(var r=this,n=1;n<t.length;n++)r.next=new e([t[n]]),r=r.next}else this.data=t}return(0,a.Z)(e,[{key:"values",value:(0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this;case 1:if(!t){e.next=7;break}return e.next=4,t.data;case 4:t=t.next;case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},{key:"forEach",value:function(e){for(var t=this;t;)e(t.data),t=t.next}},{key:"find",value:function(e){var t;return e(this.data)?this:null===(t=this.next)||void 0===t?void 0:t.find(e)}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,r=e(this.data)>e(t.data)?this:t;return this.next?this.next.max(e,r):r}},{key:"remove",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this===e?n?(n.next=this.next,n):this.next:null!==(t=null===(r=this.next)||void 0===r?void 0:r.remove(e,this))&&void 0!==t?t:null}},{key:"last",get:function(){return this.next?this.next.last:this}}]),e}(),u=function(){function e(t){(0,i.Z)(this,e),this._head=null,null!=t&&(this._head=new s(t))}return(0,a.Z)(e,[{key:"head",get:function(){return this._head}},{key:"maxAvailableSpace",value:function(){if(null==this._head)return 0;var e=this._head.max((function(e){return e.end-e.start}));return e.data.end-e.data.start}},{key:"firstFit",value:function(e){if(null==this._head)return null;for(var t=null,r=this._head;r;){var n=r.data.end-r.data.start;if(n===e)return t?t.next=r.next:this._head=r.next,r.data.start;if(n>e){var i=r.data.start;return r.data.start+=e,i}t=r,r=r.next}return null}},{key:"free",value:function(e,t){var r=e+t;if(null!=this._head){if(r<=this._head.data.start){if(r===this._head.data.start)return void(this._head.data.start-=t);var n=new s({start:e,end:r});return n.next=this._head,void(this._head=n)}for(var i=this._head,a=i.next;a;){if(a.data.start>=r){if(i.data.end===e){if(i.data.end+=t,i.data.end===a.data.start){var u=a.data.end-a.data.start;return i.data.end+=u,void(i.next=a.next)}return}if(a.data.start===r)return void(a.data.start-=t);var l=new s({start:e,end:r});return l.next=i.next,void(i.next=l)}i=a,a=a.next}if(e!==i.data.end){var o=new s({start:e,end:r});i.next=o}else i.data.end+=t}else{var c=new s({start:e,end:r});this._head=c}}}]),e}()},64668:function(e,t,r){r.d(t,{P:function(){return i},g:function(){return n}});var n=function(e,t){return e&&function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.warn.apply(t,["DEBUG:"].concat(r))}||function(){return null}},i=!1},18745:function(e,t,r){r.d(t,{a:function(){return u}});var n=r(10064),i=r(32718),a=r(80613),s=r(84319);function u(e){return(0,s.hj)(e.minDataValue)&&(0,s.hj)(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?a.X.SIZE_MINMAX_VALUE:(e.expression&&"view.scale"===e.expression||e.valueExpression&&"$view.scale"===e.valueExpression)&&Array.isArray(e.stops)?a.X.SIZE_SCALE_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&(Array.isArray(e.stops)||"levels"in e&&e.levels)?a.X.SIZE_FIELD_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&null!=e.valueUnit?a.X.SIZE_UNIT_VALUE:(i.Z.getLogger("esri.views.2d.engine.webgl").error(new n.Z("mapview-bad-type","Found invalid size VisualVariable",e)),a.X.NONE)}},85164:function(e,t,r){r.r(t),r.d(t,{createSymbolSchema:function(){return o}});var n=r(1413),i=r(78915),a=r(80613),s=r(54815);function u(e){var t;return"line-marker"===e.type?{type:"line-marker",color:null===(t=e.color)||void 0===t?void 0:t.toJSON(),placement:e.placement,style:e.style}:e.constructor.fromJSON(e.toJSON()).toJSON()}function l(e){return(0,s.hF)(e)}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return function(e,t,r){var i=(0,s.jj)(a.LW.FILL,t),o=r?l(i):i,c=e.clone(),d=c.outline,f=(0,s.jy)(t.symbologyType);f||(c.outline=null);var h=(0,n.Z)({materialKey:o,hash:c.hash()},u(c));if(f)return h;var y=[];if(y.push(h),d){var p=(0,s.jj)(a.LW.LINE,(0,n.Z)((0,n.Z)({},t),{},{isOutline:!0})),v=(0,n.Z)({materialKey:r?l(p):p,hash:d.hash()},u(d));y.push(v)}return{type:"composite-symbol",layers:y,hash:y.reduce((function(e,t){return t.hash+e}),"")}}(e,t,r);case"simple-marker":case"picture-marker":return function(e,t,r){if("simple-marker"===e.type&&("path"===e.style||e.outline&&"solid"!==e.outline.style&&"none"!==e.outline.style))return o({type:"CIMSymbolReference",symbol:i.B$.fromSimpleMarker(e)},t,r);var c=(0,s.jj)(a.LW.MARKER,t),d=r?l(c):c,f=u(e);return(0,n.Z)((0,n.Z)({materialKey:d,hash:e.hash()},f),{},{angle:e.angle,maxVVSize:t.maxVVSize})}(e,t,r);case"simple-line":return function(e,t,r){var i=(0,s.jy)(t.symbologyType)?a.mD.DEFAULT:t.symbologyType,o=(0,s.jj)(a.LW.LINE,(0,n.Z)((0,n.Z)({},t),{},{symbologyType:i})),c=r?l(o):o,d=e.clone(),f=d.marker;d.marker=null;var h=[];if(h.push((0,n.Z)({materialKey:c,hash:d.hash()},u(d))),f){var y,p=(0,s.jj)(a.LW.MARKER,t),v=r?l(p):p;f.color=null!==(y=f.color)&&void 0!==y?y:d.color,h.push((0,n.Z)({materialKey:v,hash:f.hash(),lineWidth:d.width},u(f)))}return{type:"composite-symbol",layers:h,hash:h.reduce((function(e,t){return t.hash+e}),"")}}(e,t,r);case"text":return function(e,t,r){var i=(0,s.jj)(a.LW.TEXT,t),o=r?l(i):i,c=u(e);return(0,n.Z)((0,n.Z)({materialKey:o,hash:e.hash()},c),{},{angle:e.angle,maxVVSize:t.maxVVSize})}(e,t,r);case"label":return function(e,t,r){var i=e.toJSON(),u=(0,s.jj)(a.LW.LABEL,(0,n.Z)((0,n.Z)({},t),{},{placement:i.labelPlacement}));return(0,n.Z)((0,n.Z)({materialKey:r?l(u):u,hash:e.hash()},i),{},{labelPlacement:i.labelPlacement})}(e,t,r);case"cim":return{type:"cim",rendererKey:t.vvFlags,data:e.data,maxVVSize:t.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:t.vvFlags,data:e,maxVVSize:t.maxVVSize};case"web-style":return(0,n.Z)((0,n.Z)({},u(e)),{},{type:"web-style",hash:e.hash(),rendererKey:t.vvFlags,maxVVSize:t.maxVVSize});default:throw new Error("symbol not supported ".concat(e.type))}}},69534:function(e,t,r){r.d(t,{MD:function(){return U},Ew:function(){return I},q5:function(){return M}});var n=r(93433),i=r(1413),a=r(37762),s=r(63780),u=r(10064),l=r(93169),o=r(32718),c=r(17842),d=r(76672),f=r(48732),h=r(85116),y=r(80613),p=r(84319),v=r(98029),m=r(18745);function g(e){if(!e)return y.X.NONE;var t,r=0,n=(0,a.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if("size"===i.type){var s=(0,m.a)(i);r|=s,"outline"===i.target&&(r|=s<<4)}else"color"===i.type?r|=y.X.COLOR:"opacity"===i.type?r|=y.X.OPACITY:"rotation"===i.type&&(r|=y.X.ROTATION)}}catch(u){n.e(u)}finally{n.f()}return r}var x=r(85164),b=(r(78915),r(691)),_=r(94109);r(95857),r(29145);function E(e,t){if(!("visualVariables"in e))return 0;if(!e.hasVisualVariables("size"))return 0;var r=e.getVisualVariablesForType("size");if(!r[0])return 0;var n=r[0];if(t&&"cluster_count"===n.field&&"cluster"===t.type)return t.clusterMaxSize;if("outline"===n.target)return 0;if("stops"===n.transformationType)return n.stops.map((function(e){return e.size})).reduce(k,0);if("clamped-linear"===n.transformationType){var i,a;return i="number"==typeof n.maxSize?n.maxSize:n.maxSize.stops.map((function(e){return e.size})).reduce(k,0),a="number"==typeof n.minSize?n.minSize:n.minSize.stops.map((function(e){return e.size})).reduce(k,0),Math.max(i,a)}return"real-world-size"===n.transformationType?30:void 0}_.b7.metrics,new b.Z(0,0,24,24);function k(e,t){return Math.max(e,t)}var S=r(91370),T=r(20478),w=r(31666),R=o.Z.getLogger("esri.views.2d.layers.features.schemaUtils"),Z="ValidationError";function M(e,t){var r=0,n=0,i=y.mD.DEFAULT;if(null!=e){if(n=E(e,t),"visualVariables"in e&&(r=g(e.visualVariables||[]),"dot-density"===e.type&&(i=y.mD.DOT_DENSITY)),"heatmap"===e.type&&(i=y.mD.HEATMAP),"dictionary"===e.type)return{maxVVSize:n,vvFlags:r,symbologyType:y.mD.DEFAULT};if("pie-chart"===e.type)return{maxVVSize:n,vvFlags:r,symbologyType:y.mD.PIE_CHART};if(i!==y.mD.DOT_DENSITY&&i!==y.mD.HEATMAP){var s=e.getSymbols();"backgroundFillSymbol"in e&&e.backgroundFillSymbol&&s.push(e.backgroundFillSymbol);var u,l=!0,o=!0,c=(0,a.Z)(s);try{for(c.s();!(u=c.n()).done;){var d=u.value;if("cim"!==d.type&&"web-style"!==d.type||(o=!1),"simple-fill"===d.type||"picture-fill"===d.type){var f=d.outline,h=f&&"none"!==f.style&&"solid"!==f.style,p="simple-fill"===d.type&&"none"!==d.style&&"solid"!==d.style;h&&(l=!1),("picture-fill"===d.type||p||h)&&(o=!1)}}}catch(v){c.e(v)}finally{c.f()}l?i=o?y.mD.OUTLINE_FILL_SIMPLE:y.mD.OUTLINE_FILL:o&&(i=y.mD.SIMPLE)}}return{vvFlags:r,maxVVSize:n,symbologyType:i}}var C=null;function I(e){if((0,l.Z)("esri-2d-update-debug")){var t=z(e,!0);console.debug("Created new schema",t),console.debug("Schema diff",(0,f.Hg)(C,t)),C=t}return z(e)}function z(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var r,s,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Array,i=0;return r.push(function(e,t){var r,i,s,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={indexCount:0,fields:{}},c="featureReduction"in e&&null!==(r=e.featureReduction)&&void 0!==r?r:void 0,d=c?"aggregate":"feature";if("sublayers"in e){var f,p={type:"subtype",subtypeField:e.subtypeField,renderers:{},symbologyType:y.mD.DEFAULT},v={type:"subtype",mapping:{},target:"feature",subtypeField:e.subtypeField},m={type:"subtype",classes:{}},b={type:"symbol",target:"feature",aggregateFields:[],attributes:o,storage:v,mesh:{matcher:p,aggregateMatcher:null,labels:m,sortKey:null}},_=new Set,E=0,k=(0,a.Z)(e.sublayers);try{var C=function(){var e=f.value,t=e.renderer,r=e.subtypeCode,n=e.labelingInfo,i=e.labelsVisible,a=0;"visualVariables"in t&&t.visualVariables&&(t.visualVariables.some((function(e){return"rotation"!==e.type}))&&R.warnOnce("SubtypeGroupLayer currently only supports rotation visualVariables. All other visualVariable types will be ignored."),a=g(t.visualVariables.filter((function(e){return"size"!==e.type}))));var s={symbologyType:y.mD.DEFAULT,vvFlags:a,maxVVSize:0},c=U(o,d,t,s,l),h=N(o,d,t),x=i&&n;if("dictionary"===c.type)throw new u.Z(Z,"Dictionary renderer is not supported in subtype layers");if("subtype"===c.type)throw new u.Z(Z,"Nested subtype renderers is not supported");if(null!=h&&"subtype"===h.type)throw new u.Z(Z,"Nested subtype storage is not supported");if(null!=(null===h||void 0===h?void 0:h.attributeMapping))throw new u.Z(Z,"Non-visual-variable attributes are not supported in subtype layers");if("heatmap"===c.type)throw new u.Z(Z,"Heatmaps are not supported in subtype layers");if("pie-chart"===c.type)throw new u.Z(Z,"Pie-charts are not supported in subtype layers");if(_.has(r))throw new u.Z(Z,"Subtype codes for sublayers must be unique");_.add(r),p.renderers[r]=c,v.mapping[r]=h,x&&(m.classes[r]=x.map((function(e){return A(o,e,"feature",E++,s,l)})))};for(k.s();!(f=k.n()).done;)C()}catch(Y){k.e(Y)}finally{k.f()}return b}if("heatmap"===(null===(i=e.renderer)||void 0===i?void 0:i.type)&&"raster"===(0,S.rk)()){var I=e.renderer,z=I.radius,F=I.fieldOffset,L=I.field;return{type:"heatmap",aggregateFields:[],attributes:o,target:d,storage:null,mesh:{radius:z,fieldOffset:F,field:O(o,{target:d,field:L,resultType:"numeric"}).field}}}var V=function(e,t,r){var i,s,l="featureReduction"in t&&t.featureReduction;if(!l)return{fields:[],labels:[],matcher:void 0,rendererOverride:void 0};var o="aggregate",c=[],d=null,f=(0,w.oq)(t.geometryType),y=[],p=null;if(l)switch(l.type){case"selection":return R.error(new u.Z(Z,"Mapview does not support `selection` reduction type",l)),{fields:[],labels:[],matcher:void 0,rendererOverride:void 0};case"cluster":case"binning":if(c.push.apply(c,(0,n.Z)(null!==(i=l.fields)&&void 0!==i?i:[])),"cluster"===l.type?f="esriGeometryPoint":"binning"===l.type&&(f="esriGeometryPolygon"),!l.renderer||null!==(s=l.renderer.authoringInfo)&&void 0!==s&&s.isAutoGenerated){if("cluster"===l.type){if(p=(0,T.S1)(c,t.renderer,l,null,!0),l.symbol){var v=M(p,l);d={type:"simple",symbol:(0,x.createSymbolSchema)(l.symbol,v,r),symbologyType:v.symbologyType}}y=l&&l.labelsVisible&&l.labelingInfo||[]}}else{if("cluster"===l.type)p=(0,T.st)(l.renderer,l,null).renderer;else p=l.renderer;var m=M(l.renderer,l);d=U(e,o,l.renderer,m,r),y=l&&l.labelsVisible&&l.labelingInfo||[]}}return function(e,t){var r,n={mesh:!0,storage:!0},i=(0,a.Z)(t);try{for(i.s();!(r=i.n()).done;){var s=r.value,u=s.name,l=s.onStatisticField,o=s.onStatisticExpression,c=s.statisticType,d=void 0,f=void 0,h="numeric",y="feature";o?f=P(e,{type:"expression",target:y,valueExpression:o.expression,resultType:h}).fieldIndex:d=P(e,{type:"field",target:y,field:l}).field,P(e,{type:"statistic",target:"aggregate",name:u,context:n,inField:d,inFieldIndex:f,statisticType:c})}}catch(Y){i.e(Y)}finally{i.f()}}(e,c),{labels:(0,h.a)(y,"binning"===l.type?"esriGeometryPolygon":f),matcher:d,fields:c,rendererOverride:p}}(o,e,l),D=(0,w.oq)(e.geometryType),B=null!==(s=V.rendererOverride)&&void 0!==s?s:e.renderer,K=M(B,c),j=U(o,d,B,K,l),X=N(o,d,B),G=function(e,t,r,n){if(null!=n)return null;if(null!=t&&t.length){t.length>1&&R.warn("Layer rendering currently only supports ordering by 1 orderByInfo, but found ".concat(t.length,". All but the first will be discarded"));var i=t[0],a="ascending"===i.order?"asc":"desc";return i.field?{field:i.field,order:a}:i.valueExpression?{fieldIndex:P(e,{type:"expression",target:"feature",valueExpression:i.valueExpression,resultType:"numeric"}).fieldIndex,order:a}:(R.error(new u.Z(Z,"Expected to find a field or valueExpression for OrderByInfo",i)),null)}if(null!=r&&"unique-value"===r.type&&r.orderByClassesEnabled)return{byRenderer:!0,order:"asc"};return null}(o,e.orderBy,e.renderer,c),q=e.labelsVisible&&e.labelingInfo||[],H=(0,h.a)(q,D),J=0,W=[].concat((0,n.Z)(H.map((function(e){return A(o,e,"feature",J++,K,l)}))),(0,n.Z)(V.labels.map((function(e){return A(o,e,"aggregate",J++,K,l)}))));return{type:"symbol",target:d,attributes:o,aggregateFields:V.fields,storage:X,mesh:{matcher:j,labels:{type:"simple",classes:W},aggregateMatcher:V.matcher,sortKey:G}}}(e,i++,t)),r}(e,t),o=function(e){var t;return"heatmap"===(null===(t=e.renderer)||void 0===t?void 0:t.type)&&"raster"===(0,S.rk)()?{type:"heatmap"}:{type:"symbol"}}(e),f={};l.map((function(t){return function(e,t,r){switch(r.target){case"feature":return void V(e,L(t),r);case"aggregate":if(!("featureReduction"in t))return;var n=t.featureReduction;switch(null===n||void 0===n?void 0:n.type){case"selection":throw new u.Z(Z,"Mapview does not support `selection` reduction type",n);case"binning":return V(e,L(t),r),void function(e,t,r,n){var a;e.aggregate||(e.aggregate={name:"aggregate",type:"bin",filters:null,input:"feature",params:{fixedBinLevel:t.fixedBinLevel,fields:(null!==(a=t.fields)&&void 0!==a?a:[]).map((function(e){return(0,i.Z)((0,i.Z)({},e.toJSON()),{},{type:D(e,r)})}))},attributes:{}}),F(e.aggregate,n.attributes.fields)}(e,n,t.fields.map((function(e){return e.toJSON()})),r);case"cluster":return V(e,L(t),r),void function(e,t,r,n){var s,u,l,o=null!==(s=n.aggregateFields)&&void 0!==s?s:[],d=new Set,f=(0,a.Z)(o);try{for(f.s();!(l=f.n()).done;){var h=l.value;d.add(h.name)}}catch(m){f.e(m)}finally{f.f()}var y,p=(0,a.Z)(null!==(u=null===t||void 0===t?void 0:t.fields)&&void 0!==u?u:[]);try{for(p.s();!(y=p.n()).done;){var v=y.value;d.has(v.name)||o.push(v)}}catch(m){p.e(m)}finally{p.f()}e.aggregate||(e.aggregate={name:"aggregate",type:"cluster",input:"feature",filters:null,attributes:{},params:{clusterRadius:(0,c.F2)(t.clusterRadius/2),clusterPixelBuffer:64*Math.ceil((0,c.F2)(t.clusterMaxSize)/64),fields:o.map((function(e){return(0,i.Z)((0,i.Z)({},e.toJSON()),{},{type:D(e,r)})}))}}),F(e.aggregate,n.attributes.fields)}(e,n,t.fields.map((function(e){return e.toJSON()})),r)}}}(f,e,t)}));var p=null!=e.subtypeCode?"".concat(e.subtypeField," = ").concat(e.subtypeCode):null;return{source:{definitionExpression:(0,d._)(e.definitionExpression,p),fields:e.fields.map((function(e){return e.toJSON()})),gdbVersion:e.gdbVersion,historicMoment:null===(r=e.historicMoment)||void 0===r?void 0:r.getTime(),outFields:e.availableFields,pixelBuffer:e.pixelBuffer,spatialReference:e.spatialReference.toJSON(),timeExtent:null===(s=e.timeExtent)||void 0===s?void 0:s.toJSON(),customParameters:e.customParameters},attributes:{fields:{},indexCount:0},processors:l,tileRenderer:o,targets:f}}catch(v){if(v.fieldName===Z)return R.error(v),null;throw v}}function F(e,t){for(var r in t){var n=t[r];if(n.target===e.name){var i=e.attributes[r];if(null!==i&&void 0!==i&&i.context){var a,s,u=i.context;u.mesh=u.mesh||(null===(a=n.context)||void 0===a?void 0:a.mesh),u.storage=u.storage||(null===(s=n.context)||void 0===s?void 0:s.storage)}else e.attributes[r]=n}}return e}function L(e){var t,r,n,i;return[null!==(t=null===(r=e.filter)||void 0===r?void 0:r.toJSON())&&void 0!==t?t:null,null!==(n=null===(i=e.featureEffect)||void 0===i||null===(i=i.filter)||void 0===i?void 0:i.toJSON())&&void 0!==n?n:null]}function V(e,t,r){return e.feature||(e.feature={name:"feature",input:"source",filters:t,attributes:{}}),F(e.feature,r.attributes.fields),e}function D(e,t){var r=e.onStatisticExpression,n=e.onStatisticField;switch(e.statisticType){case"min":case"max":case"avg":case"avg_angle":case"sum":case"count":return"esriFieldTypeDouble";case"mode":if(r){var i=r.returnType;return i?"string"===i?"esriFieldTypeString":"esriFieldTypeDouble":(R.error(new u.Z(Z,"Unable to infer type of aggregateField with onStatisticExpression. ReturnType is not defined",e)),"esriFieldTypeString")}var a=t.find((function(e){return e.name===n}));return a?a.type:(R.error(new u.Z(Z,"Unable to infer type of aggregateField with onStatisticExpression. ReturnType is not defined",e)),"esriFieldTypeString")}}function O(e,t){return t.field?P(e,(0,i.Z)((0,i.Z)({},t),{},{type:"field",field:t.field})):t.valueExpression?P(e,(0,i.Z)((0,i.Z)({},t),{},{type:"expression",valueExpression:t.valueExpression})):{field:void 0,fieldIndex:void 0}}function P(e,t){switch(t.type){case"expression":var r=t.valueExpression;if(!e.fields[r]){var n=e.indexCount++;e.fields[r]=(0,i.Z)((0,i.Z)({},t),{},{name:r,fieldIndex:n})}return{fieldIndex:e.fields[r].fieldIndex};case"label-expression":var a=JSON.stringify(t.label);if(!e.fields[a]){var s=e.indexCount++;e.fields[a]=(0,i.Z)((0,i.Z)({},t),{},{name:a,fieldIndex:s})}return{fieldIndex:e.fields[a].fieldIndex};case"field":var u=t.field;return"aggregate"===t.target&&e.fields[u]||(e.fields[u]=(0,i.Z)((0,i.Z)({},t),{},{name:u})),{field:u};case"statistic":return e.fields[t.name]=(0,i.Z)({},t),{field:t.name}}}function A(e,t,r,n,a){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=P(e,{type:"label-expression",target:r,context:{mesh:!0},resultType:"string",label:{labelExpression:t.labelExpression,labelExpressionInfo:t.labelExpressionInfo?{expression:t.labelExpressionInfo.expression}:null,symbol:!!t.symbol,where:t.where}}).fieldIndex;return(0,i.Z)((0,i.Z)({},(0,x.createSymbolSchema)(t,a,s)),{},{fieldIndex:u,target:r,index:n})}function N(e,t,r){var n;switch(r.type){case"simple":case"class-breaks":case"unique-value":case"dictionary":n={visualVariables:!0,attributes:null};break;default:n=(0,v.EJ)(r).getStorageSpec(r)}return function(e,t,r,n){if(null==r)return null;var i=r.visualVariables,a=r.attributes,u=null;i&&"visualVariables"in n&&(u=function(e,t,r){if(null===r||void 0===r||!r.length)return[];var n={storage:!0},i="numeric";return(0,S.tv)(r).map((function(r){var a,s=(0,p.nU)(r.type),u=O(e,{target:t,valueExpression:r.valueExpression,field:r.field,context:n,resultType:i}),l=u.field,o=u.fieldIndex;switch(r.type){case"size":return"$view.scale"===r.valueExpression?null:{type:"size",binding:s,field:l,fieldIndex:o,normalizationField:O(e,{target:t,field:r.normalizationField,context:n,resultType:i}).field,valueRepresentation:null!==(a=r.valueRepresentation)&&void 0!==a?a:null};case"color":return{type:"color",binding:s,field:l,fieldIndex:o,normalizationField:O(e,{target:t,field:r.normalizationField,context:n,resultType:i}).field};case"opacity":return{type:"opacity",binding:s,field:l,fieldIndex:o,normalizationField:O(e,{target:t,field:r.normalizationField,context:n,resultType:i}).field};case"rotation":return{type:"rotation",binding:s,field:l,fieldIndex:o}}})).filter(s.pC)}(e,t,n.visualVariables));var l=null!=u?4:0,o=null;return null!=a&&(o=a.map((function(r,n){var i=O(e,{valueExpression:r.valueExpression,field:r.field,resultType:"numeric",target:t}),a=i.field,s=i.fieldIndex;return{binding:n+l,field:a,fieldIndex:s}}))),{type:"simple",target:t,attributeMapping:o,vvMapping:u}}(e,t,n,r)}function U(e,t,r,n){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=null!==e&&void 0!==e?e:{indexCount:0,fields:{}};switch(r.type){case"simple":case"dot-density":return function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.getSymbols(),a=i.length?i[0]:null;return{type:"simple",symbol:(0,x.createSymbolSchema)(a,r,n),symbologyType:r.symbologyType}}(l,r,n,s);case"class-breaks":return function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={mesh:!0,use:"renderer.field"},s=r.backgroundFillSymbol,u=O(e,{target:t,field:r.field,valueExpression:r.valueExpression,resultType:"numeric",context:a}),l=u.field,o=u.fieldIndex,c=r.normalizationType,d="log"===c?"esriNormalizeByLog":"percent-of-total"===c?"esriNormalizeByPercentOfTotal":"field"===c?"esriNormalizeByField":null,f=r.classBreakInfos.map((function(e){return{symbol:(0,x.createSymbolSchema)(e.symbol,n,i),min:e.minValue,max:e.maxValue}})).sort((function(e,t){return e.min-t.min}));return{type:"interval",attributes:e.fields,field:l,fieldIndex:o,backgroundFillSymbol:(0,x.createSymbolSchema)(s,n,i),defaultSymbol:(0,x.createSymbolSchema)(r.defaultSymbol,n,i),intervals:f,normalizationField:r.normalizationField,normalizationTotal:r.normalizationTotal,normalizationType:d,isMaxInclusive:r.isMaxInclusive,symbologyType:n.symbologyType}}(l,t,r,n,s);case"unique-value":return function(e,t,r,n){var s,l,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=[],d=r.backgroundFillSymbol,f={target:t,context:{mesh:!0},resultType:"string"};if(r.field&&"string"!=typeof r.field)throw new u.Z(Z,"Expected renderer.field to be a string",r);var h,y=O(e,(0,i.Z)((0,i.Z)({},f),{},{field:r.field,valueExpression:r.valueExpression})),p=y.field,v=y.fieldIndex,m=(0,a.Z)(null!==(l=r.uniqueValueInfos)&&void 0!==l?l:[]);try{for(m.s();!(h=m.n()).done;){var g=h.value;c.push({value:""+g.value,symbol:(0,x.createSymbolSchema)(g.symbol,n,o)})}}catch(b){m.e(b)}finally{m.f()}return{type:"map",attributes:e.fields,field:p,fieldIndex:v,field2:O(e,(0,i.Z)((0,i.Z)({},f),{},{field:r.field2})).field,field3:O(e,(0,i.Z)((0,i.Z)({},f),{},{field:r.field3})).field,fieldDelimiter:null!==(s=r.fieldDelimiter)&&void 0!==s?s:void 0,backgroundFillSymbol:(0,x.createSymbolSchema)(d,n),defaultSymbol:(0,x.createSymbolSchema)(r.defaultSymbol,n),map:c,symbologyType:n.symbologyType}}(l,t,r,n,s);case"dictionary":return function(e,t,r){return{type:"dictionary",config:t.config,fieldMap:t.fieldMap,scaleExpression:t.scaleExpression,url:t.url,symbolOptions:r,symbologyType:r.symbologyType}}(l,r,n,s);case"heatmap":return function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.getSymbols(),a=i.length?i[0]:null;return{type:"heatmap",symbol:(0,x.createSymbolSchema)(a,r,n),symbologyType:r.symbologyType}}(l,r,n,s);case"pie-chart":return function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.getSymbols(),a=i[0],s=i.length>1?i[1]:null;return{type:"pie-chart",markerSymbol:(0,x.createSymbolSchema)(a,r,n),fillSymbol:(0,x.createSymbolSchema)(s,r,n),symbologyType:r.symbologyType}}(l,r,n,s)}}},91370:function(e,t,r){r.d(t,{TT:function(){return x},aR:function(){return h},rk:function(){return g},tv:function(){return y}});var n=r(93433),i=r(84506),a=r(10064),s=r(93169),u=r(32718),l=r(17842),o=r(90316),c=8,d=c-2,f=u.Z.getLogger("esri.views.2d.layers.features.support.rendererUtils"),h=function(e){var t;if(!("visualVariables"in e)||null===(t=e.visualVariables)||void 0===t||!t.length)return e;var r=e.clone(),n=r.visualVariables.map((function(e){return p(e)?v(e):e}));return r.visualVariables=n,r};function y(e){return e.map((function(e){return p(e)?v(e.clone()):e}))}function p(e){return("size"===e.type||"color"===e.type||"opacity"===e.type)&&null!=e.stops}function v(e){var t;return e.stops=function(e,t){return t.length<=c?t:(f.warn("Found ".concat(t.length," Visual Variable stops, but MapView only supports ").concat(c,". Displayed stops will be simplified.")),t.length>2*c?function(e,t){for(var r=(0,i.Z)(t),n=r[0],a=r.slice(1),s=a.pop(),u=a[0].value,o=a[a.length-1].value,c=(o-u)/d,f=[],h=u;h<o;h+=c){for(var y=0;h>=a[y].value;)y++;var p=a[y],v=t[y-1],g=h-v.value,x=p.value===v.value?1:g/(p.value-v.value);if("color"===e){var b=a[y],_=t[y-1],E=b.color.clone();E.r=m(_.color.r,E.r,x),E.g=m(_.color.g,E.g,x),E.b=m(_.color.b,E.b,x),E.a=m(_.color.a,E.a,x),f.push({value:h,color:E,label:b.label})}else if("size"===e){var k=a[y],S=t[y-1],T=(0,l.t_)(k.size),w=m((0,l.t_)(S.size),T,x);f.push({value:h,size:w,label:k.label})}else{var R=a[y],Z=m(t[y-1].opacity,R.opacity,x);f.push({value:h,opacity:Z,label:R.label})}}return[n].concat(f,[s])}(e,t):function(e){for(var t=(0,i.Z)(e),r=t[0],a=t.slice(1),s=a.pop();a.length>d;){for(var u=0,l=0,o=1;o<a.length;o++){var c=a[o-1],f=a[o],h=Math.abs(f.value-c.value);h>l&&(l=h,u=o)}a.splice(u,1)}return[r].concat((0,n.Z)(a),[s])}(t))}(e.type,null!==(t=e.stops)&&void 0!==t?t:[]),e}function m(e,t,r){return(1-r)*e+r*t}function g(){if((0,s.Z)("heatmap-force-raster"))return"raster";var e=(0,o.hc)("2d"),t=e.supportsTextureFloat,r=e.supportsTextureHalfFloat,n=e.supportsColorBufferFloat,i=e.supportsColorBufferFloatBlend,a=e.supportsColorBufferHalfFloat;return t&&n&&i||r&&a?"symbol":(0,s.Z)("heatmap-allow-raster-fallback")?"raster":"none"}function x(e){if(!e)return!0;switch(e.type){case"dot-density":if(!(0,o.hc)("2d").supportsTextureFloat)return f.error(new a.Z("webgl-missing-extension","Missing WebGL extension OES_Texture_Float which is required for DotDensity")),!1;break;case"heatmap":var t=g();if("none"===t||"raster"===t&&!(0,s.Z)("heatmap-force-raster")){var r=(0,o.hc)("2d"),n=["supportsTextureFloat","supportsTextureHalfFloat","supportsColorBufferFloat","supportsColorBufferFloatBlend","supportsColorBufferHalfFloat"].filter((function(e){return!r[e]})).join(", ");if("none"===t)return f.errorOnce(new a.Z("webgl-missing-extension","Missing WebGL".concat(r.type," requirements for Heatmap: ").concat(n))),!1;"raster"===t&&f.warnOnce("Missing WebGL".concat(r.type," requirements for accelerated Heatmap: ").concat(n,". Feature support may be limited."))}}return!0}},98290:function(e,t,r){r.d(t,{I:function(){return y},qc:function(){return c}});var n=r(1413),i=r(37762),a=r(17842),s=r(65800),u=r(94109),l=r(80613),o=r(18745);function c(e,t){if(!e||!t)return e;switch(t){case"radius":case"distance":return 2*e;case"diameter":case"width":return e;case"area":return Math.sqrt(e)}return e}function d(e){return(null!==e&&void 0!==e?e:[]).map((function(e){return function(e){return{value:e.value,size:(0,a.t_)(e.size)}}(e)}))}function f(e){if("string"==typeof e||"number"==typeof e)return(0,a.t_)(e);var t=e;return{type:"size",expression:t.expression,stops:d(t.stops)}}var h=function(e){for(var t=[],r=[],n=d(e),i=n.length,s=0;s<6;s++){var l=n[Math.min(s,i-1)];t.push(l.value),r.push(null==l.size?u.k9:(0,a.F2)(l.size))}return{values:new Float32Array(t),sizes:new Float32Array(r)}};function y(e){var t,r=e&&e.length>0?{}:null,a=r?{}:null;if(!r||!a)return{vvFields:r,vvRanges:a};var s,u=(0,i.Z)(e);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(c.field&&(r[c.type]=c.field),"size"===c.type){a.size||(a.size={});var y=c;switch((0,o.a)(y)){case l.X.SIZE_MINMAX_VALUE:a.size.minMaxValue={minDataValue:y.minDataValue,maxDataValue:y.maxDataValue,minSize:f(y.minSize),maxSize:f(y.maxSize)};break;case l.X.SIZE_SCALE_STOPS:a.size.scaleStops={stops:d(y.stops)};break;case l.X.SIZE_FIELD_STOPS:if(y.levels){var v={};for(var g in y.levels)v[g]=h(y.levels[g]);a.size.fieldStops={type:"level-dependent",levels:v}}else a.size.fieldStops=(0,n.Z)({type:"static"},h(y.stops));break;case l.X.SIZE_UNIT_VALUE:a.size.unitValue={unit:y.valueUnit,valueRepresentation:null!==(t=y.valueRepresentation)&&void 0!==t?t:void 0}}}else if("color"===c.type)a.color=m(c);else if("opacity"===c.type)a.opacity=p(c);else if("rotation"===c.type){var x=c;a.rotation={type:x.rotationType}}}}catch(b){u.e(b)}finally{u.f()}return{vvFields:r,vvRanges:a}}function p(e){var t={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if("string"==typeof e.field){if(!e.stops)return null;if(e.stops.length>8)return null;for(var r=e.stops,n=0;n<8;++n){var i=r[Math.min(n,r.length-1)];t.values[n]=i.value,t.opacities[n]=i.opacity}}else{if(!(e.stops&&e.stops.length>=0))return null;for(var a=e.stops&&e.stops.length>=0?e.stops[0].opacity:0,s=0;s<8;s++)t.values[s]=1/0,t.opacities[s]=a}return t}function v(e,t,r){e[4*t]=r.r/255,e[4*t+1]=r.g/255,e[4*t+2]=r.b/255,e[4*t+3]=r.a}function m(e){if(null==e)return null;if(e.normalizationField)return null;var t={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};if("string"==typeof e.field){if(!e.stops)return null;if(e.stops.length>8)return null;t.field=e.field;for(var r=e.stops,n=0;n<8;++n){var i=r[Math.min(n,r.length-1)];t.values[n]=i.value,v(t.colors,n,i.color)}}else{if(!(e.stops&&e.stops.length>=0))return null;for(var a=e.stops&&e.stops.length>=0&&e.stops[0].color,u=0;u<8;u++)t.values[u]=1/0,v(t.colors,u,a)}for(var l=0;l<32;l+=4)(0,s.pr)(t.colors,l,!0);return t}},95857:function(e,t,r){r.d(t,{OC:function(){return l},XA:function(){return h},Zu:function(){return o},ab:function(){return c},eT:function(){return f},i9:function(){return u},yA:function(){return d}});var n=r(29439),i=(r(75746),r(80885)),a=r(65156),s=r(92975),u=(r(38999),r(94109),r(47975),512),l=50;function o(e,t){var r=(0,s.C5)(t);if(!r)return null;var i=(0,n.Z)(r.valid,2),u=i[0],l=i[1];return e[2]>l?[(0,a.Ue)([e[0],e[1],l,e[3]]),(0,a.Ue)([u,e[1],u+e[2]-l,e[3]])]:e[0]<u?[(0,a.Ue)([u,e[1],e[2],e[3]]),(0,a.Ue)([l-(u-e[0]),e[1],l,e[3]])]:null}function c(e){return"text"===e||"esriTS"===e}function d(e){return"simple-marker"===e||"picture-marker"===e||"esriSMS"===e||"esriPMS"===e}function f(e){switch(e.geometry.type){case"point":case"multipoint":return 0;case"polyline":return 1;case"polygon":case"extent":return 2}return 0}function h(e){if(!e)return null;var t=e.xmin,r=e.ymin,n=e.xmax,a=e.ymax,s=e.spatialReference;return new i.Z({rings:[[[t,r],[t,a],[n,a],[n,r],[t,r]]],spatialReference:s})}},29145:function(e,t,r){r.d(t,{x:function(){return v},B:function(){return y}});var n=r(74165),i=r(15861),a=r(98991),s=r(37762),u=r(15671),l=r(43144),o=r(80613),c=r(54815),d={marker:o.LW.MARKER,fill:o.LW.FILL,line:o.LW.LINE,text:o.LW.TEXT},f=function(){function e(t,r,n,i){(0,u.Z)(this,e);var a={minScale:null===r||void 0===r?void 0:r.minScale,maxScale:null===r||void 0===r?void 0:r.maxScale},l=function(e){return e.minScale||e.maxScale?e.minScale+"-"+e.maxScale:""}(a);this.layers=t,this.data=r,this.hash=this._createHash()+l,this.rendererKey=n;var f,h={isOutline:!1,placement:null,symbologyType:o.mD.DEFAULT,vvFlags:n},y=(0,s.Z)(t);try{for(y.s();!(f=y.n()).done;){var p=f.value,v=d[p.type];h.isOutline="line"===p.type&&p.isOutline,p.materialKey=(0,c.jj)(v,h),p.maxVVSize=i,p.scaleInfo=a,p.templateHash+=l}}catch(m){y.e(m)}finally{y.f()}}return(0,l.Z)(e,[{key:"type",get:function(){return"expanded-cim"}},{key:"_createHash",value:function(){var e,t="",r=(0,s.Z)(this.layers);try{for(r.s();!(e=r.n()).done;){t+=e.value.templateHash}}catch(n){r.e(n)}finally{r.f()}return t}}]),e}();var h=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new a._(i,r),e.t0=f,e.next=4,s.analyzeSymbolReference(t.data,!1);case 4:return e.t1=e.sent,e.t2=t.data,e.t3=t.rendererKey,e.t4=t.maxVVSize,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4));case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();function y(e,t,r,n){return p.apply(this,arguments)}function p(){return p=(0,i.Z)((0,n.Z)().mark((function e(t,i,a,s){var u,l,o,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if("cim"!==t.type){e.next=4;break}return e.abrupt("return",h(t,i,a));case 4:if("web-style"!==t.type){e.next=25;break}return e.next=7,r.e(656).then(r.bind(r,80656));case 7:return l=e.sent,o=l.fetchCIMSymbolReference,e.next=11,o(t,null,s);case 11:if(e.t1=u=e.sent,e.t0=null!==e.t1,!e.t0){e.next=15;break}e.t0=void 0!==u;case 15:if(!e.t0){e.next=19;break}e.t2=u,e.next=20;break;case 19:e.t2=void 0;case 20:return e.t3=e.t2,e.t4=t.rendererKey,e.t5=t.maxVVSize,c={type:"cim",data:e.t3,rendererKey:e.t4,maxVVSize:e.t5},e.abrupt("return",h(c,i,a));case 25:return e.abrupt("return",t);case 26:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function v(e){if(!e)return null;var t=e.avoidSDFRasterization,r=e.type,n=e.cim,i=e.url,a=e.materialHash,s=e.maxVVSize,u={cim:n,type:r,mosaicHash:a,url:i,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null,avoidSDFRasterization:t};switch(r){case"marker":s&&"size"in n&&(n.size=Math.max(s,n.size)),u.size=e.size,u.path=e.path,u.animatedSymbolProperties=e.animatedSymbolProperties;break;case"line":u.dashTemplate=e.dashTemplate;break;case"text":u.text=e.text,u.fontName=e.fontName}return u}},31666:function(e,t,r){r.d(t,{JV:function(){return a},oq:function(){return i}});var n=new(r(43404).X)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function i(e){return n.toJSON(e)}function a(e){var t=e.raster.rasterInfo,r=t.bandCount,n=t.attributeTable,i=t.colormap,a=t.pixelType;return 1===r&&(null!=n||null!=i||"u8"===a||"s8"===a)}}}]);
//# sourceMappingURL=3325.45d79934.chunk.js.map